import{d as t,a,c as e}from"../../../_/nitro.mjs";import{s as o}from"../../../_/serverSupabaseClient.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/ssr";import"../../../_/fetch-retry.mjs";const r=t(async t=>{const r=await o(t),i=a(t);let s=r.from("logs_acesso").select("*").order("created_at",{ascending:!1});i.usuario_id&&(s=s.eq("usuario_id",i.usuario_id)),i.acao&&(s=s.eq("acao",i.acao)),i.data_inicio&&(s=s.gte("created_at",i.data_inicio)),i.data_fim&&(s=s.lte("created_at",i.data_fim));const m=i.limit?Number(i.limit):100;s=s.limit(m);const{data:d,error:n}=await s;if(n)throw e({statusCode:500,message:n.message});return d||[]});export{r as default};
