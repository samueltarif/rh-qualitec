import{d as e,u as o,a as t,c as r}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const a=e(async e=>{try{const a=o(),s=a.public.supabaseUrl,i=a.supabaseServiceKey,c=t(e);if(!i)throw r({statusCode:500,message:"Service key n√£o configurada"});const n={Authorization:`Bearer ${i}`,apikey:i};let d="select=*,categoria:categorias_documentos(id,nome,cor,icone)&order=ordem.asc";c.categoria_id&&(d+=`&categoria_id=eq.${c.categoria_id}`),"true"===c.apenas_ativos&&(d+="&ativo=eq.true");return await $fetch(`${s}/rest/v1/tipos_documentos?${d}`,{headers:n})||[]}catch(e){throw console.error("[GET TIPOS] Erro:",e),r({statusCode:e.statusCode||500,message:e.message||"Erro ao buscar tipos"})}});export{a as default};
