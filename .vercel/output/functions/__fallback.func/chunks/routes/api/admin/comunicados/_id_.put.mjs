import{d as t,g as o,r as a,c as e}from"../../../../_/nitro.mjs";import{s}from"../../../../_/serverSupabaseClient.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/ssr";import"../../../../_/fetch-retry.mjs";const r=t(async t=>{const r=await s(t),i=o(t,"id"),d=await a(t);if(!i)throw e({statusCode:400,message:"ID é obrigatório"});try{const{data:t,error:o}=await r.from("comunicados").update({titulo:d.titulo,conteudo:d.conteudo,tipo:d.tipo,destino:d.destino,destino_ids:d.destino_ids,data_expiracao:d.data_expiracao,ativo:d.ativo,updated_at:(new Date).toISOString()}).eq("id",i).select().single();if(o)throw e({statusCode:500,message:o.message});return t}catch(t){throw console.error("Erro ao atualizar comunicado:",t),e({statusCode:500,message:t.message||"Erro ao atualizar comunicado"})}});export{r as default};
