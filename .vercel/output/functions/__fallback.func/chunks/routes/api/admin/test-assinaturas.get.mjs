import{d as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const r=a(async a=>{try{const r=await serverSupabaseServiceRole(a);console.log("ğŸ” Testando acesso Ã  tabela assinaturas_ponto...");const{data:o,error:e}=await r.from("information_schema.tables").select("table_name").eq("table_name","assinaturas_ponto");if(e)return console.error("âŒ Erro ao verificar tabela:",e),{error:"Erro ao verificar tabela",details:e};if(console.log("ğŸ“‹ Tabelas encontradas:",o),!o||0===o.length)return{error:"Tabela assinaturas_ponto nÃ£o existe",suggestion:"Execute a migration 31_assinatura_ponto.sql"};const{data:t,error:s}=await r.from("assinaturas_ponto").select("*").limit(5);return s?(console.error("âŒ Erro ao acessar assinaturas:",s),{error:"Erro ao acessar tabela",details:s}):(console.log("âœ… Assinaturas encontradas:",(null==t?void 0:t.length)||0),{success:!0,tabelaExiste:!0,totalAssinaturas:(null==t?void 0:t.length)||0,assinaturas:t||[]})}catch(a){return console.error("ğŸ’¥ Erro geral:",a),{error:"Erro geral",details:a.message}}});export{r as default};
