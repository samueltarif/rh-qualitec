import{d as o,c as a}from"../../../_/nitro.mjs";import{s as e}from"../../../_/serverSupabaseServiceRole.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/functions-js";import"../../../virtual/_commonjsHelpers.mjs";import"@supabase/postgrest-js";import"@supabase/realtime-js";import"@supabase/storage-js";import"@supabase/auth-js";import"../../../_/fetch-retry.mjs";const r=o(async o=>{try{const a=e(o);console.log("üîß Executando corre√ß√£o do CARLOS...");const{data:r}=await a.from("colaboradores").select("id, nome, empresa_id").eq("id","c79f679a-147a-47c1-9344-83833507adb0").single();console.log("üìã Empresa do CARLOS:",r);const{error:s}=await a.from("colaboradores").update({auth_uid:"cdefc7c4-0ac1-4f74-9fcb-f074ac0548b7"}).eq("id","c79f679a-147a-47c1-9344-83833507adb0");s?console.error("‚ùå Erro ao atualizar auth_uid:",s):console.log("‚úÖ Auth_uid atualizado");const{error:t}=await a.from("registros_ponto").delete().eq("colaborador_id","c79f679a-147a-47c1-9344-83833507adb0");t?console.error("‚ùå Erro ao limpar registros:",t):console.log("‚úÖ Registros antigos removidos");const d=[{empresa_id:(null==r?void 0:r.empresa_id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",colaborador_id:"c79f679a-147a-47c1-9344-83833507adb0",data:"2025-12-10",entrada_1:"08:00:00",saida_1:"12:00:00",entrada_2:"13:00:00",saida_2:"17:00:00",observacoes:"Dia completo"},{empresa_id:(null==r?void 0:r.empresa_id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",colaborador_id:"c79f679a-147a-47c1-9344-83833507adb0",data:"2025-12-09",entrada_1:"08:15:00",saida_1:"12:15:00",entrada_2:"13:15:00",saida_2:"17:15:00",observacoes:"Dia completo"},{empresa_id:(null==r?void 0:r.empresa_id)||"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",colaborador_id:"c79f679a-147a-47c1-9344-83833507adb0",data:"2025-12-08",entrada_1:"08:00:00",saida_1:"12:00:00",entrada_2:"13:00:00",saida_2:"17:00:00",observacoes:"Dia completo"}],{error:c}=await a.from("registros_ponto").insert(d);if(c)throw console.error("‚ùå Erro ao inserir registros:",c),c;console.log("‚úÖ Novos registros inseridos");const{data:i,count:n}=await a.from("registros_ponto").select("*",{count:"exact"}).eq("colaborador_id","c79f679a-147a-47c1-9344-83833507adb0");return console.log("üéâ Resultado final:",{registros:n,dados:i}),{success:!0,message:"Corre√ß√£o executada com sucesso!",registros_criados:n,dados:i}}catch(o){throw console.error("‚ùå Erro na corre√ß√£o:",o),a({statusCode:500,message:o.message})}});export{r as default};
