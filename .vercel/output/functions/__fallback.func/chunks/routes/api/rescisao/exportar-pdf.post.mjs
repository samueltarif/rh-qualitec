import{d as n,r as o,c as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const s=n(async n=>{try{const a=await o(n),{form:s,colaborador:e,resultado:i}=a,t=function(n,o,a){var s;const formatarMoeda=n=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n||0),formatarData=n=>new Date(n+"T00:00:00").toLocaleDateString("pt-BR"),getTipoRescisaoLabel=n=>({dispensa_sem_justa_causa:"Dispensa sem Justa Causa",dispensa_com_justa_causa:"Dispensa com Justa Causa",pedido_demissao:"Pedido de Demissão",acordo_mutuo:"Acordo Mútuo (Art. 484-A)",termino_experiencia:"Término de Experiência",termino_determinado:"Término de Contrato",rescisao_indireta:"Rescisão Indireta",morte:"Morte do Empregado",aposentadoria:"Aposentadoria"}[n]||n);return`\n<!DOCTYPE html>\n<html lang="pt-BR">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Simulação de Rescisão - ${o.nome}</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n    \n    body {\n      font-family: Arial, sans-serif;\n      font-size: 12px;\n      line-height: 1.6;\n      color: #333;\n      padding: 40px;\n    }\n    \n    .header {\n      text-align: center;\n      margin-bottom: 30px;\n      border-bottom: 3px solid #f59e0b;\n      padding-bottom: 20px;\n    }\n    \n    .header h1 {\n      color: #f59e0b;\n      font-size: 24px;\n      margin-bottom: 10px;\n    }\n    \n    .header .subtitle {\n      color: #666;\n      font-size: 14px;\n    }\n    \n    .info-box {\n      background: #f9fafb;\n      border: 1px solid #e5e7eb;\n      border-radius: 8px;\n      padding: 20px;\n      margin-bottom: 20px;\n    }\n    \n    .info-box h2 {\n      color: #1f2937;\n      font-size: 16px;\n      margin-bottom: 15px;\n      border-bottom: 2px solid #f59e0b;\n      padding-bottom: 5px;\n    }\n    \n    .info-grid {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 10px;\n    }\n    \n    .info-item {\n      display: flex;\n      justify-content: space-between;\n      padding: 5px 0;\n    }\n    \n    .info-label {\n      color: #6b7280;\n      font-weight: 600;\n    }\n    \n    .info-value {\n      color: #1f2937;\n      font-weight: bold;\n    }\n    \n    .section {\n      margin-bottom: 25px;\n    }\n    \n    .section-title {\n      background: #f59e0b;\n      color: white;\n      padding: 10px 15px;\n      font-size: 14px;\n      font-weight: bold;\n      border-radius: 5px 5px 0 0;\n    }\n    \n    .section-content {\n      border: 1px solid #e5e7eb;\n      border-top: none;\n      border-radius: 0 0 5px 5px;\n    }\n    \n    .item-row {\n      display: flex;\n      justify-content: space-between;\n      padding: 10px 15px;\n      border-bottom: 1px solid #f3f4f6;\n    }\n    \n    .item-row:last-child {\n      border-bottom: none;\n    }\n    \n    .item-row.total {\n      background: #fef3c7;\n      font-weight: bold;\n      font-size: 14px;\n      border-top: 2px solid #f59e0b;\n    }\n    \n    .valor-positivo {\n      color: #059669;\n      font-weight: bold;\n    }\n    \n    .valor-negativo {\n      color: #dc2626;\n      font-weight: bold;\n    }\n    \n    .valor-liquido {\n      background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%);\n      color: white;\n      padding: 20px;\n      border-radius: 8px;\n      text-align: center;\n      margin: 30px 0;\n    }\n    \n    .valor-liquido .label {\n      font-size: 14px;\n      opacity: 0.9;\n      margin-bottom: 5px;\n    }\n    \n    .valor-liquido .valor {\n      font-size: 32px;\n      font-weight: bold;\n    }\n    \n    .observacoes {\n      background: #eff6ff;\n      border-left: 4px solid #3b82f6;\n      padding: 15px;\n      border-radius: 5px;\n      margin-top: 20px;\n    }\n    \n    .observacoes h3 {\n      color: #1e40af;\n      font-size: 14px;\n      margin-bottom: 10px;\n    }\n    \n    .observacoes ul {\n      list-style: none;\n      padding-left: 0;\n    }\n    \n    .observacoes li {\n      padding: 5px 0;\n      padding-left: 20px;\n      position: relative;\n    }\n    \n    .observacoes li:before {\n      content: "•";\n      color: #3b82f6;\n      font-weight: bold;\n      position: absolute;\n      left: 0;\n    }\n    \n    .footer {\n      margin-top: 40px;\n      padding-top: 20px;\n      border-top: 2px solid #e5e7eb;\n      text-align: center;\n      color: #6b7280;\n      font-size: 11px;\n    }\n    \n    .warning {\n      background: #fef2f2;\n      border: 1px solid #fecaca;\n      border-left: 4px solid #dc2626;\n      padding: 15px;\n      border-radius: 5px;\n      margin-bottom: 20px;\n    }\n    \n    .warning strong {\n      color: #991b1b;\n    }\n    \n    @media print {\n      body {\n        padding: 20px;\n      }\n      \n      .info-box, .section, .observacoes {\n        page-break-inside: avoid;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class="header">\n    <h1>SIMULAÇÃO DE RESCISÃO CONTRATUAL</h1>\n    <p class="subtitle">Documento gerado em ${(new Date).toLocaleString("pt-BR")}</p>\n  </div>\n\n  <div class="warning">\n    <strong>⚠️ ATENÇÃO:</strong> Este documento é uma SIMULAÇÃO e não possui validade legal. \n    Os valores apresentados são estimativas e não substituem o cálculo oficial da rescisão.\n  </div>\n\n  <div class="info-box">\n    <h2>Dados do Colaborador</h2>\n    <div class="info-grid">\n      <div class="info-item">\n        <span class="info-label">Nome:</span>\n        <span class="info-value">${o.nome}</span>\n      </div>\n      <div class="info-item">\n        <span class="info-label">Cargo:</span>\n        <span class="info-value">${(null==(s=o.cargo)?void 0:s.nome)||"N/A"}</span>\n      </div>\n      <div class="info-item">\n        <span class="info-label">Salário Base:</span>\n        <span class="info-value">${formatarMoeda(o.salario_base)}</span>\n      </div>\n      <div class="info-item">\n        <span class="info-label">Data Admissão:</span>\n        <span class="info-value">${formatarData(o.data_admissao)}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="info-box">\n    <h2>Dados da Rescisão</h2>\n    <div class="info-grid">\n      <div class="info-item">\n        <span class="info-label">Tipo:</span>\n        <span class="info-value">${getTipoRescisaoLabel(n.tipo_rescisao)}</span>\n      </div>\n      <div class="info-item">\n        <span class="info-label">Data Desligamento:</span>\n        <span class="info-value">${formatarData(n.data_desligamento)}</span>\n      </div>\n      <div class="info-item">\n        <span class="info-label">Tempo de Casa:</span>\n        <span class="info-value">${a.tempo_casa}</span>\n      </div>\n      <div class="info-item">\n        <span class="info-label">Aviso Prévio:</span>\n        <span class="info-value">${"trabalhado"===n.aviso_previo?"Trabalhado":"indenizado"===n.aviso_previo?"Indenizado":"Não Aplicável"}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="section">\n    <div class="section-title">PROVENTOS (Valores a Receber)</div>\n    <div class="section-content">\n      ${a.proventos.map(n=>`\n        <div class="item-row">\n          <span>${n.descricao}</span>\n          <span class="valor-positivo">${formatarMoeda(n.valor)}</span>\n        </div>\n      `).join("")}\n      <div class="item-row total">\n        <span>TOTAL PROVENTOS</span>\n        <span class="valor-positivo">${formatarMoeda(a.total_proventos)}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="section">\n    <div class="section-title">DESCONTOS</div>\n    <div class="section-content">\n      ${a.descontos.length>0?a.descontos.map(n=>`\n        <div class="item-row">\n          <span>${n.descricao}</span>\n          <span class="valor-negativo">${formatarMoeda(n.valor)}</span>\n        </div>\n      `).join(""):'<div class="item-row"><span>Nenhum desconto</span><span>R$ 0,00</span></div>'}\n      <div class="item-row total">\n        <span>TOTAL DESCONTOS</span>\n        <span class="valor-negativo">${formatarMoeda(a.total_descontos)}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="section">\n    <div class="section-title">FGTS</div>\n    <div class="section-content">\n      ${a.fgts.map(n=>`\n        <div class="item-row">\n          <span>${n.descricao}</span>\n          <span style="color: #2563eb; font-weight: bold;">${formatarMoeda(n.valor)}</span>\n        </div>\n      `).join("")}\n      <div class="item-row total">\n        <span>TOTAL FGTS</span>\n        <span style="color: #2563eb; font-weight: bold;">${formatarMoeda(a.total_fgts)}</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="valor-liquido">\n    <div class="label">VALOR LÍQUIDO A RECEBER</div>\n    <div class="valor">${formatarMoeda(a.valor_liquido)}</div>\n  </div>\n\n  <div class="observacoes">\n    <h3>Observações Legais</h3>\n    <ul>\n      ${a.observacoes.map(n=>`<li>${n}</li>`).join("")}\n    </ul>\n  </div>\n\n  <div class="footer">\n    <p>Este documento foi gerado automaticamente pelo Sistema de Gestão de RH</p>\n    <p>Para dúvidas, consulte o departamento de Recursos Humanos</p>\n  </div>\n</body>\n</html>\n  `}(s,e,i);return{html:t,filename:`rescisao_${e.nome.replace(/\s+/g,"_")}_${Date.now()}.pdf`}}catch(n){throw console.error("Erro ao exportar PDF:",n),a({statusCode:500,message:"Erro ao exportar PDF de rescisão"})}});export{s as default};
