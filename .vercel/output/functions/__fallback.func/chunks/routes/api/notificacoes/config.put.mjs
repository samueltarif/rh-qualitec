import{d as e,r as t,c as s}from"../../../_/nitro.mjs";import{s as a}from"../../../_/serverSupabaseClient.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/ssr";import"../../../_/fetch-retry.mjs";const o=e(async e=>{const o=await a(e),i=await t(e),{data:r}=await o.from("configuracoes_notificacoes").select("id, empresa_id").limit(1).single();if(r){const{data:e,error:t}=await o.from("configuracoes_notificacoes").update({...i,updated_at:(new Date).toISOString()}).eq("id",r.id).select().single();if(t)throw s({statusCode:500,message:t.message});return e}{const{data:e}=await o.from("empresas").select("id").limit(1).single(),{data:t,error:a}=await o.from("configuracoes_notificacoes").insert({...i,empresa_id:null==e?void 0:e.id}).select().single();if(a)throw s({statusCode:500,message:a.message});return t}});export{o as default};
