import{d as e,g as o,c as t,u as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const s=e(async e=>{try{const s=o(e,"id");if(!s)throw t({statusCode:400,message:"ID da jornada é obrigatório"});const r=a(),n=r.public.supabaseUrl,i=r.supabaseServiceKey;if(!i)throw t({statusCode:500,message:"Service key não configurada"});const d={Authorization:`Bearer ${i}`,apikey:i,"Content-Type":"application/json",Prefer:"return=representation"};await $fetch(`${n}/rest/v1/jornadas_trabalho?id=eq.${s}`,{method:"PATCH",headers:d,body:{ativo:!1,updated_at:(new Date).toISOString()}});return{success:!0,message:"Jornada desativada com sucesso"}}catch(e){throw console.error("[DELETE JORNADA] Erro:",e.message||e),t({statusCode:e.statusCode||500,message:e.message||"Erro ao excluir jornada"})}});export{s as default};
