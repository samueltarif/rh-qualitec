import{d as e,g as t,r as a,c as o,u as r}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const s=e(async e=>{try{const s=t(e,"id"),n=await a(e);if(!s)throw o({statusCode:400,message:"ID da jornada é obrigatório"});const i=r(),d=i.public.supabaseUrl,p=i.supabaseServiceKey;if(!p)throw o({statusCode:500,message:"Service key não configurada"});const c={Authorization:`Bearer ${p}`,apikey:p,"Content-Type":"application/json",Prefer:"return=representation"},{id:u,created_at:m,...h}=n,f=await $fetch(`${d}/rest/v1/jornadas_trabalho?id=eq.${s}`,{method:"PATCH",headers:c,body:{...h,updated_at:(new Date).toISOString()}});return{success:!0,data:null==f?void 0:f[0]}}catch(e){throw console.error("[UPDATE JORNADA] Erro:",e.message||e),o({statusCode:e.statusCode||500,message:e.message||"Erro ao atualizar jornada"})}});export{s as default};
