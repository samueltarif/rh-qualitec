import{d as o,g as r,c as e}from"../../../_/nitro.mjs";import{s as a}from"../../../_/serverSupabaseClient.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/ssr";import"../../../_/fetch-retry.mjs";const t=o(async o=>{const t=r(o,"id");if(!t)throw e({statusCode:400,message:"ID do colaborador é obrigatório"});const s=await a(o);let{data:n,error:d}=await s.from("colaboradores").select("\n      *,\n      cargo:cargos(id, nome, nivel),\n      departamento:departamentos!colaboradores_departamento_id_fkey(id, nome),\n      jornada:jornadas_trabalho(id, nome, tipo)\n    ").eq("id",t).single();if(d){const{data:o,error:r}=await s.from("colaboradores").select("*").eq("id",t).single();if(r)throw e({statusCode:500,message:`Erro ao buscar colaborador: ${r.message}`});n=o}if(!n)throw e({statusCode:404,message:"Colaborador não encontrado"});const i=n;return{...i,recebe_vt:i.recebe_vt||!1,valor_vt:i.valor_vt||0,recebe_vr:i.recebe_vr||!1,valor_vr:i.valor_vr||0,recebe_va:i.recebe_va||!1,valor_va:i.valor_va||0,recebe_va_vr:i.recebe_va_vr||!1,valor_va_vr:i.valor_va_vr||0,plano_saude:i.plano_saude||!1,plano_odonto:i.plano_odonto||!1}});export{t as default};
