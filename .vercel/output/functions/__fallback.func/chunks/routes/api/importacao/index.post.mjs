import{d as t,c as o,r as a}from"../../../_/nitro.mjs";import{s as e}from"../../../_/serverSupabaseUser.mjs";import{s as r}from"../../../_/serverSupabaseClient.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/ssr";import"../../../_/fetch-retry.mjs";const s=t(async t=>{var s;try{if(!await e(t))throw o({statusCode:401,message:"NÃ£o autenticado"});const m=await a(t),i=await r(t),{data:p,error:n}=await i.from("templates_importacao").insert({nome:m.nome,descricao:m.descricao,tipo_entidade:m.tipo_entidade,formato:m.formato,ativo:null==(s=m.ativo)||s,campos_mapeamento:m.campos_mapeamento||[]}).select().single();if(n)throw n;return{success:!0,data:p}}catch(t){throw console.error("Erro ao criar template:",t),o({statusCode:t.statusCode||500,message:t.message||"Erro ao criar template"})}});export{s as default};
