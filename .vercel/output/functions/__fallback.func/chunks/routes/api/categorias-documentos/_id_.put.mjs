import{d as e,u as o,g as t,r,c as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const s=e(async e=>{try{const s=o(),i=s.public.supabaseUrl,n=s.supabaseServiceKey,c=t(e,"id"),d=await r(e);if(!n)throw a({statusCode:500,message:"Service key n√£o configurada"});const p={Authorization:`Bearer ${n}`,apikey:n,"Content-Type":"application/json",Prefer:"return=representation"},m={nome:d.nome,descricao:d.descricao,cor:d.cor,icone:d.icone,ativo:d.ativo,ordem:d.ordem,updated_at:(new Date).toISOString()},u=await $fetch(`${i}/rest/v1/categorias_documentos?id=eq.${c}`,{method:"PATCH",headers:p,body:m});return Array.isArray(u)?u[0]:u}catch(e){throw console.error("[PUT CATEGORIA] Erro:",e),a({statusCode:e.statusCode||500,message:e.message||"Erro ao atualizar categoria"})}});export{s as default};
