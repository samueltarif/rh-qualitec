import{d as t,c as r}from"../../../_/nitro.mjs";import{s as o}from"../../../_/serverSupabaseUser.mjs";import{s}from"../../../_/serverSupabaseClient.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@supabase/ssr";import"../../../_/fetch-retry.mjs";const e=t(async t=>{try{if(!await o(t))throw r({statusCode:401,message:"Não autenticado"});const e=await s(t),{data:a,error:i}=await e.from("historico_exportacoes").select("*").order("created_at",{ascending:!1}).limit(50);if(i)throw i;return{success:!0,data:a||[]}}catch(t){throw console.error("Erro ao buscar histórico:",t),r({statusCode:t.statusCode||500,message:t.message||"Erro ao buscar histórico"})}});export{e as default};
