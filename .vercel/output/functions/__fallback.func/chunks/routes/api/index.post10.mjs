import{d as e,u as o,r,c as a}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const t=e(async e=>{try{const t=o(),i=t.public.supabaseUrl,s=t.supabaseServiceKey,d=await r(e);if(!s)throw a({statusCode:500,message:"Service key n√£o configurada"});const n={Authorization:`Bearer ${s}`,apikey:s,"Content-Type":"application/json",Prefer:"return=representation"},c={categoria_id:d.categoria_id,nome:d.nome,descricao:d.descricao,requer_periodo:d.requer_periodo||!1,requer_horas:d.requer_horas||!1,requer_aprovacao:d.requer_aprovacao||!1,requer_arquivo:void 0===d.requer_arquivo||d.requer_arquivo,tem_validade:d.tem_validade||!1,dias_validade:d.dias_validade,notificar_vencimento:d.notificar_vencimento||!1,dias_aviso_vencimento:d.dias_aviso_vencimento||30,campos_extras:d.campos_extras||[],ativo:void 0===d.ativo||d.ativo,ordem:d.ordem||0},m=await $fetch(`${i}/rest/v1/tipos_documentos?select=*,categoria:categorias_documentos(id,nome,cor,icone)`,{method:"POST",headers:n,body:c});return Array.isArray(m)?m[0]:m}catch(e){throw console.error("[POST TIPO] Erro:",e),a({statusCode:e.statusCode||500,message:e.message||"Erro ao criar tipo"})}});export{t as default};
