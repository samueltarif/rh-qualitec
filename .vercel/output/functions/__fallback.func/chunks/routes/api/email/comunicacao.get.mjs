import{d as e,u as t,c as o}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const r=e(async()=>{try{const e=t(),r=e.public.supabaseUrl,s=e.supabaseServiceKey;if(!s)throw o({statusCode:500,message:"Service key não configurada"});const a={Authorization:`Bearer ${s}`,apikey:s},i=await $fetch(`${r}/rest/v1/empresa?select=id&limit=1`,{headers:a});if(!i||0===i.length)return null;const n=await $fetch(`${r}/rest/v1/configuracoes_comunicacao?empresa_id=eq.${i[0].id}&select=*`,{headers:a});return n&&n.length>0?n[0]:null}catch(e){throw console.error("[GET COMUNICACAO] Erro:",e.message||e),o({statusCode:e.statusCode||500,message:e.message||"Erro ao buscar configurações de comunicação"})}});export{r as default};
