import{d as e,u as o,g as a,r,c as t}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const i=e(async e=>{try{const i=o(),s=i.public.supabaseUrl,d=i.supabaseServiceKey,n=a(e,"id"),c=await r(e);if(!d)throw t({statusCode:500,message:"Service key n√£o configurada"});const p={Authorization:`Bearer ${d}`,apikey:d,"Content-Type":"application/json",Prefer:"return=representation"},m={categoria_id:c.categoria_id,nome:c.nome,descricao:c.descricao,requer_periodo:c.requer_periodo,requer_horas:c.requer_horas,requer_aprovacao:c.requer_aprovacao,requer_arquivo:c.requer_arquivo,tem_validade:c.tem_validade,dias_validade:c.dias_validade,notificar_vencimento:c.notificar_vencimento,dias_aviso_vencimento:c.dias_aviso_vencimento,campos_extras:c.campos_extras,ativo:c.ativo,ordem:c.ordem,updated_at:(new Date).toISOString()},u=await $fetch(`${s}/rest/v1/tipos_documentos?id=eq.${n}&select=*,categoria:categorias_documentos(id,nome,cor,icone)`,{method:"PATCH",headers:p,body:m});return Array.isArray(u)?u[0]:u}catch(e){throw console.error("[PUT TIPO] Erro:",e),t({statusCode:e.statusCode||500,message:e.message||"Erro ao atualizar tipo"})}});export{i as default};
