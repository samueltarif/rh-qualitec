import{d as e,u as t,c as o,r}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const a=e(async e=>{try{const a=t(),s=a.public.supabaseUrl,n=a.supabaseServiceKey;if(!n)throw o({statusCode:500,message:"Service key não configurada"});const i={Authorization:`Bearer ${n}`,apikey:n,"Content-Type":"application/json",Prefer:"return=representation"},p=await r(e),c=await $fetch(`${s}/rest/v1/politicas_compliance`,{method:"POST",headers:i,body:{...p,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}});return c&&c.length>0?c[0]:c}catch(e){throw console.error("[POST POLÍTICA] Erro:",e.message||e),o({statusCode:e.statusCode||500,message:e.message||"Erro ao criar política"})}});export{a as default};
