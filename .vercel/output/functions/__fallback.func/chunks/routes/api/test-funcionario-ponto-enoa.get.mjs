import{d as o}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const r=o(async o=>{const r=await serverSupabaseClient(o);try{console.log("üîç [TESTE ENOA] Iniciando teste espec√≠fico para Enoa");const{data:o,error:e}=await r.from("app_users").select("*").eq("colaborador_id","43678ebd-27ee-49f1-9192-327c6e434d68").single();if(console.log("üîç [TESTE ENOA] App User Data:",o),console.log("üîç [TESTE ENOA] App User Error:",e),!o)return{erro:"Usu√°rio Enoa n√£o encontrado na tabela app_users",colaborador_id:"43678ebd-27ee-49f1-9192-327c6e434d68"};const t=new Date,a=t.getMonth()+1,s=t.getFullYear(),n=`${s}-${String(a).padStart(2,"0")}-01`,d=new Date(s,a,0).getDate(),i=`${s}-${String(a).padStart(2,"0")}-${d}`;console.log("üîç [TESTE ENOA] Per√≠odo:",n,"at√©",i);const{data:l,error:c}=await r.from("registros_ponto").select("*").eq("colaborador_id",o.colaborador_id).gte("data",n).lte("data",i).order("data",{ascending:!1});console.log("üîç [TESTE ENOA] Registros encontrados:",(null==l?void 0:l.length)||0),console.log("üîç [TESTE ENOA] Registros Error:",c);const{data:p,error:g}=await r.from("registros_ponto").select("*").eq("colaborador_id",o.colaborador_id).order("data",{ascending:!1});return console.log("üîç [TESTE ENOA] TODOS os registros:",(null==p?void 0:p.length)||0),{usuario:o,periodo:{dataInicio:n,dataFim:i},registros_periodo:l||[],todos_registros:p||[],total_periodo:(null==l?void 0:l.length)||0,total_geral:(null==p?void 0:p.length)||0,erro_registros:c,erro_todos:g}}catch(o){return console.error("‚ùå [TESTE ENOA] Erro:",o),{erro:o.message,stack:o.stack}}});export{r as default};
