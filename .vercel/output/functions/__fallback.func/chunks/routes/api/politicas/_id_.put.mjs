import{d as e,u as t,c as o,r as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const r=e(async e=>{var r;try{const s=t(),i=s.public.supabaseUrl,n=s.supabaseServiceKey;if(!n)throw o({statusCode:500,message:"Service key não configurada"});const p={Authorization:`Bearer ${n}`,apikey:n,"Content-Type":"application/json",Prefer:"return=representation"},d=null==(r=e.context.params)?void 0:r.id,c=await a(e),m=await $fetch(`${i}/rest/v1/politicas_compliance?id=eq.${d}`,{method:"PATCH",headers:p,body:{...c,updated_at:(new Date).toISOString()}});return m&&m.length>0?m[0]:m}catch(e){throw console.error("[PUT POLÍTICA] Erro:",e.message||e),o({statusCode:e.statusCode||500,message:e.message||"Erro ao atualizar política"})}});export{r as default};
