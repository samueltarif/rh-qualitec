import{d as e,u as o,c as t}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const s=e(async e=>{var s;try{const r=o(),a=r.public.supabaseUrl,i=r.supabaseServiceKey;if(!i)throw t({statusCode:500,message:"Service key não configurada"});const n={Authorization:`Bearer ${i}`,apikey:i,"Content-Type":"application/json"},p=null==(s=e.context.params)?void 0:s.id;return await $fetch(`${a}/rest/v1/politicas_compliance?id=eq.${p}`,{method:"DELETE",headers:n}),{success:!0}}catch(e){throw console.error("[DELETE POLÍTICA] Erro:",e.message||e),t({statusCode:e.statusCode||500,message:e.message||"Erro ao excluir política"})}});export{s as default};
