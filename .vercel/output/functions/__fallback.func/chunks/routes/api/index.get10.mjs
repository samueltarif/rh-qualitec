import{d as e,u as o,c as t}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";const r=e(async e=>{try{const e=o(),r=e.public.supabaseUrl,s=e.supabaseServiceKey;if(!s)throw t({statusCode:500,message:"Service key não configurada"});const a={Authorization:`Bearer ${s}`,apikey:s},n=await $fetch(`${r}/rest/v1/parametros_folha?ativo=eq.true&order=vigencia_inicio.desc&limit=1`,{headers:a});if(console.log("[GET PARAMETROS FOLHA] Parâmetros encontrados:",n),!n||0===n.length)throw t({statusCode:404,message:"Parâmetros de folha não encontrados"});return console.log("[GET PARAMETROS FOLHA] Retornando:",n[0]),{success:!0,data:n[0]}}catch(e){throw console.error("[GET PARAMETROS FOLHA] Erro:",e.message||e),t({statusCode:e.statusCode||500,message:e.message||"Erro ao buscar parâmetros de folha"})}});export{r as default};
