import{defineComponent as e,ref as t,computed as a,watch as o,resolveComponent as i,mergeProps as s,unref as r,useSSRContext as l}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as d,ssrInterpolate as n,ssrRenderList as p,ssrRenderClass as u,ssrIncludeBooleanAttr as v,ssrLooseContain as m,ssrLooseEqual as b,ssrRenderAttr as g}from"vue/server-renderer";const x=e({__name:"ModalPolitica",__ssrInlineRender:!0,props:{politica:{}},emits:["close","saved"],setup(e,{emit:a}){const o=t(!1),l=t({codigo:"",titulo:"",descricao:"",tipo:"",categoria:"",conteudo_html:"",conteudo_texto:"",resumo:"",versao:"1.0",data_vigencia:(new Date).toISOString().split("T")[0],data_expiracao:null,status:"rascunho",publicado:!1,obrigatorio_aceite:!1,aplica_todos_colaboradores:!0,prazo_aceite_dias:30,empresa_id:"00000000-0000-0000-0000-000000000000"});return(t,a,p,u)=>{const x=i("Icon");a(`<div${c(s({class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},u))}><div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col"><div class="flex items-center justify-between p-6 border-b border-gray-200"><h2 class="text-2xl font-bold text-gray-900">${n(e.politica?"Editar Política":"Nova Política")}</h2><button class="text-gray-400 hover:text-gray-600 transition-colors" type="button">`),a(d(x,{name:"mdi:close",size:"28"},null,p)),a(`</button></div><form class="flex-1 overflow-y-auto p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2"> Código * </label><input${g("value",r(l).codigo)} type="text" required placeholder="LGPD_001" class="input"></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Tipo * </label><select required class="input"><option value=""${v(Array.isArray(r(l).tipo)?m(r(l).tipo,""):b(r(l).tipo,""))?" selected":""}>Selecione...</option><option value="lgpd"${v(Array.isArray(r(l).tipo)?m(r(l).tipo,"lgpd"):b(r(l).tipo,"lgpd"))?" selected":""}>LGPD</option><option value="termo_uso"${v(Array.isArray(r(l).tipo)?m(r(l).tipo,"termo_uso"):b(r(l).tipo,"termo_uso"))?" selected":""}>Termo de Uso</option><option value="politica_interna"${v(Array.isArray(r(l).tipo)?m(r(l).tipo,"politica_interna"):b(r(l).tipo,"politica_interna"))?" selected":""}>Política Interna</option><option value="codigo_conduta"${v(Array.isArray(r(l).tipo)?m(r(l).tipo,"codigo_conduta"):b(r(l).tipo,"codigo_conduta"))?" selected":""}>Código de Conduta</option><option value="regulamento"${v(Array.isArray(r(l).tipo)?m(r(l).tipo,"regulamento"):b(r(l).tipo,"regulamento"))?" selected":""}>Regulamento</option><option value="outro"${v(Array.isArray(r(l).tipo)?m(r(l).tipo,"outro"):b(r(l).tipo,"outro"))?" selected":""}>Outro</option></select></div></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Título * </label><input${g("value",r(l).titulo)} type="text" required placeholder="Política de Privacidade e Proteção de Dados" class="input"></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Descrição </label><textarea rows="2" placeholder="Breve descrição da política" class="input">${n(r(l).descricao)}</textarea></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2"> Categoria </label><select class="input"><option value=""${v(Array.isArray(r(l).categoria)?m(r(l).categoria,""):b(r(l).categoria,""))?" selected":""}>Selecione...</option><option value="privacidade"${v(Array.isArray(r(l).categoria)?m(r(l).categoria,"privacidade"):b(r(l).categoria,"privacidade"))?" selected":""}>Privacidade</option><option value="seguranca"${v(Array.isArray(r(l).categoria)?m(r(l).categoria,"seguranca"):b(r(l).categoria,"seguranca"))?" selected":""}>Segurança</option><option value="rh"${v(Array.isArray(r(l).categoria)?m(r(l).categoria,"rh"):b(r(l).categoria,"rh"))?" selected":""}>RH</option><option value="ti"${v(Array.isArray(r(l).categoria)?m(r(l).categoria,"ti"):b(r(l).categoria,"ti"))?" selected":""}>TI</option><option value="financeiro"${v(Array.isArray(r(l).categoria)?m(r(l).categoria,"financeiro"):b(r(l).categoria,"financeiro"))?" selected":""}>Financeiro</option><option value="operacional"${v(Array.isArray(r(l).categoria)?m(r(l).categoria,"operacional"):b(r(l).categoria,"operacional"))?" selected":""}>Operacional</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Versão * </label><input${g("value",r(l).versao)} type="text" required placeholder="1.0" class="input"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2"> Data de Vigência * </label><input${g("value",r(l).data_vigencia)} type="date" required class="input"></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Data de Expiração </label><input${g("value",r(l).data_expiracao)} type="date" class="input"></div></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Conteúdo HTML * </label><textarea rows="10" required placeholder="&lt;h2&gt;Título&lt;/h2&gt;&lt;p&gt;Conteúdo da política...&lt;/p&gt;" class="input font-mono text-sm">${n(r(l).conteudo_html)}</textarea></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Resumo </label><textarea rows="3" placeholder="Resumo executivo da política" class="input">${n(r(l).resumo)}</textarea></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-2"> Status </label><select class="input"><option value="rascunho"${v(Array.isArray(r(l).status)?m(r(l).status,"rascunho"):b(r(l).status,"rascunho"))?" selected":""}>Rascunho</option><option value="em_revisao"${v(Array.isArray(r(l).status)?m(r(l).status,"em_revisao"):b(r(l).status,"em_revisao"))?" selected":""}>Em Revisão</option><option value="aprovado"${v(Array.isArray(r(l).status)?m(r(l).status,"aprovado"):b(r(l).status,"aprovado"))?" selected":""}>Aprovado</option><option value="publicado"${v(Array.isArray(r(l).status)?m(r(l).status,"publicado"):b(r(l).status,"publicado"))?" selected":""}>Publicado</option><option value="arquivado"${v(Array.isArray(r(l).status)?m(r(l).status,"arquivado"):b(r(l).status,"arquivado"))?" selected":""}>Arquivado</option></select></div><div><label class="block text-sm font-medium text-gray-700 mb-2"> Prazo para Aceite (dias) </label><input${g("value",r(l).prazo_aceite_dias)} type="number" min="1" placeholder="30" class="input"></div></div><div class="flex items-center gap-6"><div class="flex items-center"><input${v(Array.isArray(r(l).publicado)?m(r(l).publicado,null):r(l).publicado)?" checked":""} type="checkbox" id="publicado" class="checkbox"><label for="publicado" class="ml-2 text-sm text-gray-700"> Publicado </label></div><div class="flex items-center"><input${v(Array.isArray(r(l).obrigatorio_aceite)?m(r(l).obrigatorio_aceite,null):r(l).obrigatorio_aceite)?" checked":""} type="checkbox" id="obrigatorio" class="checkbox"><label for="obrigatorio" class="ml-2 text-sm text-gray-700"> Obrigatório Aceite </label></div><div class="flex items-center"><input${v(Array.isArray(r(l).aplica_todos_colaboradores)?m(r(l).aplica_todos_colaboradores,null):r(l).aplica_todos_colaboradores)?" checked":""} type="checkbox" id="todos" class="checkbox"><label for="todos" class="ml-2 text-sm text-gray-700"> Aplica a Todos </label></div></div><div class="flex items-center justify-between gap-4 p-6 border-t border-gray-200 bg-gray-50"><button type="button" class="flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">`),a(d(x,{name:"mdi:arrow-left",size:"20"},null,p)),a(` Voltar para Configurações </button><div class="flex gap-3"><button type="button" class="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"> Cancelar </button><button type="submit" class="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"${v(r(o))?" disabled":""}>`),a(d(x,{name:"mdi:content-save",size:"20"},null,p)),a(` ${n(r(o)?"Salvando...":"Salvar")}</button></div></div></form></div></div>`)}}}),y=x.setup;x.setup=(e,t)=>{const a=l();return(a.modules||(a.modules=new Set)).add("components/ModalPolitica.vue"),y?y(e,t):void 0};const A=Object.assign(x,{__name:"ModalPolitica"}),f=e({__name:"politicas",__ssrInlineRender:!0,setup(e){const l=[{id:"politicas",label:"Políticas",icon:"mdi:file-document-multiple"},{id:"aceites",label:"Aceites",icon:"mdi:check-circle"},{id:"incidentes",label:"Incidentes",icon:"mdi:alert"},{id:"auditorias",label:"Auditorias",icon:"mdi:clipboard-check"}],g=t("politicas"),x=t(!1),y=t(null),f=t(""),$=t(""),h=t({totalPoliticas:0,politicasPublicadas:0,politicasRascunho:0,politicasObrigatorias:0,totalAceites:0,aceitesCompletos:0,aceitesPendentes:0,aceitesAtrasados:0,taxaAceite:"0.0",totalIncidentes:0,incidentesAbertos:0,incidentesCriticos:0,totalTreinamentos:0,treinamentosAtivos:0}),_=t([]),P=a(()=>{let e=_.value;return f.value&&(e=e.filter(e=>e.tipo===f.value)),$.value&&(e=e.filter(e=>e.status===$.value)),e});async function carregarPoliticas(){try{_.value=await $fetch("/api/politicas")}catch(e){console.error("Erro ao carregar políticas:",e)}}return o([f,$],()=>{}),(e,t,a,o)=>{const _=i("Icon"),w=A;t(`<div${c(s({class:"container mx-auto px-4 py-8"},o))}><div class="mb-6"><button class="flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm">`),t(d(_,{name:"mdi:arrow-left",size:"20"},null,a)),t(` Voltar para Configurações </button></div><div class="mb-8"><h1 class="text-3xl font-bold text-gray-800 mb-2">Políticas e Compliance</h1><p class="text-gray-600">LGPD, termos de uso, políticas internas e gestão de compliance</p></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"><div class="card"><div class="text-sm text-gray-600 mb-1">Total de Políticas</div><div class="text-2xl font-bold text-gray-800">${n(r(h).totalPoliticas)}</div><div class="text-xs text-gray-500 mt-1">${n(r(h).politicasPublicadas)} publicadas</div></div><div class="card"><div class="text-sm text-gray-600 mb-1">Taxa de Aceite</div><div class="text-2xl font-bold text-green-600">${n(r(h).taxaAceite)}%</div><div class="text-xs text-gray-500 mt-1">${n(r(h).aceitesCompletos)}/${n(r(h).totalAceites)}</div></div><div class="card"><div class="text-sm text-gray-600 mb-1">Aceites Pendentes</div><div class="text-2xl font-bold text-amber-600">${n(r(h).aceitesPendentes)}</div><div class="text-xs text-red-500 mt-1">${n(r(h).aceitesAtrasados)} atrasados</div></div><div class="card"><div class="text-sm text-gray-600 mb-1">Incidentes</div><div class="text-2xl font-bold text-red-600">${n(r(h).totalIncidentes)}</div><div class="text-xs text-gray-500 mt-1">${n(r(h).incidentesAbertos)} abertos</div></div></div><div class="mb-6"><div class="border-b border-gray-200"><nav class="-mb-px flex space-x-8">\x3c!--[--\x3e`),p(l,e=>{t(`<button class="${u(["py-4 px-1 border-b-2 font-medium text-sm transition-colors",r(g)===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}">`),t(d(_,{name:e.icon,class:"inline mr-2"},null,a)),t(` ${n(e.label)}</button>`)}),t("\x3c!--]--\x3e</nav></div></div>"),"politicas"===r(g)?(t('<div class="space-y-6"><div class="flex justify-between items-center mb-4"><div><h2 class="text-xl font-semibold">Políticas e Documentos</h2><p class="text-sm text-gray-600">Gerencie políticas internas e documentos de compliance</p></div><button class="btn-primary">'),t(d(_,{name:"mdi:plus",class:"mr-2"},null,a)),t(` Nova Política </button></div><div class="flex gap-3 mb-4"><select class="input w-48"><option value=""${v(Array.isArray(r(f))?m(r(f),""):b(r(f),""))?" selected":""}>Todos os tipos</option><option value="lgpd"${v(Array.isArray(r(f))?m(r(f),"lgpd"):b(r(f),"lgpd"))?" selected":""}>LGPD</option><option value="termo_uso"${v(Array.isArray(r(f))?m(r(f),"termo_uso"):b(r(f),"termo_uso"))?" selected":""}>Termo de Uso</option><option value="politica_interna"${v(Array.isArray(r(f))?m(r(f),"politica_interna"):b(r(f),"politica_interna"))?" selected":""}>Política Interna</option><option value="codigo_conduta"${v(Array.isArray(r(f))?m(r(f),"codigo_conduta"):b(r(f),"codigo_conduta"))?" selected":""}>Código de Conduta</option><option value="regulamento"${v(Array.isArray(r(f))?m(r(f),"regulamento"):b(r(f),"regulamento"))?" selected":""}>Regulamento</option></select><select class="input w-48"><option value=""${v(Array.isArray(r($))?m(r($),""):b(r($),""))?" selected":""}>Todos os status</option><option value="rascunho"${v(Array.isArray(r($))?m(r($),"rascunho"):b(r($),"rascunho"))?" selected":""}>Rascunho</option><option value="em_revisao"${v(Array.isArray(r($))?m(r($),"em_revisao"):b(r($),"em_revisao"))?" selected":""}>Em Revisão</option><option value="aprovado"${v(Array.isArray(r($))?m(r($),"aprovado"):b(r($),"aprovado"))?" selected":""}>Aprovado</option><option value="publicado"${v(Array.isArray(r($))?m(r($),"publicado"):b(r($),"publicado"))?" selected":""}>Publicado</option><option value="arquivado"${v(Array.isArray(r($))?m(r($),"arquivado"):b(r($),"arquivado"))?" selected":""}>Arquivado</option></select></div><div class="grid grid-cols-1 gap-4">\x3c!--[--\x3e`),p(r(P),e=>{var o,i;t(`<div class="card hover:shadow-lg transition-shadow"><div class="flex justify-between items-start"><div class="flex-1"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold">${n(e.titulo)}</h3><span class="${u(["px-2 py-1 text-xs rounded",e.publicado?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])}">${n(e.publicado?"Publicado":e.status)}</span>`),e.obrigatorio_aceite?t('<span class="px-2 py-1 text-xs bg-red-100 text-red-700 rounded"> Obrigatório </span>'):t("\x3c!----\x3e"),t(`</div><p class="text-sm text-gray-600 mb-2">${n(e.descricao)}</p><div class="flex items-center gap-4 text-xs text-gray-500"><span>`),t(d(_,{name:"mdi:tag",class:"inline"},null,a)),t(` ${n((o=e.tipo,{lgpd:"LGPD",termo_uso:"Termo de Uso",politica_interna:"Política Interna",codigo_conduta:"Código de Conduta",regulamento:"Regulamento",outro:"Outro"}[o]||o))}</span>`),e.categoria?(t("<span>"),t(d(_,{name:"mdi:folder",class:"inline"},null,a)),t(` ${n(e.categoria)}</span>`)):t("\x3c!----\x3e"),t("<span>"),t(d(_,{name:"mdi:calendar",class:"inline"},null,a)),t(` Vigência: ${n((i=e.data_vigencia,new Date(i).toLocaleDateString("pt-BR")))}</span><span>`),t(d(_,{name:"mdi:file-document",class:"inline"},null,a)),t(` v${n(e.versao)}</span></div></div><div class="flex gap-2"><button class="btn-icon" title="Editar">`),t(d(_,{name:"mdi:pencil"},null,a)),t('</button><button class="btn-icon text-red-600 hover:bg-red-50" title="Excluir">'),t(d(_,{name:"mdi:delete"},null,a)),t("</button></div></div></div>")}),t("\x3c!--]--\x3e</div></div>")):t("\x3c!----\x3e"),r(x)?t(d(w,{politica:r(y),onClose:e=>x.value=!1,onSaved:carregarPoliticas},null,a)):t("\x3c!----\x3e"),t("</div>")}}}),$=f.setup;f.setup=(e,t)=>{const a=l();return(a.modules||(a.modules=new Set)).add("pages/configuracoes/politicas.vue"),$?$(e,t):void 0};export{f as default};
