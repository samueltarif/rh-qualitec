import{_ as e}from"./server.mjs";import{_ as a}from"./UserProfileDropdown-D7V90wtd.mjs";import{defineComponent as t,ref as s,watch as r,resolveComponent as o,mergeProps as i,withCtx as n,createVNode as c,unref as l,useSSRContext as d}from"vue";import{ssrRenderAttrs as u,ssrRenderComponent as p,ssrIncludeBooleanAttr as m,ssrInterpolate as b,ssrRenderClass as v}from"vue/server-renderer";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"pinia";import"vue-router";import"@supabase/ssr";import"./UIButton-BfdUCxqX.mjs";const g=t({__name:"seguranca",__ssrInlineRender:!0,setup(t){const d=s("backup");s(!1);const g=s(!1),x=s({backups:{total:0,sucesso:0,erro:0,ultimo:null},sessoes:{ativas:0,total:0},logs:{total:0,sucessos:0,erros:0,logins:0},auditoria:{total:0,creates:0,updates:0,deletes:0},tentativas_login:{total:0,sucesso:0,falhas:0}});s({backup_automatico:!0,frequencia:"diario",horario_backup:"02:00:00",dia_semana:1,dia_mes:1,manter_backups_dias:30,manter_backups_quantidade:10,incluir_colaboradores:!0,incluir_documentos:!0,incluir_folha:!0,incluir_ponto:!0,incluir_ferias:!0,incluir_configuracoes:!0,notificar_backup_sucesso:!1,notificar_backup_erro:!0,emails_notificacao:[],criptografar_backup:!0}),s({senha_minimo_caracteres:8,senha_requer_maiuscula:!0,senha_requer_minuscula:!0,senha_requer_numero:!0,senha_requer_especial:!0,senha_expira_dias:90,senha_historico:5,max_tentativas_login:5,bloqueio_temporario_minutos:30,sessao_expira_horas:8,logout_automatico_inatividade:!0,inatividade_minutos:30,requer_2fa:!1,permitir_multiplas_sessoes:!0,registrar_todos_acessos:!0,registrar_mudancas_dados:!0,manter_logs_dias:90,termo_uso_obrigatorio:!0}),s([]);const h=s([]),_=s([]);return r(d,e=>{"logs"===e&&(async()=>{try{const e=await $fetch("/api/seguranca/logs-acesso",{params:{limit:100}});h.value=e}catch(e){console.error("Erro ao carregar logs:",e),h.value=[]}})(),"auditoria"===e&&(async()=>{try{const e=await $fetch("/api/seguranca/auditoria",{params:{limit:100}});_.value=e}catch(e){console.error("Erro ao carregar auditorias:",e),_.value=[]}})()}),(t,s,r,h)=>{const _=e,f=o("Icon"),y=a;s(`<div${u(i({class:"min-h-screen bg-gray-50"},h))}><header class="bg-white border-b border-gray-200 sticky top-0 z-40"><div class="max-w-7xl mx-auto px-8 py-4"><div class="flex items-center justify-between"><div class="flex items-center gap-4">`),s(p(_,{to:"/configuracoes",class:"w-10 h-10 bg-red-700 rounded-lg flex items-center justify-center hover:bg-red-800 transition-colors"},{default:n((e,a,t,s)=>{if(!a)return[c(f,{name:"heroicons:arrow-left",class:"text-white",size:"20"})];a(p(f,{name:"heroicons:arrow-left",class:"text-white",size:"20"},null,t,s))}),_:1},r)),s(`<div><h1 class="text-xl font-bold text-gray-800">Backup e Segurança</h1><p class="text-sm text-gray-500">Backups automáticos, logs de acesso e auditoria</p></div></div><div class="flex items-center gap-3"><button${m(l(g))?" disabled":""} class="btn-secondary">`),s(p(f,{name:l(g)?"heroicons:arrow-path":"heroicons:arrow-down-tray",class:[{"animate-spin":l(g)},"mr-2"]},null,r)),s(" Backup Manual </button>"),s(p(y,{theme:"admin"},null,r)),s('</div></div></div></header><div class="max-w-7xl mx-auto p-8"><div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"><div class="card bg-gradient-to-br from-blue-500 to-blue-600 text-white"><div class="flex items-center gap-3">'),s(p(f,{name:"heroicons:server",size:"32",class:"opacity-80"},null,r)),s(`<div><p class="text-2xl font-bold">${b(l(x).backups.total)}</p><p class="text-sm opacity-80">Backups</p></div></div></div><div class="card bg-gradient-to-br from-green-500 to-green-600 text-white"><div class="flex items-center gap-3">`),s(p(f,{name:"heroicons:user-group",size:"32",class:"opacity-80"},null,r)),s(`<div><p class="text-2xl font-bold">${b(l(x).sessoes.ativas)}</p><p class="text-sm opacity-80">Sessões Ativas</p></div></div></div><div class="card bg-gradient-to-br from-purple-500 to-purple-600 text-white"><div class="flex items-center gap-3">`),s(p(f,{name:"heroicons:document-text",size:"32",class:"opacity-80"},null,r)),s(`<div><p class="text-2xl font-bold">${b(l(x).logs.total)}</p><p class="text-sm opacity-80">Logs (30d)</p></div></div></div><div class="card bg-gradient-to-br from-amber-500 to-amber-600 text-white"><div class="flex items-center gap-3">`),s(p(f,{name:"heroicons:shield-check",size:"32",class:"opacity-80"},null,r)),s(`<div><p class="text-2xl font-bold">${b(l(x).auditoria.total)}</p><p class="text-sm opacity-80">Auditorias (30d)</p></div></div></div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6"><div class="flex border-b border-gray-200 overflow-x-auto"><button class="${v(["backup"===l(d)?"text-red-700 border-b-2 border-red-700":"text-gray-500 hover:text-gray-700","px-6 py-3 font-medium transition-colors whitespace-nowrap"])}">`),s(p(f,{name:"heroicons:server",class:"inline mr-2"},null,r)),s(` Backup </button><button class="${v(["politicas"===l(d)?"text-red-700 border-b-2 border-red-700":"text-gray-500 hover:text-gray-700","px-6 py-3 font-medium transition-colors whitespace-nowrap"])}">`),s(p(f,{name:"heroicons:shield-check",class:"inline mr-2"},null,r)),s(` Políticas de Segurança </button><button class="${v(["logs"===l(d)?"text-red-700 border-b-2 border-red-700":"text-gray-500 hover:text-gray-700","px-6 py-3 font-medium transition-colors whitespace-nowrap"])}">`),s(p(f,{name:"heroicons:document-text",class:"inline mr-2"},null,r)),s(` Logs de Acesso </button><button class="${v(["auditoria"===l(d)?"text-red-700 border-b-2 border-red-700":"text-gray-500 hover:text-gray-700","px-6 py-3 font-medium transition-colors whitespace-nowrap"])}">`),s(p(f,{name:"heroicons:clipboard-document-list",class:"inline mr-2"},null,r)),s(' Auditoria </button></div></div><div class="text-center py-12 text-gray-500"> Selecione uma aba acima </div></div></div>')}}}),x=g.setup;g.setup=(e,a)=>{const t=d();return(t.modules||(t.modules=new Set)).add("pages/configuracoes/seguranca.vue"),x?x(e,a):void 0};export{g as default};
