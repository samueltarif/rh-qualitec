import{_ as e}from"./UIModal-PwEumyFL.mjs";import{_ as a}from"./UIButton-BfdUCxqX.mjs";import{ref as l,defineComponent as s,computed as t,resolveComponent as r,mergeProps as o,unref as i,isRef as n,withCtx as c,createTextVNode as d,createBlock as u,createCommentVNode as m,openBlock as x,toDisplayString as p,createVNode as f,useSSRContext as v}from"vue";import{ssrRenderComponent as h,ssrInterpolate as g}from"vue/server-renderer";const y=s({__name:"ModalConfirmarExclusao",__ssrInlineRender:!0,props:{show:{type:Boolean},holerite:{},loading:{type:Boolean}},emits:["close","confirmar"],setup(l,{emit:s}){const v=l,y=s,b=t({get:()=>v.show,set:e=>{e||y("close")}}),nomeMes=e=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][e-1],formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);return(s,t,v,$)=>{const w=e,E=r("Icon"),_=a;t(h(w,o({modelValue:i(b),"onUpdate:modelValue":e=>n(b)?b.value=e:null,size:"md"},$),{default:c((e,a,s,t)=>{if(!a)return[f("div",{class:"p-6"},[f("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[f(E,{name:"heroicons:exclamation-triangle",class:"text-red-600",size:"32"})]),f("h3",{class:"text-xl font-bold text-gray-800 text-center mb-2"}," Confirmar Exclusão "),f("p",{class:"text-gray-600 text-center mb-6"}," Tem certeza que deseja excluir este holerite? Esta ação não pode ser desfeita. "),l.holerite?(x(),u("div",{key:0,class:"bg-gray-50 rounded-lg p-4 mb-6"},[f("div",{class:"space-y-2"},[f("div",{class:"flex justify-between"},[f("span",{class:"text-sm text-gray-600"},"Colaborador:"),f("span",{class:"text-sm font-semibold text-gray-800"},p(l.holerite.nome_colaborador),1)]),f("div",{class:"flex justify-between"},[f("span",{class:"text-sm text-gray-600"},"Período:"),f("span",{class:"text-sm font-semibold text-gray-800"},p(nomeMes(l.holerite.mes))+"/"+p(l.holerite.ano),1)]),f("div",{class:"flex justify-between"},[f("span",{class:"text-sm text-gray-600"},"Valor:"),f("span",{class:"text-sm font-semibold text-green-600"},p(formatCurrency(l.holerite.salario_liquido)),1)]),"decimo_terceiro"===l.holerite.tipo?(x(),u("div",{key:0,class:"flex justify-between"},[f("span",{class:"text-sm text-gray-600"},"Tipo:"),f("span",{class:"text-sm font-semibold text-purple-600"},"13º Salário - "+p(l.holerite.parcela_13)+"ª Parcela",1)])):m("",!0)])])):m("",!0),f("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},[f("div",{class:"flex gap-3"},[f(E,{name:"heroicons:information-circle",class:"text-yellow-600 flex-shrink-0",size:"20"}),f("div",{class:"text-sm text-yellow-800"},[f("p",{class:"font-semibold mb-1"},"Atenção:"),f("ul",{class:"list-disc list-inside space-y-1"},[f("li",null,"O holerite será permanentemente excluído"),f("li",null,"Você precisará gerar novamente se necessário"),f("li",null,"Esta ação será registrada no log")])])])]),f("div",{class:"flex gap-3"},[f(_,{variant:"secondary",onClick:e=>b.value=!1,class:"flex-1"},{default:c(()=>[d(" Cancelar ")]),_:1},8,["onClick"]),f(_,{variant:"danger",onClick:e=>y("confirmar"),disabled:l.loading,class:"flex-1"},{default:c(()=>[l.loading?(x(),u(E,{key:0,name:"heroicons:arrow-path",class:"animate-spin mr-2",size:"16"})):m("",!0),d(" "+p(l.loading?"Excluindo...":"Excluir"),1)]),_:1},8,["onClick","disabled"])])])];a(`<div class="p-6"${t}><div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"${t}>`),a(h(E,{name:"heroicons:exclamation-triangle",class:"text-red-600",size:"32"},null,s,t)),a(`</div><h3 class="text-xl font-bold text-gray-800 text-center mb-2"${t}> Confirmar Exclusão </h3><p class="text-gray-600 text-center mb-6"${t}> Tem certeza que deseja excluir este holerite? Esta ação não pode ser desfeita. </p>`),l.holerite?(a(`<div class="bg-gray-50 rounded-lg p-4 mb-6"${t}><div class="space-y-2"${t}><div class="flex justify-between"${t}><span class="text-sm text-gray-600"${t}>Colaborador:</span><span class="text-sm font-semibold text-gray-800"${t}>${g(l.holerite.nome_colaborador)}</span></div><div class="flex justify-between"${t}><span class="text-sm text-gray-600"${t}>Período:</span><span class="text-sm font-semibold text-gray-800"${t}>${g(nomeMes(l.holerite.mes))}/${g(l.holerite.ano)}</span></div><div class="flex justify-between"${t}><span class="text-sm text-gray-600"${t}>Valor:</span><span class="text-sm font-semibold text-green-600"${t}>${g(formatCurrency(l.holerite.salario_liquido))}</span></div>`),"decimo_terceiro"===l.holerite.tipo?a(`<div class="flex justify-between"${t}><span class="text-sm text-gray-600"${t}>Tipo:</span><span class="text-sm font-semibold text-purple-600"${t}>13º Salário - ${g(l.holerite.parcela_13)}ª Parcela</span></div>`):a("\x3c!----\x3e"),a("</div></div>")):a("\x3c!----\x3e"),a(`<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"${t}><div class="flex gap-3"${t}>`),a(h(E,{name:"heroicons:information-circle",class:"text-yellow-600 flex-shrink-0",size:"20"},null,s,t)),a(`<div class="text-sm text-yellow-800"${t}><p class="font-semibold mb-1"${t}>Atenção:</p><ul class="list-disc list-inside space-y-1"${t}><li${t}>O holerite será permanentemente excluído</li><li${t}>Você precisará gerar novamente se necessário</li><li${t}>Esta ação será registrada no log</li></ul></div></div></div><div class="flex gap-3"${t}>`),a(h(_,{variant:"secondary",onClick:e=>b.value=!1,class:"flex-1"},{default:c((e,a,l,s)=>{if(!a)return[d(" Cancelar ")];a(" Cancelar ")}),_:1},s,t)),a(h(_,{variant:"danger",onClick:e=>y("confirmar"),disabled:l.loading,class:"flex-1"},{default:c((e,a,s,t)=>{if(!a)return[l.loading?(x(),u(E,{key:0,name:"heroicons:arrow-path",class:"animate-spin mr-2",size:"16"})):m("",!0),d(" "+p(l.loading?"Excluindo...":"Excluir"),1)];l.loading?a(h(E,{name:"heroicons:arrow-path",class:"animate-spin mr-2",size:"16"},null,s,t)):a("\x3c!----\x3e"),a(` ${g(l.loading?"Excluindo...":"Excluir")}`)}),_:1},s,t)),a("</div></div>")}),_:1},v))}}}),b=y.setup;y.setup=(e,a)=>{const l=v();return(l.modules||(l.modules=new Set)).add("components/ModalConfirmarExclusao.vue"),b?b(e,a):void 0};const $=Object.assign(y,{__name:"ModalConfirmarExclusao"}),useHolerites=()=>{const e=l(!1),a=l([]),s=l(null);return{loading:e,holerites:a,error:s,buscarHolerites:async l=>{e.value=!0,s.value=null;try{let e="/api/holerites";const s=new URLSearchParams;l?.colaborador_id&&s.append("colaborador_id",l.colaborador_id),l?.mes&&s.append("mes",l.mes.toString()),l?.ano&&s.append("ano",l.ano.toString()),l?.tipo&&s.append("tipo",l.tipo),l?.status&&s.append("status",l.status),s.toString()&&(e+=`?${s.toString()}`);const t=await $fetch(e);return a.value=t.data||t||[],t.data||t}catch(e){throw s.value=e.message||"Erro ao buscar holerites",e}finally{e.value=!1}},buscarHoleritePorId:async a=>{e.value=!0,s.value=null;try{return await $fetch(`/api/holerites/${a}`)}catch(e){throw s.value=e.message||"Erro ao buscar holerite",e}finally{e.value=!1}},excluirHolerite:async l=>{e.value=!0,s.value=null;try{const e=await $fetch(`/api/holerites/${l}`,{method:"DELETE"});return a.value=a.value.filter(e=>e.id!==l),e}catch(e){throw s.value=e.message||"Erro ao excluir holerite",e}finally{e.value=!1}},gerarHolerites:async a=>{e.value=!0,s.value=null;try{return await $fetch("/api/holerites/gerar",{method:"POST",body:a})}catch(e){throw s.value=e.message||"Erro ao gerar holerites",e}finally{e.value=!1}},enviarHoleritePorEmail:async a=>{e.value=!0,s.value=null;try{return await $fetch("/api/holerites/enviar-email",{method:"POST",body:{holerite_id:a}})}catch(e){throw s.value=e.message||"Erro ao enviar holerite",e}finally{e.value=!1}},gerar13Salario:async a=>{e.value=!0,s.value=null;try{return await $fetch("/api/decimo-terceiro/gerar",{method:"POST",body:a})}catch(e){throw s.value=e.message||"Erro ao gerar 13º salário",e}finally{e.value=!1}}}};export{$ as _,useHolerites as u};
