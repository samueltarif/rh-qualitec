import{i as r}from"../_/nitro.mjs";import{k as e,l as t,u as o,n as i,b as n}from"./server.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"vue/server-renderer";import"unhead/server";import"devalue";import"pinia";import"vue-router";import"@supabase/ssr";const s=e(async(e,s)=>{let a,u;const p=t(),{currentUser:m,initAuth:d,isAuthenticated:v}=o();if(!p.value)return i("/login");if(m.value||([a,u]=r(()=>d()),await a,u()),!m.value)return i("/login");if(!m.value.ativo){console.warn("Acesso negado: usuÃ¡rio inativo");const e=n();return[a,u]=r(()=>e.auth.signOut()),await a,u(),i("/login")}return v.value?void 0:i("/login")});export{s as default};
