import{defineComponent as e,ref as s,computed as a,resolveComponent as t,mergeProps as o,unref as r,useSSRContext as i}from"vue";import{ssrRenderAttrs as l,ssrRenderComponent as d,ssrInterpolate as n,ssrIncludeBooleanAttr as c,ssrLooseContain as u,ssrLooseEqual as m,ssrRenderList as x,ssrRenderAttr as v}from"vue/server-renderer";const p=e({__name:"ModalVisualizarAssinatura",__ssrInlineRender:!0,props:{assinatura:{}},emits:["close"],setup(e,{emit:a}){const i=s(!1),u=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],formatarDataHora=e=>new Date(e).toLocaleString("pt-BR");return(s,a,m,x)=>{const p=t("Icon");var g,b;a(`<div${l(o({class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},x))}><div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"><div class="flex items-center justify-between p-6 border-b"><div><h3 class="text-lg font-semibold text-gray-900"> Assinatura Digital de Ponto </h3><p class="text-sm text-gray-600 mt-1">${n(e.assinatura.colaborador?.nome)} - ${n((g=e.assinatura.mes,b=e.assinatura.ano,`${u[g-1]||g}/${b}`))}</p></div><button class="text-gray-400 hover:text-gray-600 transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class="p-6"><div class="bg-gray-50 rounded-lg p-4 mb-6"><h4 class="font-medium text-gray-900 mb-3">Informações do Funcionário</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"><div><span class="text-gray-600">Nome:</span><span class="font-medium ml-2">${n(e.assinatura.colaborador?.nome)}</span></div><div><span class="text-gray-600">Email:</span><span class="font-medium ml-2">${n(e.assinatura.colaborador?.email)}</span></div><div><span class="text-gray-600">Cargo:</span><span class="font-medium ml-2">${n(e.assinatura.colaborador?.cargo||"N/A")}</span></div><div><span class="text-gray-600">Departamento:</span><span class="font-medium ml-2">${n(e.assinatura.colaborador?.departamento||"N/A")}</span></div></div></div><div class="bg-blue-50 rounded-lg p-4 mb-6"><h4 class="font-medium text-blue-900 mb-3">Resumo do Período</h4><div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"><div class="text-center"><div class="text-2xl font-bold text-blue-600">${n(e.assinatura.total_dias)}</div><div class="text-blue-700">Dias Trabalhados</div></div><div class="text-center"><div class="text-2xl font-bold text-blue-600">${n(e.assinatura.total_horas)}</div><div class="text-blue-700">Total de Horas</div></div><div class="text-center"><div class="text-lg font-medium text-blue-600">${n(formatarDataHora(e.assinatura.data_assinatura))}</div><div class="text-blue-700">Data da Assinatura</div></div><div class="text-center"><div class="text-lg font-medium text-blue-600">${n(e.assinatura.ip_assinatura||"N/A")}</div><div class="text-blue-700">IP de Origem</div></div></div></div><div class="mb-6"><h4 class="font-medium text-gray-900 mb-3">Assinatura Digital</h4><div class="border-2 border-gray-200 rounded-lg p-4 bg-white">`),e.assinatura.assinatura_digital?a(`<img${v("src",e.assinatura.assinatura_digital)} alt="Assinatura Digital" class="max-w-full h-auto border rounded">`):(a('<div class="text-center py-8 text-gray-500">'),a(d(p,{name:"heroicons:document-text",size:"48",class:"mx-auto mb-2"},null,m)),a("<p>Assinatura não disponível</p></div>")),a("</div></div>"),e.assinatura.observacoes?a(`<div class="mb-6"><h4 class="font-medium text-gray-900 mb-3">Observações</h4><div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><p class="text-sm text-gray-700">${n(e.assinatura.observacoes)}</p></div></div>`):a("\x3c!----\x3e"),a(`<div class="bg-gray-50 rounded-lg p-4"><h4 class="font-medium text-gray-900 mb-3">Informações Técnicas</h4><div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"><div><span class="text-gray-600">ID da Assinatura:</span><span class="font-mono text-xs ml-2 break-all">${n(e.assinatura.id)}</span></div><div><span class="text-gray-600">Criado em:</span><span class="font-medium ml-2">${n(formatarDataHora(e.assinatura.created_at))}</span></div><div><span class="text-gray-600">Atualizado em:</span><span class="font-medium ml-2">${n(formatarDataHora(e.assinatura.updated_at))}</span></div></div></div></div><div class="flex items-center justify-end gap-3 p-6 border-t bg-gray-50"><button class="px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"${c(r(i))?" disabled":""}>`),a(d(p,{name:"heroicons:arrow-down-tray",size:"16",class:"mr-2"},null,m)),a(` ${n(r(i)?"Baixando...":"Baixar CSV")}</button><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"> Fechar </button></div></div></div>`)}}}),g=p.setup;p.setup=(e,s)=>{const a=i();return(a.modules||(a.modules=new Set)).add("components/ModalVisualizarAssinatura.vue"),g?g(e,s):void 0};const b=Object.assign(p,{__name:"ModalVisualizarAssinatura"}),y=e({__name:"assinaturas-ponto",__ssrInlineRender:!0,setup(e){const i=s(!1),p=s([]),g=s([]),y=s(null),h=s({total:0,esteMes:0,ultimos7Dias:0,colaboradoresUnicos:0}),f=s({mes:"",ano:"",colaborador_id:""}),w=[{value:1,label:"Janeiro"},{value:2,label:"Fevereiro"},{value:3,label:"Março"},{value:4,label:"Abril"},{value:5,label:"Maio"},{value:6,label:"Junho"},{value:7,label:"Julho"},{value:8,label:"Agosto"},{value:9,label:"Setembro"},{value:10,label:"Outubro"},{value:11,label:"Novembro"},{value:12,label:"Dezembro"}],$=a(()=>{const e=(new Date).getFullYear();return[e-2,e-1,e,e+1]});return(e,s,a,A)=>{const _=t("Icon"),z=b;s(`<div${l(o({class:"p-6"},A))}><div class="flex items-center justify-between mb-6"><div><h1 class="text-2xl font-bold text-gray-900">Gerenciar Assinaturas de Ponto</h1><p class="text-gray-600 mt-1">Visualize, gerencie e exporte as assinaturas digitais de ponto dos funcionários</p></div><div class="flex gap-3"><button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2">`),s(d(_,{name:"heroicons:document-arrow-down",size:"16"},null,a)),s(' Exportar CSV </button><button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center gap-2">'),s(d(_,{name:"heroicons:arrow-path",size:"16"},null,a)),s(' Renovar Automático </button></div></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"><div class="bg-white rounded-lg shadow-sm border p-4"><div class="flex items-center"><div class="p-2 bg-blue-100 rounded-lg">'),s(d(_,{name:"heroicons:document-text",class:"w-6 h-6 text-blue-600"},null,a)),s(`</div><div class="ml-3"><p class="text-sm font-medium text-gray-600">Total Assinaturas</p><p class="text-2xl font-bold text-gray-900">${n(r(h).total)}</p></div></div></div><div class="bg-white rounded-lg shadow-sm border p-4"><div class="flex items-center"><div class="p-2 bg-green-100 rounded-lg">`),s(d(_,{name:"heroicons:calendar-days",class:"w-6 h-6 text-green-600"},null,a)),s(`</div><div class="ml-3"><p class="text-sm font-medium text-gray-600">Este Mês</p><p class="text-2xl font-bold text-gray-900">${n(r(h).esteMes)}</p></div></div></div><div class="bg-white rounded-lg shadow-sm border p-4"><div class="flex items-center"><div class="p-2 bg-yellow-100 rounded-lg">`),s(d(_,{name:"heroicons:clock",class:"w-6 h-6 text-yellow-600"},null,a)),s(`</div><div class="ml-3"><p class="text-sm font-medium text-gray-600">Últimos 7 dias</p><p class="text-2xl font-bold text-gray-900">${n(r(h).ultimos7Dias)}</p></div></div></div><div class="bg-white rounded-lg shadow-sm border p-4"><div class="flex items-center"><div class="p-2 bg-purple-100 rounded-lg">`),s(d(_,{name:"heroicons:users",class:"w-6 h-6 text-purple-600"},null,a)),s(`</div><div class="ml-3"><p class="text-sm font-medium text-gray-600">Colaboradores</p><p class="text-2xl font-bold text-gray-900">${n(r(h).colaboradoresUnicos)}</p></div></div></div></div><div class="bg-white rounded-lg shadow-sm border p-4 mb-6"><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Mês</label><select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${c(Array.isArray(r(f).mes)?u(r(f).mes,""):m(r(f).mes,""))?" selected":""}>Todos os meses</option>\x3c!--[--\x3e`),x(w,e=>{s(`<option${v("value",e.value)}${c(Array.isArray(r(f).mes)?u(r(f).mes,e.value):m(r(f).mes,e.value))?" selected":""}>${n(e.label)}</option>`)}),s(`\x3c!--]--\x3e</select></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Ano</label><select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${c(Array.isArray(r(f).ano)?u(r(f).ano,""):m(r(f).ano,""))?" selected":""}>Todos os anos</option>\x3c!--[--\x3e`),x(r($),e=>{s(`<option${v("value",e)}${c(Array.isArray(r(f).ano)?u(r(f).ano,e):m(r(f).ano,e))?" selected":""}>${n(e)}</option>`)}),s(`\x3c!--]--\x3e</select></div><div><label class="block text-sm font-medium text-gray-700 mb-1">Funcionário</label><select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${c(Array.isArray(r(f).colaborador_id)?u(r(f).colaborador_id,""):m(r(f).colaborador_id,""))?" selected":""}>Todos os funcionários</option>\x3c!--[--\x3e`),x(r(g),e=>{s(`<option${v("value",e.id)}${c(Array.isArray(r(f).colaborador_id)?u(r(f).colaborador_id,e.id):m(r(f).colaborador_id,e.id))?" selected":""}>${n(e.nome)}</option>`)}),s(`\x3c!--]--\x3e</select></div><div class="flex items-end"><button class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"${c(r(i))?" disabled":""}>`),s(d(_,{name:"heroicons:magnifying-glass",size:"16",class:"mr-2"},null,a)),s(" Buscar </button></div></div></div>"),r(i)?(s('<div class="text-center py-12">'),s(d(_,{name:"heroicons:arrow-path",class:"animate-spin text-gray-400 mx-auto",size:"40"},null,a)),s('<p class="text-gray-500 mt-2">Carregando assinaturas...</p></div>')):r(p).length>0?(s('<div class="bg-white rounded-lg shadow-sm border overflow-hidden"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Funcionário </th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Período </th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Data da Assinatura </th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Resumo </th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> IP </th><th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"> Ações </th></tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e'),x(r(p),e=>{var t,o,r;s(`<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"><span class="text-sm font-medium text-blue-600">${n(e.colaborador?.nome?.charAt(0))}</span></div></div><div class="ml-4"><div class="text-sm font-medium text-gray-900">${n(e.colaborador?.nome)}</div><div class="text-sm text-gray-500">${n(e.colaborador?.email)}</div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${n((o=e.mes,r=e.ano,`${w.find(e=>e.value===o)?.label||o}/${r}`))}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${n((t=e.data_assinatura,new Date(t).toLocaleString("pt-BR")))}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${n(e.total_dias)} dias </div><div class="text-sm text-gray-500">${n(e.total_horas)}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-500">${n(e.ip_assinatura||"N/A")}</div></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><div class="flex items-center justify-end gap-2"><button class="text-blue-600 hover:text-blue-900 p-1 rounded" title="Visualizar assinatura">`),s(d(_,{name:"heroicons:eye",size:"16"},null,a)),s('</button><button class="text-red-600 hover:text-red-900 p-1 rounded" title="Baixar PDF">'),s(d(_,{name:"heroicons:document-arrow-down",size:"16"},null,a)),s('</button><button class="text-green-600 hover:text-green-900 p-1 rounded" title="Baixar CSV">'),s(d(_,{name:"heroicons:arrow-down-tray",size:"16"},null,a)),s('</button><button class="text-yellow-600 hover:text-yellow-900 p-1 rounded" title="Zerar assinatura">'),s(d(_,{name:"heroicons:arrow-path",size:"16"},null,a)),s('</button><button class="text-red-600 hover:text-red-900 p-1 rounded" title="Excluir assinatura">'),s(d(_,{name:"heroicons:trash",size:"16"},null,a)),s("</button></div></td></tr>")}),s("\x3c!--]--\x3e</tbody></table></div></div>")):(s('<div class="text-center py-12">'),s(d(_,{name:"heroicons:document-text",class:"text-gray-300 mx-auto",size:"48"},null,a)),s('<p class="text-gray-500 mt-2">Nenhuma assinatura encontrada</p><p class="text-gray-400 text-sm mt-1">As assinaturas aparecerão aqui quando os funcionários assinarem seus pontos</p></div>')),r(y)?s(d(z,{assinatura:r(y),onClose:e=>y.value=null},null,a)):s("\x3c!----\x3e"),s("</div>")}}}),h=y.setup;y.setup=(e,s)=>{const a=i();return(a.modules||(a.modules=new Set)).add("pages/admin/assinaturas-ponto.vue"),h?h(e,s):void 0};export{y as default};
