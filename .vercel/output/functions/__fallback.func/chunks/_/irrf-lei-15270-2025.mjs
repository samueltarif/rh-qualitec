const a={tabela:{faixas:[{limite:2259.2,aliquota:0,deducao:0},{limite:2826.65,aliquota:.075,deducao:169.44},{limite:3751.05,aliquota:.15,deducao:381.44},{limite:4664.68,aliquota:.225,deducao:662.77},{limite:1/0,aliquota:.275,deducao:896}],deducaoPorDependente:189.59},lei15270:{vigenciaInicio:new Date("2026-01-01"),limiteIsencaoTotal:5e3,limiteFaixaTransicao:7350,redutorMaximo:312.89,coeficienteReducao:.133145,constanteReducao:978.62}};function calcularIRRF(e,i,o=0,t,l){const d=a,c=[];e<0&&(e=0),i<0&&(i=0),o<0&&(o=0);const n=null!=t?t:e,r=o*d.tabela.deducaoPorDependente,u=Math.max(0,e-i-r);let s="Isento",m=0,F=0,x=0;for(const a of d.tabela.faixas)if(u<=a.limite){m=a.aliquota,F=a.deducao,0===m?(s=`Isento (até R$ ${a.limite.toFixed(2)})`,x=0):(s=`${(100*m).toFixed(1)}% (até R$ ${a.limite.toFixed(2)})`,x=u*m-F);break}x=Math.max(0,x);const R=new Date>=d.lei15270.vigenciaInicio;let p=0,$=0,I=!1;R&&x>0?(I=!0,n<=d.lei15270.limiteIsencaoTotal?(p=d.lei15270.redutorMaximo,c.push(`Rendimentos (R$ ${n.toFixed(2)}) ≤ R$ ${d.lei15270.limiteIsencaoTotal.toFixed(2)}: Redutor máximo aplicado`)):n<=d.lei15270.limiteFaixaTransicao?(p=d.lei15270.constanteReducao-d.lei15270.coeficienteReducao*n,p=Math.max(0,p),c.push(`Rendimentos (R$ ${n.toFixed(2)}) na faixa de transição: Redutor parcial calculado`)):(p=0,c.push(`Rendimentos (R$ ${n.toFixed(2)}) > R$ ${d.lei15270.limiteFaixaTransicao.toFixed(2)}: Sem redutor`)),$=Math.min(x,p)):R||c.push(`Lei 15.270/2025 ainda não em vigor (vigência: ${d.lei15270.vigenciaInicio.toLocaleDateString("pt-BR")})`);const f=Math.max(0,x-$),h=parseFloat(f.toFixed(2));return x>0&&0===f?c.push("IRRF zerado pelo redutor da Lei 15.270/2025"):$>0&&c.push(`Redutor aplicado: R$ ${$.toFixed(2)} (economia de ${($/x*100).toFixed(1)}%)`),{valor:h,detalhes:{salarioBruto:e,inss:i,dependentes:o,deducaoDependentes:parseFloat(r.toFixed(2)),baseCalculo:parseFloat(u.toFixed(2)),rendimentosTributaveis:n,faixaAplicada:s,aliquota:m,parcelaADeduzir:F,irrfTabela:parseFloat(x.toFixed(2)),redutorCalculado:parseFloat(p.toFixed(2)),redutorAplicado:parseFloat($.toFixed(2)),irrfFinal:h,lei15270Aplicada:I,observacoes:c}}}function calcularIRRFSimples(a,e,i=0,o){return calcularIRRF(a,e,i,o).valor}export{a as I,calcularIRRFSimples as a,calcularIRRF as c};
