function analyzeVercelError(e){const n=(null==e?void 0:e.message)||(null==e?void 0:e.toString())||"Unknown error";return n.includes("timeout")||n.includes("TIMEOUT")?{type:"timeout",message:"Function execution timeout",suggestion:"Reduce processing time or move heavy operations to client-side"}:n.includes("memory")||n.includes("ENOMEM")?{type:"memory",message:"Out of memory error",suggestion:"Optimize data processing and reduce memory usage"}:n.includes("Cannot resolve")||n.includes("MODULE_NOT_FOUND")?{type:"import",message:"Module import error",suggestion:"Check if all dependencies are properly installed and compatible with serverless"}:n.includes("Runtime")||n.includes("FUNCTION_INVOCATION_FAILED")?{type:"runtime",message:"Runtime execution error",suggestion:"Check for Edge Runtime incompatibilities or switch to Node.js runtime"}:{type:"unknown",message:n,suggestion:"Check Vercel function logs for more details"}}async function safeVercelOperation(e,n,o){try{const n=Date.now(),r=await e(),t=Date.now()-n;return t>3e4&&console.warn(`⚠️ Slow operation: ${o} took ${t}ms`),r}catch(e){const r=analyzeVercelError(e);return console.error(`❌ Vercel operation failed: ${o}`),console.error(`Error type: ${r.type}`),console.error(`Message: ${r.message}`),console.error(`Suggestion: ${r.suggestion}`),n}}function isVercelEnvironment(){return!(!process.env.VERCEL&&!process.env.VERCEL_ENV)}function getVercelInfo(){return isVercelEnvironment()?{env:process.env.VERCEL_ENV,region:process.env.VERCEL_REGION,url:process.env.VERCEL_URL,runtime:process.env.AWS_EXECUTION_ENV?"edge":"nodejs"}:null}function logVercelInfo(e,n){const o=getVercelInfo();console.log(`[VERCEL] ${e}`,{timestamp:(new Date).toISOString(),environment:o,data:n})}export{analyzeVercelError,getVercelInfo,isVercelEnvironment,logVercelInfo,safeVercelOperation};
