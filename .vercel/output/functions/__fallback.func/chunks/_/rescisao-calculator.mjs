import{a}from"./irrf-lei-15270-2025.mjs";const e=[{ate:1412,aliquota:.075},{ate:2666.68,aliquota:.09},{ate:4000.03,aliquota:.12},{ate:7786.02,aliquota:.14}];function calcularRescisao(o,s){const r=[],i=[],t=[],d=[],c=new Date(o.data_admissao+"T00:00:00"),n=new Date(s.data_desligamento+"T00:00:00"),l=calcularTempoServico(c,n),u=(p=o.salario_base,m=s.dias_trabalhados,p/30*m);var p,m;u>0&&r.push({descricao:`Saldo de SalÃ¡rio (${s.dias_trabalhados} dias)`,valor:u,base_legal:"CLT Art. 462"});const h=function(a,e,o,s){if(["dispensa_com_justa_causa","termino_experiencia","termino_determinado","morte","aposentadoria"].includes(o)||"nao_aplicavel"===s)return{valor:0,desconto:0,descricao:""};const r=Math.min(30+3*e,90),i=a/30*r;if("pedido_demissao"===o&&"trabalhado"!==s)return{valor:0,desconto:i,descricao:""};if("indenizado"===s)return{valor:i,desconto:0,descricao:`Aviso PrÃ©vio Indenizado (${r} dias)`};return{valor:0,desconto:0,descricao:""}}(o.salario_base,l.anos,s.tipo_rescisao,s.aviso_previo);h.valor>0?r.push({descricao:h.descricao,valor:h.valor,base_legal:"Lei 12.506/2011"}):h.desconto>0&&i.push({descricao:"Aviso PrÃ©vio NÃ£o Cumprido",valor:h.desconto,base_legal:"CLT Art. 487 Â§2Âº"});const v=function(a,e,o,s){if("dispensa_com_justa_causa"===s)return 0;const r=o.getFullYear(),i=new Date(r,0,1),t=e>i?e:i;let d=0;const c=t.getMonth(),n=o.getMonth();d=n-c+1,o.getDate()<15&&d--;return d=Math.max(0,Math.min(12,d)),a/12*d}(o.salario_base,c,n,s.tipo_rescisao);v>0&&r.push({descricao:"13Âº SalÃ¡rio Proporcional",valor:v,base_legal:"Lei 4.090/62"});const _=function(a,e,o,s,r){const i=[];if("dispensa_com_justa_causa"===r)return i;if(s){const e=a,o=a/3;i.push({descricao:"FÃ©rias Vencidas",valor:e,base_legal:"CLT Art. 130"}),i.push({descricao:"FÃ©rias Vencidas - 1/3 Constitucional",valor:o,base_legal:"CF Art. 7Âº XVII"})}const t=calcularTempoServico(e,o);let d=t.meses;t.dias>=15&&d++;if(d>0){const e=a/12*d,o=e/3;i.push({descricao:`FÃ©rias Proporcionais (${d}/12)`,valor:e,base_legal:"CLT Art. 146"}),i.push({descricao:"FÃ©rias Proporcionais - 1/3 Constitucional",valor:o,base_legal:"CF Art. 7Âº XVII"})}return i}(o.salario_base,c,n,s.ferias_vencidas,s.tipo_rescisao);if(_.forEach(a=>r.push(a)),s.media_horas_extras>0){const a=s.media_horas_extras;r.push({descricao:"MÃ©dia de Horas Extras",valor:a,base_legal:"CLT Art. 59"})}if(s.adicionais>0&&r.push({descricao:"Adicionais (Noturno/Insalubridade/Periculosidade)",valor:s.adicionais,base_legal:"CLT Arts. 73, 189, 193"}),s.faltas>0){const a=o.salario_base/30*s.faltas;i.push({descricao:`Faltas Injustificadas (${s.faltas} dias)`,valor:a,base_legal:"CLT Art. 130"})}s.adiantamentos>0&&i.push({descricao:"Adiantamento Salarial",valor:s.adiantamentos,base_legal:"CLT Art. 462"});let g=0,b=0,f=0;r.forEach(a=>{a.descricao.includes("Saldo de SalÃ¡rio")||a.descricao.includes("13Âº SalÃ¡rio")?(g+=a.valor,b+=a.valor):a.descricao.includes("Aviso PrÃ©vio Indenizado")||a.descricao.includes("FÃ©rias")&&!a.descricao.includes("1/3")?(b+=a.valor,f+=a.valor):a.descricao.includes("1/3")?f+=a.valor:a.descricao.includes("Horas Extras")||a.descricao.includes("Adicionais")?(g+=a.valor,b+=a.valor):f+=a.valor});const S=function(a){if(!a||a<=0)return 0;let o=0,s=a,r=0;for(const i of e){if(s<=0)break;const e=i.ate,t=Math.min(s,e-r);if(o+=t*i.aliquota,s-=t,r=e,a<=e)break}return Math.round(100*o)/100}(b);S>0&&(i.push({descricao:"INSS",valor:S,base_legal:"Lei 8.212/91"}),d.push(`Base INSS: R$ ${b.toFixed(2)} (saldo + 13Âº + aviso indenizado + fÃ©rias)`));const T=a(g,S,o.dependentes||0);T>0&&(i.push({descricao:"IRRF",valor:T,base_legal:"Lei 15.270/2025 + IN RFB 1.500/2014"}),d.push(`Base IRRF: R$ ${g.toFixed(2)} (apenas saldo + 13Âº proporcional)`)),f>0&&d.push(`Verbas indenizatÃ³rias (isentas de IRRF): R$ ${f.toFixed(2)}`);r.reduce((a,e)=>a+e.valor,0);const F=function(a,e,o,s,r,i){const t=[],d=calcularTempoServico(r,i),c=12*d.anos+d.meses+(d.dias>=15?1:0),n=.08*a*c;if(t.push({descricao:`FGTS Acumulado (${c} meses Ã— 8%)`,valor:n,base_legal:"Lei 8.036/90 Art. 15"}),"indenizado"===s){const e=.08*a;t.push({descricao:"FGTS sobre Aviso PrÃ©vio Indenizado (8%)",valor:e,base_legal:"Lei 8.036/90 Art. 15"})}const l=function(a,e){switch(e){case"dispensa_sem_justa_causa":case"rescisao_indireta":return{descricao:"Multa FGTS (40%)",valor:.4*a,base_legal:"Lei 8.036/90 Art. 18 Â§1Âº"};case"acordo_mutuo":return{descricao:"Multa FGTS (20%) - Acordo",valor:.2*a,base_legal:"CLT Art. 484-A"};default:return{descricao:"",valor:0}}}(n,o);l.valor>0&&t.push(l);return t}(o.salario_base,0,s.tipo_rescisao,s.aviso_previo,c,n);F.forEach(a=>t.push(a)),d.push(...function(a,e){const o=[];switch(o.push("âš ï¸ Esta Ã© uma SIMULAÃ‡ÃƒO. Os valores nÃ£o impactam a folha de pagamento."),o.push("ğŸ“… Prazo para pagamento: atÃ© 10 dias apÃ³s o desligamento (CLT Art. 477)."),o.push("ğŸ’° TRIBUTAÃ‡ÃƒO: Saldo de salÃ¡rio, 13Âº e aviso prÃ©vio sofrem incidÃªncia de INSS e IRRF."),o.push("ğŸ†“ ISENTOS: FÃ©rias + 1/3, aviso prÃ©vio indenizado e multa FGTS sÃ£o isentos de INSS/IRRF."),a){case"dispensa_sem_justa_causa":o.push("âœ… Direito a seguro-desemprego (se cumpridos os requisitos legais)."),o.push("ğŸ’µ Saque integral do FGTS + multa de 40%."),o.push("ğŸ“‹ NecessÃ¡rio homologaÃ§Ã£o no sindicato (se tempo > 1 ano).");break;case"acordo_mutuo":o.push("ğŸ¤ Acordo previsto no Art. 484-A da CLT (Reforma Trabalhista 2017)."),o.push("ğŸ’µ Saque de 80% do FGTS + multa de 20%."),o.push("âŒ NÃƒO tem direito a seguro-desemprego."),o.push("ğŸ“ Aviso prÃ©vio indenizado reduzido pela metade.");break;case"pedido_demissao":o.push("âŒ NÃ£o tem direito a seguro-desemprego."),o.push("âŒ NÃ£o tem direito a saque do FGTS nem multa."),o.push("âš ï¸ Deve cumprir aviso prÃ©vio ou pagar indenizaÃ§Ã£o ao empregador.");break;case"dispensa_com_justa_causa":o.push("âŒ Perde direito a aviso prÃ©vio, 13Âº proporcional e fÃ©rias proporcionais."),o.push("âŒ NÃ£o tem direito a seguro-desemprego nem saque do FGTS."),o.push("âš–ï¸ Apenas recebe saldo de salÃ¡rio e fÃ©rias vencidas (se houver).");break;case"rescisao_indireta":o.push("âš–ï¸ RescisÃ£o por falta grave do empregador (CLT Art. 483)."),o.push("âœ… Mesmos direitos da dispensa sem justa causa."),o.push("ğŸ’µ Saque integral do FGTS + multa de 40%."),o.push("ğŸ“‹ Requer comprovaÃ§Ã£o judicial ou administrativa.");break;case"termino_experiencia":o.push("ğŸ“… TÃ©rmino natural do contrato de experiÃªncia."),o.push("ğŸ’µ Saque do FGTS sem multa."),o.push("âŒ NÃ£o tem direito a aviso prÃ©vio.");break;case"termino_determinado":o.push("ğŸ“… TÃ©rmino natural do contrato por prazo determinado."),o.push("ğŸ’µ Saque do FGTS sem multa."),o.push("âŒ NÃ£o tem direito a aviso prÃ©vio.");break;case"morte":o.push("ğŸ•Šï¸ Falecimento do empregado."),o.push("ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Valores devem ser pagos aos dependentes/herdeiros."),o.push("ğŸ’µ Saque do FGTS pelos dependentes.");break;case"aposentadoria":o.push("ğŸ‰ Aposentadoria do colaborador."),o.push("ğŸ’µ Saque do FGTS permitido."),o.push("ğŸ“‹ Apresentar comprovante de aposentadoria.")}e.anos<1?(o.push("â±ï¸ Colaborador com menos de 1 ano de empresa."),o.push("ğŸ“‹ Dispensa de homologaÃ§Ã£o sindical.")):o.push("ğŸ“‹ HomologaÃ§Ã£o obrigatÃ³ria no sindicato ou MinistÃ©rio do Trabalho.");return o.push("âš ï¸ IMPORTANTE: Consulte sempre um contador ou advogado trabalhista."),o.push("ğŸ“Š Valores sÃ£o estimativas baseadas nas informaÃ§Ãµes fornecidas."),o}(s.tipo_rescisao,l));const A=r.reduce((a,e)=>a+e.valor,0),I=i.reduce((a,e)=>a+e.valor,0),R=t.reduce((a,e)=>a+e.valor,0);return{proventos:r,descontos:i,fgts:t,total_proventos:A,total_descontos:I,total_fgts:R,valor_liquido:A-I,tempo_casa:`${l.anos} anos, ${l.meses} meses e ${l.dias} dias`,observacoes:d}}function calcularTempoServico(a,e){let o=e.getFullYear()-a.getFullYear(),s=e.getMonth()-a.getMonth(),r=e.getDate()-a.getDate();if(r<0){s--;r+=new Date(e.getFullYear(),e.getMonth(),0).getDate()}return s<0&&(o--,s+=12),{anos:o,meses:s,dias:r}}export{calcularRescisao as c};
