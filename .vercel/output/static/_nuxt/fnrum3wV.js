import{aj as n,l as a,n as l}from"./CHjXoEIz.js";const h=()=>{const e=n("auth-user",()=>{{const t=localStorage.getItem("auth-user");return t?JSON.parse(t):null}}),o=a(()=>!!e.value),r=a(()=>e.value?.tipo==="admin");return{user:e,isAuthenticated:o,isAdmin:r,login:async(t,u)=>{try{const s=await $fetch("/api/auth/login",{method:"POST",body:{email:t,senha:u}});return s.success&&s.user?(e.value=s.user,localStorage.setItem("auth-user",JSON.stringify(s.user)),{success:!0,message:"Login realizado com sucesso!"}):{success:!1,message:"Email ou senha incorretos. Tente novamente."}}catch(s){return console.error("Erro no login:",s),{success:!1,message:s.data?.message||"Email ou senha incorretos. Tente novamente."}}},logout:()=>{e.value=null,localStorage.removeItem("auth-user"),l("/login")},updateUser:t=>{e.value&&(e.value={...e.value,...t},localStorage.setItem("auth-user",JSON.stringify(e.value)))}}};export{h as u};
