import{d as y,E as h,K as C,r as _,f as o,b as e,G as k,e as l,n as p,g as t,t as r,l as g,a as S,j as N,_ as z,o as n,p as w}from"./Cx4dxf1F.js";const E={class:"min-h-screen bg-gray-50 p-8"},V={class:"max-w-4xl mx-auto"},j={class:"card mb-6"},B={class:"space-y-3"},R={class:"flex items-center gap-3"},T={class:"text-sm text-gray-500"},I={class:"flex items-center gap-3"},K={class:"text-sm text-gray-500 font-mono"},P={class:"flex items-center gap-3"},U={class:"text-sm text-gray-500"},A={class:"card mb-6"},J=["disabled"],L={key:0},D={key:1},G={key:0,class:"mt-4"},H={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},M={class:"flex items-start gap-3"},O={class:"text-sm text-green-700 mt-1"},Q={key:0,class:"mt-2 text-xs bg-green-100 p-2 rounded overflow-auto"},q={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},F={class:"flex items-start gap-3"},W={class:"text-sm text-red-700 mt-1"},X={key:0,class:"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto"},Y={class:"mt-6 text-center"},ee=y({__name:"test-supabase",setup(Z){const i=h(),b=C(),u=b.public.supabaseUrl,d=b.public.supabaseKey,x=_(!1),a=_(null),v=async()=>{x.value=!0,a.value=null;try{const{data:m,error:s}=await i.from("app_users").select("count").limit(1);s?s.code==="42P01"?a.value={success:!0,message:'Conexão estabelecida! A tabela "app_users" ainda não existe. Execute as migrations.',error:s.message}:a.value={success:!1,message:"Erro ao conectar com o banco de dados",error:s.message}:a.value={success:!0,message:"Conexão estabelecida com sucesso! Banco de dados acessível.",data:m}}catch(m){a.value={success:!1,message:"Erro ao testar conexão",error:m.message}}finally{x.value=!1}};return(m,s)=>{const c=N("Icon"),f=z;return n(),o("div",E,[e("div",V,[s[8]||(s[8]=e("div",{class:"card mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"}," Teste de Conexão Supabase "),e("p",{class:"text-gray-600"}," Sistema RH Qualitec - Verificação de Configuração ")],-1)),e("div",j,[s[3]||(s[3]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Status da Conexão",-1)),e("div",B,[e("div",R,[l(c,{name:t(u)?"heroicons:check-circle":"heroicons:x-circle",class:p(t(u)?"text-green-500":"text-red-500"),size:"24"},null,8,["name","class"]),e("div",null,[s[0]||(s[0]=e("p",{class:"font-medium text-gray-700"},"Supabase URL",-1)),e("p",T,r(t(u)||"Não configurado"),1)])]),e("div",I,[l(c,{name:t(d)?"heroicons:check-circle":"heroicons:x-circle",class:p(t(d)?"text-green-500":"text-red-500"),size:"24"},null,8,["name","class"]),e("div",null,[s[1]||(s[1]=e("p",{class:"font-medium text-gray-700"},"Anon Key",-1)),e("p",K,r(t(d)?t(d).substring(0,30)+"...":"Não configurado"),1)])]),e("div",P,[l(c,{name:t(i)?"heroicons:check-circle":"heroicons:x-circle",class:p(t(i)?"text-green-500":"text-red-500"),size:"24"},null,8,["name","class"]),e("div",null,[s[2]||(s[2]=e("p",{class:"font-medium text-gray-700"},"Cliente Supabase",-1)),e("p",U,r(t(i)?"Inicializado com sucesso":"Erro na inicialização"),1)])])])]),e("div",A,[s[6]||(s[6]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Teste de Conexão",-1)),e("button",{onClick:v,disabled:t(x),class:"employee-btn-primary mb-4"},[t(x)?(n(),o("span",L,"Testando...")):(n(),o("span",D,"Testar Conexão com Banco"))],8,J),t(a)?(n(),o("div",G,[t(a).success?(n(),o("div",H,[e("div",M,[l(c,{name:"heroicons:check-circle",class:"text-green-500 flex-shrink-0",size:"24"}),e("div",null,[s[4]||(s[4]=e("p",{class:"font-medium text-green-800"},"Conexão bem-sucedida!",-1)),e("p",O,r(t(a).message),1),t(a).data?(n(),o("pre",Q,r(JSON.stringify(t(a).data,null,2)),1)):g("",!0)])])])):(n(),o("div",q,[e("div",F,[l(c,{name:"heroicons:x-circle",class:"text-red-500 flex-shrink-0",size:"24"}),e("div",null,[s[5]||(s[5]=e("p",{class:"font-medium text-red-800"},"Erro na conexão",-1)),e("p",W,r(t(a).message),1),t(a).error?(n(),o("pre",X,r(t(a).error),1)):g("",!0)])])]))])):g("",!0)]),s[9]||(s[9]=k('<div class="card"><h2 class="text-xl font-bold text-gray-800 mb-4">Informações do Projeto</h2><div class="grid md:grid-cols-2 gap-4"><div><p class="text-sm text-gray-500">Projeto Supabase</p><p class="font-mono text-sm text-gray-800">utuxefswedolrninwgvs</p></div><div><p class="text-sm text-gray-500">Região</p><p class="text-sm text-gray-800">supabase.co</p></div><div><p class="text-sm text-gray-500">Módulo Nuxt</p><p class="text-sm text-gray-800">@nuxtjs/supabase v1.4.0</p></div><div><p class="text-sm text-gray-500">Cliente JS</p><p class="text-sm text-gray-800">@supabase/supabase-js v2.45.0</p></div></div></div>',1)),e("div",Y,[l(f,{to:"/",class:"text-blue-600 hover:text-blue-800"},{default:S(()=>[...s[7]||(s[7]=[w(" ← Voltar para página inicial ",-1)])]),_:1})])])])}}});export{ee as default};
