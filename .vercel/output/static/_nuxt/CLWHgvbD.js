import{d as P,r as b,x as A,a as q,g as i,o as d,e as o,l as g,f as u,b as F,_ as H,p as L,h as r,F as U,k as z,n as j,t as c,y as B,i as s,z as n,v as O,I as Q,A as _,J as E}from"./BSA_tgdP.js";import{_ as G}from"./yUH5lwCE.js";import"./BBzIiODl.js";const K={class:"min-h-screen bg-gray-50"},R={class:"bg-white border-b border-gray-200 sticky top-0 z-40"},W={class:"max-w-7xl mx-auto px-8 py-4"},X={class:"flex items-center justify-between"},Y={class:"flex items-center gap-4"},Z={class:"flex items-center gap-4"},ee={class:"max-w-7xl mx-auto p-8"},oe={key:0,class:"card text-center py-12"},ae={key:1,class:"space-y-6"},te={class:"card bg-blue-50 border-2 border-blue-200"},re={class:"flex items-start gap-3"},se={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-4"},le=["onClick"],ne={key:0,class:"absolute top-3 right-3 px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full"},ie={class:"flex items-start gap-4"},de={class:"flex-1 min-w-0"},ue={class:"text-lg font-semibold text-gray-800 truncate"},pe={class:"text-sm text-gray-500 mb-2"},me={class:"space-y-1 text-sm text-gray-600"},ce={class:"flex items-center gap-2"},xe={class:"flex items-center gap-2"},be={key:0,class:"card text-center py-12"},ge={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},ye={class:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},fe={class:"p-6 border-b border-gray-200"},ve={class:"flex items-center justify-between"},_e={class:"text-xl font-bold text-gray-800"},he={class:"grid md:grid-cols-2 gap-4"},ke={class:"grid md:grid-cols-2 gap-4"},we={class:"grid md:grid-cols-2 gap-4"},Ve={class:"grid md:grid-cols-2 gap-4"},Ce={class:"flex flex-wrap gap-2"},Ue=["onUpdate:modelValue"],ze={class:"text-sm"},je={class:"space-y-4"},Ee={class:"flex items-center gap-2"},Ne={key:0,class:"grid md:grid-cols-2 gap-4 pl-6"},Te={class:"space-y-4"},Se={class:"flex items-center gap-2"},$e={key:0,class:"grid md:grid-cols-3 gap-4 pl-6"},Je={class:"flex items-center gap-2"},De={class:"flex gap-4 pt-4 border-t"},Me=["disabled"],Fe=P({__name:"jornadas",setup(Ie){const C=b(!0),f=b(!1),h=b(!1),m=b(!1),k=b([]),N={domingo:"Dom",segunda:"Seg",terca:"Ter",quarta:"Qua",quinta:"Qui",sexta:"Sex",sabado:"Sáb"},x={id:null,nome:"",descricao:"",codigo:"",tipo:"padrao",carga_horaria_semanal:44,carga_horaria_diaria:8,hora_entrada:"08:00",hora_saida:"17:00",hora_intervalo_inicio:"12:00",hora_intervalo_fim:"13:00",tolerancia_entrada_minutos:10,tolerancia_saida_minutos:10,dias_trabalho:{domingo:!1,segunda:!0,terca:!0,quarta:!0,quinta:!0,sexta:!0,sabado:!1},permite_hora_extra:!0,percentual_hora_extra_50:50,percentual_hora_extra_100:100,adicional_noturno:!1,hora_inicio_noturno:"22:00",hora_fim_noturno:"05:00",percentual_adicional_noturno:20,padrao:!1},a=b({...x}),T=l=>({padrao:"bg-blue-500",escala:"bg-purple-500","12x36":"bg-orange-500","6x1":"bg-amber-500","5x2":"bg-green-500",flexivel:"bg-cyan-500",parcial:"bg-pink-500",noturno:"bg-indigo-500",personalizado:"bg-gray-500"})[l]||"bg-gray-500",S=l=>({padrao:"heroicons:clock",escala:"heroicons:calendar-days","12x36":"heroicons:arrow-path","6x1":"heroicons:calendar","5x2":"heroicons:calendar",flexivel:"heroicons:adjustments-horizontal",parcial:"heroicons:sun",noturno:"heroicons:moon",personalizado:"heroicons:cog-6-tooth"})[l]||"heroicons:clock",w=async()=>{try{const l=await $fetch("/api/jornadas");l.success&&(k.value=l.data)}catch(l){console.error("Erro ao carregar jornadas:",l)}finally{C.value=!1}};A(w);const V=l=>{l?(m.value=!0,a.value={...x,...l,dias_trabalho:l.dias_trabalho||x.dias_trabalho}):(m.value=!1,a.value={...x,dias_trabalho:{...x.dias_trabalho}}),h.value=!0},v=()=>{h.value=!1,m.value=!1,a.value={...x,dias_trabalho:{...x.dias_trabalho}}},$=async()=>{const l=E();f.value=!0;try{m.value&&a.value.id?await $fetch(`/api/jornadas/${a.value.id}`,{method:"PUT",body:a.value}):await $fetch("/api/jornadas",{method:"POST",body:a.value}),await w(),v(),l.success(m.value?"Jornada atualizada!":"Jornada criada!",m.value?`A jornada "${a.value.nome}" foi atualizada com sucesso.`:`A jornada "${a.value.nome}" foi criada com sucesso.`)}catch(e){l.error("Erro ao salvar jornada",e.data?.message||e.message||"Não foi possível salvar a jornada.")}finally{f.value=!1}},J=async()=>{const l=E();if(confirm("Deseja realmente excluir esta jornada?"))try{await $fetch(`/api/jornadas/${a.value.id}`,{method:"DELETE"}),await w(),v(),l.success("Jornada excluída!",`A jornada "${a.value.nome}" foi excluída com sucesso.`)}catch(e){l.error("Erro ao excluir jornada",e.data?.message||e.message||"Não foi possível excluir a jornada.")}};return(l,e)=>{const p=q("Icon"),D=H,M=G;return d(),i("div",K,[o("header",R,[o("div",W,[o("div",X,[o("div",Y,[u(D,{to:"/configuracoes",class:"w-10 h-10 bg-red-700 rounded-lg flex items-center justify-center hover:bg-red-800 transition-colors"},{default:F(()=>[u(p,{name:"heroicons:arrow-left",class:"text-white",size:"20"})]),_:1}),e[24]||(e[24]=o("div",null,[o("h1",{class:"text-xl font-bold text-gray-800"},"Jornadas de Trabalho"),o("p",{class:"text-sm text-gray-500"},"Configure horários, escalas e turnos")],-1))]),o("div",Z,[o("button",{onClick:e[0]||(e[0]=t=>V()),class:"px-4 py-2 bg-red-700 text-white rounded-lg hover:bg-red-800 transition-colors flex items-center gap-2"},[u(p,{name:"heroicons:plus",size:"20"}),e[25]||(e[25]=L(" Nova Jornada ",-1))]),u(M,{theme:"admin"})])])])]),o("div",ee,[r(C)?(d(),i("div",oe,[u(p,{name:"heroicons:arrow-path",class:"animate-spin text-gray-400 mx-auto mb-4",size:"48"}),e[26]||(e[26]=o("p",{class:"text-gray-600"},"Carregando jornadas...",-1))])):(d(),i("div",ae,[o("div",te,[o("div",re,[u(p,{name:"heroicons:information-circle",class:"text-blue-600 flex-shrink-0",size:"24"}),e[27]||(e[27]=o("div",null,[o("h3",{class:"font-semibold text-blue-900 mb-1"},"Sobre Jornadas de Trabalho"),o("p",{class:"text-sm text-blue-800"}," As jornadas configuradas aqui serão vinculadas aos colaboradores e usadas para controle de ponto e cálculo de horas extras. ")],-1))])]),o("div",se,[(d(!0),i(U,null,z(r(k),t=>(d(),i("div",{key:t.id,class:"card hover:shadow-lg transition-shadow cursor-pointer relative",onClick:y=>V(t)},[t.padrao?(d(),i("span",ne," Padrão ")):g("",!0),o("div",ie,[o("div",{class:j(["w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0",T(t.tipo)])},[u(p,{name:S(t.tipo),class:"text-white",size:"24"},null,8,["name"])],2),o("div",de,[o("h3",ue,c(t.nome),1),o("p",pe,c(t.codigo),1),o("div",me,[o("div",ce,[u(p,{name:"heroicons:clock",size:"16",class:"text-gray-400"}),o("span",null,c(t.hora_entrada?.slice(0,5))+" - "+c(t.hora_saida?.slice(0,5)),1)]),o("div",xe,[u(p,{name:"heroicons:calendar-days",size:"16",class:"text-gray-400"}),o("span",null,c(t.carga_horaria_semanal)+"h/semana",1)])])])])],8,le))),128))]),r(k).length===0?(d(),i("div",be,[u(p,{name:"heroicons:clock",class:"text-gray-300 mx-auto mb-4",size:"64"}),e[28]||(e[28]=o("h3",{class:"text-lg font-semibold text-gray-600 mb-2"},"Nenhuma jornada cadastrada",-1)),e[29]||(e[29]=o("p",{class:"text-gray-500 mb-4"},"Crie sua primeira jornada de trabalho",-1)),o("button",{onClick:e[1]||(e[1]=t=>V()),class:"px-4 py-2 bg-red-700 text-white rounded-lg hover:bg-red-800"}," Nova Jornada ")])):g("",!0)]))]),r(h)?(d(),i("div",ge,[o("div",ye,[o("div",fe,[o("div",ve,[o("h2",_e,c(r(m)?"Editar Jornada":"Nova Jornada"),1),o("button",{onClick:e[2]||(e[2]=t=>v()),class:"text-gray-400 hover:text-gray-600"},[u(p,{name:"heroicons:x-mark",size:"24"})])])]),o("form",{onSubmit:B($,["prevent"]),class:"p-6 space-y-6"},[o("div",he,[o("div",null,[e[30]||(e[30]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nome *",-1)),s(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>r(a).nome=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: Comercial Padrão"},null,512),[[n,r(a).nome]])]),o("div",null,[e[31]||(e[31]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Código",-1)),s(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>r(a).codigo=t),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: COM-44"},null,512),[[n,r(a).codigo]])])]),o("div",null,[e[32]||(e[32]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Descrição",-1)),s(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>r(a).descricao=t),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Descrição da jornada"},null,512),[[n,r(a).descricao]])]),o("div",null,[e[34]||(e[34]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de Jornada",-1)),s(o("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>r(a).tipo=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},[...e[33]||(e[33]=[Q('<option value="padrao">Padrão (CLT)</option><option value="escala">Escala</option><option value="12x36">12x36</option><option value="6x1">6x1</option><option value="5x2">5x2</option><option value="flexivel">Flexível</option><option value="parcial">Meio Período</option><option value="noturno">Noturno</option><option value="personalizado">Personalizado</option>',9)])],512),[[O,r(a).tipo]])]),o("div",ke,[o("div",null,[e[35]||(e[35]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Carga Horária Semanal (h)",-1)),s(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>r(a).carga_horaria_semanal=t),type:"number",step:"0.5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).carga_horaria_semanal]])]),o("div",null,[e[36]||(e[36]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Carga Horária Diária (h)",-1)),s(o("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>r(a).carga_horaria_diaria=t),type:"number",step:"0.5",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).carga_horaria_diaria]])])]),o("div",we,[o("div",null,[e[37]||(e[37]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Entrada",-1)),s(o("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>r(a).hora_entrada=t),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).hora_entrada]])]),o("div",null,[e[38]||(e[38]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Saída",-1)),s(o("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>r(a).hora_saida=t),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).hora_saida]])]),o("div",null,[e[39]||(e[39]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Início Intervalo",-1)),s(o("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>r(a).hora_intervalo_inicio=t),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).hora_intervalo_inicio]])]),o("div",null,[e[40]||(e[40]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fim Intervalo",-1)),s(o("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>r(a).hora_intervalo_fim=t),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).hora_intervalo_fim]])])]),o("div",Ve,[o("div",null,[e[41]||(e[41]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tolerância Entrada (min)",-1)),s(o("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>r(a).tolerancia_entrada_minutos=t),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).tolerancia_entrada_minutos]])]),o("div",null,[e[42]||(e[42]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tolerância Saída (min)",-1)),s(o("input",{"onUpdate:modelValue":e[14]||(e[14]=t=>r(a).tolerancia_saida_minutos=t),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).tolerancia_saida_minutos]])])]),o("div",null,[e[43]||(e[43]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Dias de Trabalho",-1)),o("div",Ce,[(d(),i(U,null,z(N,(t,y)=>o("label",{key:y,class:j(["flex items-center gap-2 px-3 py-2 border rounded-lg cursor-pointer",r(a).dias_trabalho[y]?"bg-red-50 border-red-300":"bg-gray-50 border-gray-200"])},[s(o("input",{type:"checkbox","onUpdate:modelValue":I=>r(a).dias_trabalho[y]=I,class:"rounded text-red-600"},null,8,Ue),[[_,r(a).dias_trabalho[y]]]),o("span",ze,c(t),1)],2)),64))])]),o("div",je,[o("label",Ee,[s(o("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=t=>r(a).permite_hora_extra=t),class:"rounded text-red-600"},null,512),[[_,r(a).permite_hora_extra]]),e[44]||(e[44]=o("span",{class:"text-sm font-medium text-gray-700"},"Permite Hora Extra",-1))]),r(a).permite_hora_extra?(d(),i("div",Ne,[o("div",null,[e[45]||(e[45]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"% Hora Extra 50%",-1)),s(o("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>r(a).percentual_hora_extra_50=t),type:"number",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).percentual_hora_extra_50]])]),o("div",null,[e[46]||(e[46]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"% Hora Extra 100%",-1)),s(o("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>r(a).percentual_hora_extra_100=t),type:"number",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).percentual_hora_extra_100]])])])):g("",!0)]),o("div",Te,[o("label",Se,[s(o("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=t=>r(a).adicional_noturno=t),class:"rounded text-red-600"},null,512),[[_,r(a).adicional_noturno]]),e[47]||(e[47]=o("span",{class:"text-sm font-medium text-gray-700"},"Adicional Noturno",-1))]),r(a).adicional_noturno?(d(),i("div",$e,[o("div",null,[e[48]||(e[48]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Início Noturno",-1)),s(o("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>r(a).hora_inicio_noturno=t),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).hora_inicio_noturno]])]),o("div",null,[e[49]||(e[49]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fim Noturno",-1)),s(o("input",{"onUpdate:modelValue":e[20]||(e[20]=t=>r(a).hora_fim_noturno=t),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).hora_fim_noturno]])]),o("div",null,[e[50]||(e[50]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"% Adicional",-1)),s(o("input",{"onUpdate:modelValue":e[21]||(e[21]=t=>r(a).percentual_adicional_noturno=t),type:"number",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg"},null,512),[[n,r(a).percentual_adicional_noturno]])])])):g("",!0)]),o("label",Je,[s(o("input",{type:"checkbox","onUpdate:modelValue":e[22]||(e[22]=t=>r(a).padrao=t),class:"rounded text-red-600"},null,512),[[_,r(a).padrao]]),e[51]||(e[51]=o("span",{class:"text-sm font-medium text-gray-700"},"Definir como jornada padrão da empresa",-1))]),o("div",De,[r(m)?(d(),i("button",{key:0,type:"button",onClick:J,class:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg"}," Excluir ")):g("",!0),e[52]||(e[52]=o("div",{class:"flex-1"},null,-1)),o("button",{type:"button",onClick:e[23]||(e[23]=t=>v()),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," Cancelar "),o("button",{type:"submit",disabled:r(f),class:"px-6 py-2 bg-red-700 text-white rounded-lg hover:bg-red-800 disabled:opacity-50"},c(r(f)?"Salvando...":"Salvar"),9,Me)])],32)])])):g("",!0)])}}});export{Fe as default};
