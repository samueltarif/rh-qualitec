import{d as C,r as p,x as _,f as n,b as t,k as y,l as E,F as M,j as V,g as l,y as k,t as d,h as u,z as m,A as j,o as a}from"./DNqCZqpD.js";import{u as v}from"./DYUi-Oaq.js";const $={class:"p-6 space-y-6"},B={class:"flex justify-between items-center"},N={class:"grid gap-4"},U={class:"flex justify-between items-start"},D={class:"flex-1"},A={class:"flex items-center gap-3"},P={class:"text-lg font-semibold text-gray-900"},T={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded"},q={key:1,class:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded"},H={key:0,class:"text-gray-600 mt-2"},S={class:"mt-4 grid grid-cols-2 gap-4 text-sm"},z={class:"ml-2 font-mono text-gray-900"},F={class:"ml-2 font-mono text-gray-900"},R={class:"ml-2 font-semibold text-blue-600"},I={class:"flex gap-2"},O=["onClick"],Q=["onClick"],W={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},X={class:"text-xl font-bold mb-4"},G={class:"grid grid-cols-2 gap-4"},J={class:"flex items-center"},tt=C({__name:"locais-ponto",setup(K){const b=p([]),c=p(!1),i=p(null),s=p({nome:"",descricao:"",latitude:0,longitude:0,raio_metros:100,ativo:!0}),g=async()=>{const{data:r}=await v("/api/locais-ponto","$yBLApXwyL1");r.value&&(b.value=r.value)},f=r=>{r?(i.value=r,s.value={...r}):(i.value=null,s.value={nome:"",descricao:"",latitude:0,longitude:0,raio_metros:100,ativo:!0}),c.value=!0},x=()=>{c.value=!1,i.value=null},w=async()=>{try{const r=i.value?`/api/locais-ponto/${i.value.id}`:"/api/locais-ponto",e=i.value?"PUT":"POST";await v(r,{method:e,body:s.value},"$PW4Q-LN3_f"),await g(),x()}catch(r){console.error("Erro ao salvar local:",r)}},L=async r=>{if(confirm("Deseja realmente excluir este local?"))try{await v(`/api/locais-ponto/${r}`,{method:"DELETE"},"$_3rxhPE568"),await g()}catch(e){console.error("Erro ao excluir local:",e)}};return _(()=>{g()}),(r,e)=>(a(),n("div",$,[t("div",B,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Locais de Ponto"),t("p",{class:"text-gray-600 mt-1"},"Configure os locais permitidos para registro de ponto")],-1)),t("button",{onClick:e[0]||(e[0]=o=>f()),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"},[...e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),E(" Novo Local ",-1)])])]),t("div",N,[(a(!0),n(M,null,V(l(b),o=>(a(),n("div",{key:o.id,class:"bg-white border rounded-lg p-6 hover:shadow-md transition-shadow"},[t("div",U,[t("div",D,[t("div",A,[t("h3",P,d(o.nome),1),o.ativo?(a(),n("span",T," Ativo ")):(a(),n("span",q," Inativo "))]),o.descricao?(a(),n("p",H,d(o.descricao),1)):y("",!0),t("div",S,[t("div",null,[e[9]||(e[9]=t("span",{class:"text-gray-500"},"Latitude:",-1)),t("span",z,d(o.latitude),1)]),t("div",null,[e[10]||(e[10]=t("span",{class:"text-gray-500"},"Longitude:",-1)),t("span",F,d(o.longitude),1)]),t("div",null,[e[11]||(e[11]=t("span",{class:"text-gray-500"},"Raio permitido:",-1)),t("span",R,d(o.raio_metros)+"m",1)])])]),t("div",I,[t("button",{onClick:h=>f(o),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Editar"},[...e[12]||(e[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,O),t("button",{onClick:h=>L(o.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Excluir"},[...e[13]||(e[13]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Q)])])]))),128))]),l(c)?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:k(x,["self"])},[t("div",W,[t("h2",X,d(l(i)?"Editar Local":"Novo Local"),1),t("form",{onSubmit:k(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nome",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).nome=o),type:"text",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[m,l(s).nome]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Descrição",-1)),u(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).descricao=o),rows:"2",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[m,l(s).descricao]])]),t("div",G,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Latitude",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).latitude=o),type:"number",step:"0.00000001",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[m,l(s).latitude,void 0,{number:!0}]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Longitude",-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).longitude=o),type:"number",step:"0.00000001",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[m,l(s).longitude,void 0,{number:!0}]])])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Raio permitido (metros)",-1)),u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l(s).raio_metros=o),type:"number",min:"10",max:"5000",required:"",class:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[m,l(s).raio_metros,void 0,{number:!0}]]),e[19]||(e[19]=t("p",{class:"text-sm text-gray-500 mt-1"},"Distância máxima permitida para bater ponto",-1))]),t("div",J,[u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l(s).ativo=o),type:"checkbox",id:"ativo",class:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"},null,512),[[j,l(s).ativo]]),e[20]||(e[20]=t("label",{for:"ativo",class:"ml-2 text-sm text-gray-700"},"Local ativo",-1))]),t("div",{class:"flex justify-end gap-3 pt-4"},[t("button",{type:"button",onClick:x,class:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg"}," Cancelar "),e[21]||(e[21]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg"}," Salvar ",-1))])],32)])])):y("",!0)]))}});export{tt as default};
