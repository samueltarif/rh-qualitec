import{d as E,s as S,c as b,a as p,i as C,g as H,o as m,b as o,f as _,k as v,e as f,_ as $,t as d,l as w,r as y}from"./DNqCZqpD.js";import{_ as k}from"./DdnJSzYT.js";import{_ as P}from"./CF27ZHw8.js";const B={class:"p-6"},V={class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},j={key:0,class:"bg-gray-50 rounded-lg p-4 mb-6"},O={class:"space-y-2"},T={class:"flex justify-between"},z={class:"text-sm font-semibold text-gray-800"},I={class:"flex justify-between"},M={class:"text-sm font-semibold text-gray-800"},N={class:"flex justify-between"},R={class:"text-sm font-semibold text-green-600"},U={key:0,class:"flex justify-between"},A={class:"text-sm font-semibold text-purple-600"},D={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},J={class:"flex gap-3"},L={class:"flex gap-3"},q=E({__name:"ModalConfirmarExclusao",props:{show:{type:Boolean},holerite:{},loading:{type:Boolean}},emits:["close","confirmar"],setup(t,{emit:c}){const r=t,x=c,u=S({get:()=>r.show,set:i=>{i||x("close")}}),h=i=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][i-1],g=i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i||0);return(i,s)=>{const a=$,e=k,l=P;return m(),b(l,{modelValue:H(u),"onUpdate:modelValue":s[2]||(s[2]=n=>C(u)?u.value=n:null),size:"md"},{default:p(()=>[o("div",B,[o("div",V,[f(a,{name:"heroicons:exclamation-triangle",class:"text-red-600",size:"32"})]),s[9]||(s[9]=o("h3",{class:"text-xl font-bold text-gray-800 text-center mb-2"}," Confirmar Exclusão ",-1)),s[10]||(s[10]=o("p",{class:"text-gray-600 text-center mb-6"}," Tem certeza que deseja excluir este holerite? Esta ação não pode ser desfeita. ",-1)),t.holerite?(m(),_("div",j,[o("div",O,[o("div",T,[s[3]||(s[3]=o("span",{class:"text-sm text-gray-600"},"Colaborador:",-1)),o("span",z,d(t.holerite.nome_colaborador),1)]),o("div",I,[s[4]||(s[4]=o("span",{class:"text-sm text-gray-600"},"Período:",-1)),o("span",M,d(h(t.holerite.mes))+"/"+d(t.holerite.ano),1)]),o("div",N,[s[5]||(s[5]=o("span",{class:"text-sm text-gray-600"},"Valor:",-1)),o("span",R,d(g(t.holerite.salario_liquido)),1)]),t.holerite.tipo==="decimo_terceiro"?(m(),_("div",U,[s[6]||(s[6]=o("span",{class:"text-sm text-gray-600"},"Tipo:",-1)),o("span",A,"13º Salário - "+d(t.holerite.parcela_13)+"ª Parcela",1)])):v("",!0)])])):v("",!0),o("div",D,[o("div",J,[f(a,{name:"heroicons:information-circle",class:"text-yellow-600 flex-shrink-0",size:"20"}),s[7]||(s[7]=o("div",{class:"text-sm text-yellow-800"},[o("p",{class:"font-semibold mb-1"},"Atenção:"),o("ul",{class:"list-disc list-inside space-y-1"},[o("li",null,"O holerite será permanentemente excluído"),o("li",null,"Você precisará gerar novamente se necessário"),o("li",null,"Esta ação será registrada no log")])],-1))])]),o("div",L,[f(e,{variant:"secondary",onClick:s[0]||(s[0]=n=>u.value=!1),class:"flex-1"},{default:p(()=>[...s[8]||(s[8]=[w(" Cancelar ",-1)])]),_:1}),f(e,{variant:"danger",onClick:s[1]||(s[1]=n=>x("confirmar")),disabled:t.loading,class:"flex-1"},{default:p(()=>[t.loading?(m(),b(a,{key:0,name:"heroicons:arrow-path",class:"animate-spin mr-2",size:"16"})):v("",!0),w(" "+d(t.loading?"Excluindo...":"Excluir"),1)]),_:1},8,["disabled"])])])]),_:1},8,["modelValue"])}}}),Q=Object.assign(q,{__name:"ModalConfirmarExclusao"}),W=()=>{const t=y(!1),c=y([]),r=y(null);return{loading:t,holerites:c,error:r,buscarHolerites:async a=>{t.value=!0,r.value=null;try{let e="/api/holerites";const l=new URLSearchParams;a?.colaborador_id&&l.append("colaborador_id",a.colaborador_id),a?.mes&&l.append("mes",a.mes.toString()),a?.ano&&l.append("ano",a.ano.toString()),a?.tipo&&l.append("tipo",a.tipo),a?.status&&l.append("status",a.status),l.toString()&&(e+=`?${l.toString()}`);const n=await $fetch(e);return c.value=n.data||n||[],n.data||n}catch(e){throw r.value=e.message||"Erro ao buscar holerites",e}finally{t.value=!1}},buscarHoleritePorId:async a=>{t.value=!0,r.value=null;try{return await $fetch(`/api/holerites/${a}`)}catch(e){throw r.value=e.message||"Erro ao buscar holerite",e}finally{t.value=!1}},excluirHolerite:async a=>{t.value=!0,r.value=null;try{const e=await $fetch(`/api/holerites/${a}`,{method:"DELETE"});return c.value=c.value.filter(l=>l.id!==a),e}catch(e){throw r.value=e.message||"Erro ao excluir holerite",e}finally{t.value=!1}},gerarHolerites:async a=>{t.value=!0,r.value=null;try{return await $fetch("/api/holerites/gerar",{method:"POST",body:a})}catch(e){throw r.value=e.message||"Erro ao gerar holerites",e}finally{t.value=!1}},enviarHoleritePorEmail:async a=>{t.value=!0,r.value=null;try{return await $fetch("/api/holerites/enviar-email",{method:"POST",body:{holerite_id:a}})}catch(e){throw r.value=e.message||"Erro ao enviar holerite",e}finally{t.value=!1}},gerar13Salario:async a=>{t.value=!0,r.value=null;try{return await $fetch("/api/decimo-terceiro/gerar",{method:"POST",body:a})}catch(e){throw r.value=e.message||"Erro ao gerar 13º salário",e}finally{t.value=!1}}}};export{Q as _,W as u};
