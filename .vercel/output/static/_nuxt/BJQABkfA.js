import{d as at,a as lt,g as n,o as r,e as t,l as z,n as v,f as d,r as x,x as wt,G as kt,D as At,b as y,_ as Ct,p as f,t as l,h as a,i as b,v as I,F as E,k as $,z as N,j as ot}from"./BSA_tgdP.js";import{_ as Et}from"./BBzIiODl.js";import{_ as $t}from"./yUH5lwCE.js";import{_ as zt}from"./BaRlud3k.js";import{u as St,f as B,c as jt,r as Tt}from"./CnEUB9Be.js";const Dt={class:"flex items-center justify-center gap-1"},It=["title","disabled"],Nt=["title","disabled"],Vt=["title","disabled"],Ut=at({__name:"PontoActionButtons",props:{registro:{},disabled:{type:Boolean,default:!1},editTooltip:{default:"Editar registro"},deleteTooltip:{default:"Excluir registro"},showExtraAction:{type:Boolean,default:!1},extraActionIcon:{default:"heroicons:eye"},extraActionTooltip:{default:"Ação adicional"}},emits:["edit","delete","extraAction"],setup(m){return(S,w)=>{const k=lt("Icon");return r(),n("div",Dt,[t("button",{onClick:w[0]||(w[0]=P=>S.$emit("edit",m.registro)),class:v(["p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",{"opacity-50 cursor-not-allowed":m.disabled}]),title:m.editTooltip,disabled:m.disabled},[d(k,{name:"heroicons:pencil-square",size:"18"})],10,It),t("button",{onClick:w[1]||(w[1]=P=>S.$emit("delete",m.registro)),class:v(["p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",{"opacity-50 cursor-not-allowed":m.disabled}]),title:m.deleteTooltip,disabled:m.disabled},[d(k,{name:"heroicons:trash",size:"18"})],10,Nt),m.showExtraAction?(r(),n("button",{key:0,onClick:w[2]||(w[2]=P=>S.$emit("extraAction",m.registro)),class:v(["p-1.5 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",{"opacity-50 cursor-not-allowed":m.disabled}]),title:m.extraActionTooltip,disabled:m.disabled},[d(k,{name:m.extraActionIcon,size:"18"},null,8,["name"])],10,Vt)):z("",!0)])}}}),Ft=Object.assign(Ut,{__name:"PontoActionButtons"}),Rt={class:"min-h-screen bg-gray-50"},Mt={class:"bg-white border-b border-gray-200 sticky top-0 z-40"},Ht={class:"max-w-7xl mx-auto px-8 py-4"},Pt={class:"flex items-center justify-between"},Bt={class:"flex items-center gap-4"},Lt={class:"flex items-center gap-3"},Ot={class:"max-w-7xl mx-auto p-8"},qt={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},Jt={class:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm"},Gt={class:"flex items-center gap-3"},Zt={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},Qt={class:"text-xl font-bold text-gray-800"},Yt={class:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm"},Kt={class:"flex items-center gap-3"},Wt={class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"},Xt={class:"text-xl font-bold text-gray-800"},te={class:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm"},ee={class:"flex items-center gap-3"},se={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center"},oe={class:"text-xl font-bold text-gray-800"},ae={class:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm"},le={class:"flex items-center gap-3"},ne={class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},re={class:"text-xl font-bold text-gray-800"},de={class:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm"},ie={class:"flex items-center gap-3"},ue={class:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center"},ce={class:"text-xl font-bold text-gray-800 font-mono"},me={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-4 mb-6"},xe={class:"flex flex-wrap items-center gap-4"},pe={class:"flex items-center gap-2"},ge=["value"],be={class:"flex items-center gap-2"},ye=["value"],fe={class:"flex items-center gap-2"},ve=["value"],_e={class:"flex items-center gap-2"},he={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},we={class:"overflow-x-auto"},ke={class:"w-full"},Ae={class:"divide-y divide-gray-100"},Ce={key:0,class:"text-center"},Ee={colspan:"9",class:"px-4 py-12"},$e={key:1,class:"text-center"},ze={colspan:"9",class:"px-4 py-12"},Se={class:"px-4 py-3"},je={class:"flex items-center gap-3"},Te={class:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center"},De={class:"text-sm font-medium text-gray-800"},Ie={class:"text-xs text-gray-500"},Ne={class:"px-4 py-3"},Ve={class:"text-sm text-gray-800"},Ue={class:"text-xs text-gray-500"},Fe={class:"px-4 py-3 text-center"},Re={class:"flex flex-col items-center gap-1"},Me={key:0,class:"flex flex-wrap gap-1 justify-center max-w-[200px]"},He=["title"],Pe={class:"px-4 py-3 text-center"},Be={class:"px-4 py-3 text-center"},Le={key:0,class:"p-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-600"},Oe={class:"space-y-4"},qe={key:0},Je=["value"],Ge={key:1,class:"bg-gray-50 rounded-lg p-4"},Ze={class:"font-medium text-gray-800"},Qe={class:"text-sm text-gray-500"},Ye={key:2},Ke={class:"grid grid-cols-2 gap-4"},We={key:3,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Xe={class:"flex items-start gap-2"},ts={class:"flex-1"},es={class:"text-sm text-blue-800 font-mono mb-1"},ss={class:"text-sm text-blue-800 mb-2"},os={key:0,class:"space-y-1"},as={class:"mt-2"},ls={class:"text-xs text-blue-800 mt-2 whitespace-pre-wrap"},ns={class:"flex justify-end gap-3"},rs={class:"space-y-4"},ds={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},is={class:"flex items-start gap-2"},us={key:0,class:"text-center py-8"},cs={key:1,class:"space-y-3"},ms={class:"flex items-center justify-between"},xs={class:"flex-1"},ps={class:"flex items-center gap-3 mb-2"},gs={class:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center"},bs={class:"font-medium text-gray-800"},ys={class:"text-sm text-gray-500"},fs={class:"grid grid-cols-2 gap-4 text-sm"},vs={class:"font-medium"},_s={class:"font-medium"},hs={class:"font-medium font-mono text-xs"},ws={class:"font-medium"},ks={key:0,class:"mt-2"},As={class:"font-mono text-xs text-gray-600 break-all"},Cs={class:"flex flex-col gap-2 ml-4"},Es=["onClick"],$s=["onClick"],zs={class:"flex justify-end"},Ns=at({__name:"ponto",setup(m){const S=["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],w=["Domingo","Segunda","Terca","Quarta","Quinta","Sexta","Sabado"],k=new Date().getFullYear(),P=[k-1,k,k+1],L=x(!1),O=x(!1),j=x(!1),V=x(!1),T=x(!1),K=x(""),_=x([]),q=x([]),J=x([]),D=x(null),U=x({totalHoje:0,totalMes:0,pendentes:0,faltas:0}),c=x({mes:new Date().getMonth()+1,ano:k,colaboradorId:"",status:""}),i=x({colaborador_id:"",data:new Date().toISOString().split("T")[0],entrada_1:"",saida_1:"",entrada_2:"",saida_2:"",status:"Normal",justificativa:""}),A=x(null),{calcularHoras:F}=St(_);let G;wt(()=>{W(),G=kt(W,1e3),nt()}),At(()=>{G&&clearInterval(G)});const W=()=>{K.value=new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})},nt=async()=>{await Promise.all([C(),ut(),Q()])},rt=async()=>{await Z(),V.value=!0},Z=async()=>{try{J.value=await $fetch("/api/admin/assinaturas-ponto")}catch(o){console.error("Erro ao buscar assinaturas:",o)}},dt=async o=>{if(confirm(`Zerar assinatura de ${o.colaborador?.nome}?

Isso permitirá que o colaborador baixe novamente os últimos 30 dias de ponto.`))try{await $fetch(`/api/admin/assinaturas-ponto/${o.id}/zerar`,{method:"POST"}),await Z(),alert("Assinatura zerada com sucesso! O colaborador pode baixar o ponto novamente.")}catch(e){alert(e.data?.message||"Erro ao zerar assinatura")}},it=async o=>{if(confirm(`Excluir permanentemente a assinatura de ${o.colaborador?.nome}?`))try{await $fetch(`/api/admin/assinaturas-ponto/${o.id}`,{method:"DELETE"}),await Z(),alert("Assinatura excluída com sucesso!")}catch(e){alert(e.data?.message||"Erro ao excluir assinatura")}},C=async()=>{L.value=!0;try{const o=new URLSearchParams({mes:c.value.mes.toString(),ano:c.value.ano.toString()});c.value.colaboradorId&&o.append("colaborador_id",c.value.colaboradorId),c.value.status&&o.append("status",c.value.status),_.value=await $fetch(`/api/ponto?${o}`)}catch(o){console.error("Erro:",o)}finally{L.value=!1}},ut=async()=>{try{q.value=await $fetch("/api/colaboradores")}catch(o){console.error("Erro:",o)}},Q=async()=>{try{U.value=await $fetch("/api/ponto/stats")}catch(o){console.error("Erro:",o)}},ct=()=>{T.value=!1,D.value=null,i.value={colaborador_id:"",data:new Date().toISOString().split("T")[0],entrada_1:"",saida_1:"",entrada_2:"",saida_2:"",status:"Normal",justificativa:""},A.value=null,j.value=!0},mt=o=>{T.value=!0,D.value=o,i.value={colaborador_id:o.colaborador_id,data:o.data,entrada_1:o.entrada_1||"",saida_1:o.saida_1||"",entrada_2:o.entrada_2||"",saida_2:o.saida_2||"",status:o.status||"Normal",justificativa:o.justificativa||""},R(),j.value=!0},R=()=>{A.value=jt(i.value)},xt=async()=>{O.value=!0;try{T.value&&D.value?await $fetch(`/api/ponto/${D.value.id}`,{method:"PUT",body:i.value}):await $fetch("/api/ponto",{method:"POST",body:i.value}),j.value=!1,await C(),await Q()}catch(o){alert(o.data?.message||o.message||"Erro ao salvar")}finally{O.value=!1}},pt=async o=>{if(confirm(`Excluir registro de ${o.colaborador?.nome}?`))try{await $fetch(`/api/ponto/${o.id}`,{method:"DELETE"});const e=_.value.findIndex(u=>u.id===o.id);e>-1&&_.value.splice(e,1),await Promise.all([C(),Q()]),alert("Registro excluído com sucesso!")}catch(e){console.error("Erro ao excluir registro:",e),alert(e.data?.message||e.message||"Erro ao excluir registro"),await C()}},gt=()=>{const o=["Colaborador","Data","Entrada","Saida Int.","Retorno","Saida","Horas","Status"],e=_.value.map(g=>[g.colaborador?.nome||"",M(g.data),g.entrada_1||"",g.saida_1||"",g.entrada_2||"",g.saida_2||"",tt(g),g.status||"Normal"]),u=[o.join(";"),...e.map(g=>g.join(";"))].join(`
`),H=new Blob(["\uFEFF"+u],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(H),p.download=`ponto_${S[c.value.mes-1]}_${c.value.ano}.csv`,p.click()},X=o=>F(o).totalMinutos/60,tt=o=>F(o).horasFormatadas,et=o=>F(o).avisos,bt=o=>F(o).detalhes,Y=o=>Tt(o),yt=()=>{let o=0;_.value.forEach(H=>{const p=F(H);o+=p.totalMinutos});const e=Math.floor(o/60),u=o%60;return`${e}h ${u}min`},M=o=>o?new Date(o+"T00:00:00").toLocaleDateString("pt-BR"):"-",ft=o=>o?w[new Date(o+"T00:00:00").getDay()]:"",vt=o=>({Normal:"bg-green-100 text-green-700",Falta:"bg-red-100 text-red-700",Atestado:"bg-blue-100 text-blue-700",Ferias:"bg-amber-100 text-amber-700",Folga:"bg-purple-100 text-purple-700",Ajustado:"bg-gray-100 text-gray-700"})[o]||"bg-gray-100 text-gray-700";return(o,e)=>{const u=lt("Icon"),H=Ct,p=Et,g=$t,_t=Ft,st=zt;return r(),n("div",Rt,[t("header",Mt,[t("div",Ht,[t("div",Pt,[t("div",Bt,[d(H,{to:"/admin",class:"w-10 h-10 bg-red-700 rounded-lg flex items-center justify-center hover:bg-red-800 transition-colors"},{default:y(()=>[d(u,{name:"heroicons:arrow-left",class:"text-white",size:"20"})]),_:1}),e[16]||(e[16]=t("div",null,[t("h1",{class:"text-xl font-bold text-gray-800"},"Ponto Eletronico"),t("p",{class:"text-sm text-gray-500"},"Gestao de registros de ponto")],-1))]),t("div",Lt,[d(p,{variant:"outline","icon-left":"heroicons:arrow-down-tray",size:"sm",onClick:gt},{default:y(()=>[...e[17]||(e[17]=[f("Exportar",-1)])]),_:1}),d(p,{variant:"outline","icon-left":"heroicons:document-text",size:"sm",onClick:rt},{default:y(()=>[...e[18]||(e[18]=[f("Assinaturas",-1)])]),_:1}),d(p,{"icon-left":"heroicons:plus",size:"sm",onClick:ct},{default:y(()=>[...e[19]||(e[19]=[f("Novo Registro",-1)])]),_:1}),d(g,{theme:"admin"})])])])]),t("div",Ot,[t("div",qt,[t("div",Jt,[t("div",Gt,[t("div",Zt,[d(u,{name:"heroicons:users",class:"text-blue-600",size:"20"})]),t("div",null,[e[20]||(e[20]=t("p",{class:"text-xs text-gray-500"},"Registros Hoje",-1)),t("p",Qt,l(a(U).totalHoje),1)])])]),t("div",Yt,[t("div",Kt,[t("div",Wt,[d(u,{name:"heroicons:calendar",class:"text-green-600",size:"20"})]),t("div",null,[e[21]||(e[21]=t("p",{class:"text-xs text-gray-500"},"Total do Mes",-1)),t("p",Xt,l(a(U).totalMes),1)])])]),t("div",te,[t("div",ee,[t("div",se,[d(u,{name:"heroicons:exclamation-triangle",class:"text-amber-600",size:"20"})]),t("div",null,[e[22]||(e[22]=t("p",{class:"text-xs text-gray-500"},"Pendentes",-1)),t("p",oe,l(a(U).pendentes),1)])])]),t("div",ae,[t("div",le,[t("div",ne,[d(u,{name:"heroicons:x-circle",class:"text-red-600",size:"20"})]),t("div",null,[e[23]||(e[23]=t("p",{class:"text-xs text-gray-500"},"Faltas",-1)),t("p",re,l(a(U).faltas||0),1)])])]),t("div",de,[t("div",ie,[t("div",ue,[d(u,{name:"heroicons:clock",class:"text-purple-600",size:"20"})]),t("div",null,[e[24]||(e[24]=t("p",{class:"text-xs text-gray-500"},"Hora Atual",-1)),t("p",ce,l(a(K)),1)])])])]),t("div",me,[t("div",xe,[t("div",pe,[e[25]||(e[25]=t("label",{class:"text-sm text-gray-600"},"Mes:",-1)),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a(c).mes=s),onChange:C,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},[(r(),n(E,null,$(12,s=>t("option",{key:s,value:s},l(S[s-1]),9,ge)),64))],544),[[I,a(c).mes]])]),t("div",be,[e[26]||(e[26]=t("label",{class:"text-sm text-gray-600"},"Ano:",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a(c).ano=s),onChange:C,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},[(r(),n(E,null,$(P,s=>t("option",{key:s,value:s},l(s),9,ye)),64))],544),[[I,a(c).ano]])]),t("div",fe,[e[28]||(e[28]=t("label",{class:"text-sm text-gray-600"},"Colaborador:",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a(c).colaboradorId=s),onChange:C,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm min-w-[200px]"},[e[27]||(e[27]=t("option",{value:""},"Todos",-1)),(r(!0),n(E,null,$(a(q),s=>(r(),n("option",{key:s.id,value:s.id},l(s.nome),9,ve))),128))],544),[[I,a(c).colaboradorId]])]),t("div",_e,[e[30]||(e[30]=t("label",{class:"text-sm text-gray-600"},"Status:",-1)),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a(c).status=s),onChange:C,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},[...e[29]||(e[29]=[t("option",{value:""},"Todos",-1),t("option",{value:"Normal"},"Normal",-1),t("option",{value:"Falta"},"Falta",-1),t("option",{value:"Atestado"},"Atestado",-1)])],544),[[I,a(c).status]])])])]),t("div",he,[t("div",we,[t("table",ke,[e[33]||(e[33]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"},"Colaborador"),t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase"},"Data"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Entrada"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Intervalo Entrada"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Intervalo Saida"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Saida"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Horas"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Status"),t("th",{class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase"},"Acoes")])],-1)),t("tbody",Ae,[a(L)?(r(),n("tr",Ce,[t("td",Ee,[d(u,{name:"heroicons:arrow-path",class:"animate-spin text-gray-400 mx-auto",size:"32"}),e[31]||(e[31]=t("p",{class:"text-gray-500 mt-2"},"Carregando...",-1))])])):a(_).length===0?(r(),n("tr",$e,[t("td",ze,[d(u,{name:"heroicons:clock",class:"text-gray-300 mx-auto",size:"48"}),e[32]||(e[32]=t("p",{class:"text-gray-500 mt-2"},"Nenhum registro encontrado",-1))])])):z("",!0),(r(!0),n(E,null,$(a(_),s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Se,[t("div",je,[t("div",Te,[d(u,{name:"heroicons:user",class:"text-gray-500",size:"16"})]),t("div",null,[t("p",De,l(s.colaborador?.nome||"N/A"),1),t("p",Ie,l(s.colaborador?.departamento?.nome||""),1)])])]),t("td",Ne,[t("p",Ve,l(M(s.data)),1),t("p",Ue,l(ft(s.data)),1)]),t("td",{class:v(["px-4 py-3 text-center text-sm font-mono",s.entrada_1?"text-green-600 font-medium":"text-gray-300"])},l(a(B)(s.entrada_1)),3),t("td",{class:v(["px-4 py-3 text-center text-sm font-mono",s.saida_1?"text-amber-600":"text-gray-300"])},l(a(B)(s.saida_1)),3),t("td",{class:v(["px-4 py-3 text-center text-sm font-mono",s.entrada_2?"text-blue-600":"text-gray-300"])},l(a(B)(s.entrada_2)),3),t("td",{class:v(["px-4 py-3 text-center text-sm font-mono",s.saida_2?"text-red-600 font-medium":"text-gray-300"])},l(a(B)(s.saida_2)),3),t("td",Fe,[t("div",Re,[t("span",{class:v(["text-sm font-mono font-medium",{"text-green-600 animate-pulse":Y(s),"text-green-600":!Y(s)&&X(s)>=8,"text-gray-600":!Y(s)&&X(s)<8}])},l(tt(s)),3),et(s).length>0?(r(),n("div",Me,[(r(!0),n(E,null,$(et(s),(h,ht)=>(r(),n("span",{key:ht,class:v(["text-xs px-2 py-0.5 rounded-full cursor-help",{"bg-green-100 text-green-700":h.includes("⏱️"),"bg-amber-100 text-amber-700":h.includes("⚠️"),"bg-blue-100 text-blue-700":h.includes("ℹ️"),"bg-red-100 text-red-700":h.includes("❌")}]),title:bt(s)},l(h),11,He))),128))])):z("",!0)])]),t("td",Pe,[t("span",{class:v(["px-2 py-1 text-xs font-medium rounded-full",vt(s.status)])},l(s.status||"Normal"),3)]),t("td",Be,[d(_t,{registro:s,onEdit:mt,onDelete:pt},null,8,["registro"])])]))),128))])])]),a(_).length>0?(r(),n("div",Le,[t("span",null,l(a(_).length)+" registro(s)",1),t("span",null,[e[34]||(e[34]=f("Total: ",-1)),t("strong",null,l(yt()),1)])])):z("",!0)])]),d(st,{modelValue:a(j),"onUpdate:modelValue":e[13]||(e[13]=s=>ot(j)?j.value=s:null),title:a(T)?"Editar Registro":"Novo Registro",size:"md"},{footer:y(()=>[t("div",ns,[d(p,{variant:"outline",onClick:e[12]||(e[12]=s=>j.value=!1)},{default:y(()=>[...e[51]||(e[51]=[f("Cancelar",-1)])]),_:1}),d(p,{onClick:xt,loading:a(O)},{default:y(()=>[f(l(a(T)?"Salvar":"Criar"),1)]),_:1},8,["loading"])])]),default:y(()=>[t("div",Oe,[a(T)?(r(),n("div",Ge,[t("p",Ze,l(a(D)?.colaborador?.nome),1),t("p",Qe,l(M(a(D)?.data)),1)])):(r(),n("div",qe,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Colaborador *",-1)),b(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>a(i).colaborador_id=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},[e[35]||(e[35]=t("option",{value:""},"Selecione...",-1)),(r(!0),n(E,null,$(a(q),s=>(r(),n("option",{key:s.id,value:s.id},l(s.nome),9,Je))),128))],512),[[I,a(i).colaborador_id]])])),a(T)?z("",!0):(r(),n("div",Ye,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Data *",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=s=>a(i).data=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,512),[[N,a(i).data]])])),t("div",Ke,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Entrada",-1)),b(t("input",{type:"time","onUpdate:modelValue":e[6]||(e[6]=s=>a(i).entrada_1=s),onChange:R,class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,544),[[N,a(i).entrada_1]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Saida Int.",-1)),b(t("input",{type:"time","onUpdate:modelValue":e[7]||(e[7]=s=>a(i).saida_1=s),onChange:R,class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,544),[[N,a(i).saida_1]]),e[40]||(e[40]=t("p",{class:"text-xs text-gray-500 mt-1"},"Horário de saída para intervalo",-1))]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Retorno",-1)),b(t("input",{type:"time","onUpdate:modelValue":e[8]||(e[8]=s=>a(i).entrada_2=s),onChange:R,class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,544),[[N,a(i).entrada_2]]),e[42]||(e[42]=t("p",{class:"text-xs text-gray-500 mt-1"},"Horário de retorno do intervalo",-1))]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Saida",-1)),b(t("input",{type:"time","onUpdate:modelValue":e[9]||(e[9]=s=>a(i).saida_2=s),onChange:R,class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,544),[[N,a(i).saida_2]])])]),a(A)?(r(),n("div",We,[t("div",Xe,[d(u,{name:"heroicons:information-circle",class:"text-blue-600 mt-0.5",size:"20"}),t("div",ts,[e[47]||(e[47]=t("p",{class:"text-sm font-medium text-blue-900 mb-2"},"Preview do Cálculo:",-1)),t("p",es,[e[44]||(e[44]=t("strong",null,"Horas Trabalhadas:",-1)),f(" "+l(a(A).horasFormatadas),1)]),t("p",ss,[e[45]||(e[45]=t("strong",null,"Intervalo:",-1)),f(" "+l(a(A).intervaloFormatado),1)]),a(A).avisos.length>0?(r(),n("div",os,[(r(!0),n(E,null,$(a(A).avisos,(s,h)=>(r(),n("p",{key:h,class:v(["text-xs px-2 py-1 rounded",{"bg-amber-100 text-amber-800":s.includes("⚠️"),"bg-blue-100 text-blue-800":s.includes("ℹ️"),"bg-red-100 text-red-800":s.includes("❌")}])},l(s),3))),128))])):z("",!0),t("details",as,[e[46]||(e[46]=t("summary",{class:"text-xs text-blue-700 cursor-pointer hover:text-blue-800"},"Ver detalhes do cálculo",-1)),t("pre",ls,l(a(A).detalhes),1)])])])])):z("",!0),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>a(i).status=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},[...e[48]||(e[48]=[t("option",{value:"Normal"},"Normal",-1),t("option",{value:"Falta"},"Falta",-1),t("option",{value:"Atestado"},"Atestado",-1),t("option",{value:"Ajustado"},"Ajustado",-1)])],512),[[I,a(i).status]])]),t("div",null,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Justificativa",-1)),b(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>a(i).justificativa=s),rows:"2",class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,512),[[N,a(i).justificativa]])])])]),_:1},8,["modelValue","title"]),d(st,{modelValue:a(V),"onUpdate:modelValue":e[15]||(e[15]=s=>ot(V)?V.value=s:null),title:"Gerenciar Assinaturas de Ponto",size:"lg"},{footer:y(()=>[t("div",zs,[d(p,{variant:"outline",onClick:e[14]||(e[14]=s=>V.value=!1)},{default:y(()=>[...e[61]||(e[61]=[f("Fechar",-1)])]),_:1})])]),default:y(()=>[t("div",rs,[t("div",ds,[t("div",is,[d(u,{name:"heroicons:information-circle",class:"text-blue-600 mt-0.5",size:"20"}),e[52]||(e[52]=t("div",null,[t("p",{class:"text-sm font-medium text-blue-900 mb-1"},"Como funciona:"),t("ul",{class:"text-sm text-blue-800 space-y-1"},[t("li",null,"• Colaboradores podem baixar ponto dos últimos 30 dias"),t("li",null,"• Após assinar, o histórico fica bloqueado até o próximo período"),t("li",null,"• Você pode zerar a assinatura para liberar novo download"),t("li",null,"• Útil quando colaborador assina antes do prazo (ex: dia 20 ao invés do dia 5)")])],-1))])]),a(J).length===0?(r(),n("div",us,[d(u,{name:"heroicons:document-text",class:"text-gray-300 mx-auto mb-2",size:"48"}),e[53]||(e[53]=t("p",{class:"text-gray-500"},"Nenhuma assinatura encontrada",-1))])):(r(),n("div",cs,[(r(!0),n(E,null,$(a(J),s=>(r(),n("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4"},[t("div",ms,[t("div",xs,[t("div",ps,[t("div",gs,[d(u,{name:"heroicons:user",class:"text-gray-500",size:"20"})]),t("div",null,[t("p",bs,l(s.colaborador?.nome||"N/A"),1),t("p",ys,l(s.colaborador?.departamento?.nome||""),1)])]),t("div",fs,[t("div",null,[e[54]||(e[54]=t("span",{class:"text-gray-500"},"Data da Assinatura:",-1)),t("p",vs,l(M(s.data_assinatura)),1)]),t("div",null,[e[55]||(e[55]=t("span",{class:"text-gray-500"},"Período:",-1)),t("p",_s,l(S[s.mes-1])+"/"+l(s.ano),1)]),t("div",null,[e[56]||(e[56]=t("span",{class:"text-gray-500"},"IP:",-1)),t("p",hs,l(s.ip_assinatura||"N/A"),1)]),t("div",null,[e[57]||(e[57]=t("span",{class:"text-gray-500"},"Criado em:",-1)),t("p",ws,l(M(s.created_at)),1)])]),s.hash_assinatura?(r(),n("div",ks,[e[58]||(e[58]=t("span",{class:"text-gray-500 text-sm"},"Hash:",-1)),t("p",As,l(s.hash_assinatura),1)])):z("",!0)]),t("div",Cs,[t("button",{onClick:h=>dt(s),class:"px-3 py-1.5 text-sm bg-amber-100 text-amber-700 hover:bg-amber-200 rounded-lg transition-colors",title:"Zerar assinatura - permite novo download"},[d(u,{name:"heroicons:arrow-path",size:"16",class:"inline mr-1"}),e[59]||(e[59]=f(" Zerar ",-1))],8,Es),t("button",{onClick:h=>it(s),class:"px-3 py-1.5 text-sm bg-red-100 text-red-700 hover:bg-red-200 rounded-lg transition-colors",title:"Excluir assinatura permanentemente"},[d(u,{name:"heroicons:trash",size:"16",class:"inline mr-1"}),e[60]||(e[60]=f(" Excluir ",-1))],8,$s)])])]))),128))]))])]),_:1},8,["modelValue"])])}}});export{Ns as default};
