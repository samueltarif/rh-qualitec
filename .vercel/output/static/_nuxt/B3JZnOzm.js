import{d as G,s as D,j as Y,f as _,o as r,b as e,l as U,e as o,n as E,g as a,t as f,a as w,p as M,c as N,H as W,r as A,F as T,k as q,w as te,i as B,y as se,x as Ue,_ as De}from"./Cx4dxf1F.js";import{_ as K}from"./Cu_3WJXs.js";import{_ as Ie}from"./CYmwnrxE.js";import{_ as ze}from"./DdHoQwEO.js";import{_ as Fe}from"./DSLr-VwE.js";import{_ as ne}from"./CL2Zebya.js";import{_ as Ee}from"./C51k3FtR.js";import{_ as Me}from"./B8uUryTy.js";import{_ as ie}from"./LFDSo-VX.js";import{_ as le}from"./B5MbgKNA.js";import{_ as Pe}from"./V9NGorsn.js";import{_ as re}from"./CvMvux9H.js";import{_ as de}from"./Cw75NqVn.js";const Ne={class:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow"},Re={class:"flex items-start justify-between mb-3"},Be={class:"flex items-center gap-3"},Te={class:"font-semibold text-gray-800"},qe={class:"text-sm text-gray-500"},Le={class:"space-y-2 mb-4"},Oe={class:"flex items-center gap-2 text-sm text-gray-600"},Ge={class:"flex items-center gap-2 text-sm text-gray-600"},Ye={class:"flex items-center gap-2 text-sm text-gray-600"},He={key:0,class:"flex flex-wrap gap-2 mb-4"},Je={key:0,class:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full"},Qe={key:1,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full"},Ke={key:1,class:"bg-red-50 rounded-lg p-3 mb-4"},We={class:"text-sm text-red-700"},Xe={class:"flex gap-2 pt-4 border-t border-gray-100"},Ze=G({__name:"FeriasSolicitacaoCard",props:{solicitacao:{},showApprovalActions:{type:Boolean,default:!1},showEditAction:{type:Boolean,default:!1},showCancelAction:{type:Boolean,default:!1}},emits:["aprovar","rejeitar","detalhes","editar","cancelar"],setup(t){const V=t,u=D(()=>({pendente:"warning",aprovada:"success",rejeitada:"danger",cancelada:"default",em_gozo:"info",concluida:"success"})[V.solicitacao.status]||"default"),v=D(()=>({pendente:"Pendente",aprovada:"Aprovada",rejeitada:"Rejeitada",cancelada:"Cancelada",em_gozo:"Em Gozo",concluida:"Concluída"})[V.solicitacao.status]||V.solicitacao.status),b=D(()=>({normal:"Normal",fracionada:"Fracionada",abono_pecuniario:"Com Abono Pecuniário",coletiva:"Coletiva"})[V.solicitacao.tipo]||"Normal"),p=D(()=>({pendente:"bg-amber-100",aprovada:"bg-green-100",rejeitada:"bg-red-100",cancelada:"bg-gray-100",em_gozo:"bg-blue-100",concluida:"bg-green-100"})[V.solicitacao.status]||"bg-gray-100"),$=D(()=>({pendente:"text-amber-600",aprovada:"text-green-600",rejeitada:"text-red-600",cancelada:"text-gray-600",em_gozo:"text-blue-600",concluida:"text-green-600"})[V.solicitacao.status]||"text-gray-600"),d=S=>S?new Date(S).toLocaleDateString("pt-BR"):"-";return(S,j)=>{const I=Y("Icon"),F=Me,C=K;return r(),_("div",Ne,[e("div",Re,[e("div",Be,[e("div",{class:E(["w-10 h-10 rounded-full flex items-center justify-center",a(p)])},[o(I,{name:"heroicons:user",class:E(a($)),size:"20"},null,8,["class"])],2),e("div",null,[e("h4",Te,f(t.solicitacao.colaborador_nome),1),e("p",qe,f(t.solicitacao.cargo||"Colaborador"),1)])]),o(F,{variant:a(u)},{default:w(()=>[M(f(a(v)),1)]),_:1},8,["variant"])]),e("div",Le,[e("div",Oe,[o(I,{name:"heroicons:calendar",size:"16",class:"text-gray-400"}),e("span",null,f(d(t.solicitacao.data_inicio))+" a "+f(d(t.solicitacao.data_fim)),1)]),e("div",Ge,[o(I,{name:"heroicons:clock",size:"16",class:"text-gray-400"}),e("span",null,f(t.solicitacao.dias_solicitados)+" dias",1)]),e("div",Ye,[o(I,{name:"heroicons:tag",size:"16",class:"text-gray-400"}),e("span",null,f(a(b)),1)])]),t.solicitacao.vender_dias||t.solicitacao.adiantamento_13?(r(),_("div",He,[t.solicitacao.vender_dias?(r(),_("span",Je," Venda "+f(t.solicitacao.dias_venda)+" dias ",1)):U("",!0),t.solicitacao.adiantamento_13?(r(),_("span",Qe," Adiant. 13º ")):U("",!0)])):U("",!0),t.solicitacao.status==="rejeitada"&&t.solicitacao.motivo_rejeicao?(r(),_("div",Ke,[j[5]||(j[5]=e("p",{class:"text-xs text-red-600 font-medium mb-1"},"Motivo da rejeição:",-1)),e("p",We,f(t.solicitacao.motivo_rejeicao),1)])):U("",!0),e("div",Xe,[t.solicitacao.status==="pendente"&&t.showApprovalActions?(r(),N(C,{key:0,theme:"admin",variant:"success",size:"sm",onClick:j[0]||(j[0]=c=>S.$emit("aprovar",t.solicitacao))},{default:w(()=>[o(I,{name:"heroicons:check",size:"16"})]),_:1})):U("",!0),t.solicitacao.status==="pendente"&&t.showApprovalActions?(r(),N(C,{key:1,theme:"admin",variant:"danger",size:"sm",onClick:j[1]||(j[1]=c=>S.$emit("rejeitar",t.solicitacao))},{default:w(()=>[o(I,{name:"heroicons:x-mark",size:"16"})]),_:1})):U("",!0),o(C,{theme:"admin",variant:"ghost",size:"sm",onClick:j[2]||(j[2]=c=>S.$emit("detalhes",t.solicitacao))},{default:w(()=>[o(I,{name:"heroicons:eye",size:"16"})]),_:1}),t.solicitacao.status==="pendente"&&t.showEditAction?(r(),N(C,{key:2,theme:"admin",variant:"ghost",size:"sm",onClick:j[3]||(j[3]=c=>S.$emit("editar",t.solicitacao))},{default:w(()=>[o(I,{name:"heroicons:pencil",size:"16"})]),_:1})):U("",!0),t.solicitacao.status==="pendente"&&t.showCancelAction?(r(),N(C,{key:3,theme:"admin",variant:"ghost",size:"sm",onClick:j[4]||(j[4]=c=>S.$emit("cancelar",t.solicitacao))},{default:w(()=>[o(I,{name:"heroicons:trash",size:"16",class:"text-red-500"})]),_:1})):U("",!0)])])}}}),ea=Object.assign(Ze,{__name:"FeriasSolicitacaoCard"}),aa={key:0,class:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 sm:gap-4 mb-3 sm:mb-4"},oa={class:"flex items-center gap-2 sm:gap-3"},ta={class:"min-w-0"},sa={class:"text-base sm:text-lg font-bold text-gray-800 truncate"},na={key:0,class:"text-xs sm:text-sm text-gray-500 truncate"},ia={class:"flex-shrink-0"},la=G({__name:"UICard",props:{title:{},subtitle:{},icon:{},variant:{default:"default"},padding:{default:"md"},iconColor:{default:"red"}},setup(t){const V=t,u=D(()=>{const p="bg-white rounded-lg sm:rounded-xl",$={default:"border border-gray-200",bordered:"border-2 border-gray-300",elevated:"shadow-lg"},d={none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-6",lg:"p-5 sm:p-8"};return[p,$[V.variant],d[V.padding]].join(" ")}),v=D(()=>`w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${{red:"bg-red-100",blue:"bg-blue-100",green:"bg-green-100",amber:"bg-amber-100",gray:"bg-gray-100"}[V.iconColor]}`),b=D(()=>({red:"text-red-600",blue:"text-blue-600",green:"text-green-600",amber:"text-amber-600",gray:"text-gray-600"})[V.iconColor]);return(p,$)=>{const d=Y("Icon");return r(),_("div",{class:E(a(u))},[t.title||p.$slots.header?(r(),_("div",aa,[W(p.$slots,"header",{},()=>[e("div",oa,[t.icon?(r(),_("div",{key:0,class:E(a(v))},[o(d,{name:t.icon,class:E([a(b),"w-5 h-5 sm:w-6 sm:h-6"])},null,8,["name","class"])],2)):U("",!0),e("div",ta,[e("h3",sa,f(t.title),1),t.subtitle?(r(),_("p",na,f(t.subtitle),1)):U("",!0)])])]),e("div",ia,[W(p.$slots,"actions")])])):U("",!0),W(p.$slots,"default")],2)}}}),ce=Object.assign(la,{__name:"UICard"}),ra={class:"flex items-center gap-2"},da={class:"text-sm font-semibold text-gray-700 min-w-[140px] text-center"},ca={class:"mt-4"},ua={class:"grid grid-cols-7 gap-1 mb-2"},ma={class:"grid grid-cols-7 gap-1"},va={class:"flex items-center justify-between"},pa={key:0,class:"mt-1"},fa=["title"],_a={key:0,class:"text-xs text-gray-500 px-1"},ga=G({__name:"FeriasCalendario",props:{ferias:{default:()=>[]}},setup(t){const V=t,u=A(new Date().getMonth()),v=A(new Date().getFullYear()),b=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],p=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],$=D(()=>p[u.value]),d=D(()=>{const F=new Date(v.value,u.value,1),c=new Date(v.value,u.value+1,0).getDate(),z=F.getDay(),x=[],n=new Date(v.value,u.value,0).getDate();for(let k=z-1;k>=0;k--)x.push({numero:n-k,mesAtual:!1,hoje:!1,ferias:null});const s=new Date;for(let k=1;k<=c;k++){const P=new Date(v.value,u.value,k),R=V.ferias.filter(h=>{const H=new Date(h.data_inicio),y=new Date(h.data_fim);return P>=H&&P<=y}).map(h=>({id:h.id,colaborador:h.colaborador,status:h.status}));x.push({numero:k,mesAtual:!0,hoje:s.getDate()===k&&s.getMonth()===u.value&&s.getFullYear()===v.value,ferias:R.length>0?R:null})}const l=42-x.length;for(let k=1;k<=l;k++)x.push({numero:k,mesAtual:!1,hoje:!1,ferias:null});return x}),S=()=>{u.value===0?(u.value=11,v.value--):u.value--},j=()=>{u.value===11?(u.value=0,v.value++):u.value++},I=F=>{const C={pendente:"bg-amber-200 text-amber-800",aprovada:"bg-green-200 text-green-800",em_gozo:"bg-blue-200 text-blue-800",concluida:"bg-gray-200 text-gray-800",rejeitada:"bg-red-200 text-red-800"};return C[F]||C.pendente};return(F,C)=>{const c=Y("Icon"),z=K,x=ce;return r(),N(x,{title:"Calendário de Férias",icon:"heroicons:calendar-days","icon-color":"amber"},{actions:w(()=>[e("div",ra,[o(z,{theme:"admin",variant:"ghost",size:"sm",onClick:S},{default:w(()=>[o(c,{name:"heroicons:chevron-left",size:"20"})]),_:1}),e("span",da,f(a($))+" "+f(a(v)),1),o(z,{theme:"admin",variant:"ghost",size:"sm",onClick:j},{default:w(()=>[o(c,{name:"heroicons:chevron-right",size:"20"})]),_:1})])]),default:w(()=>[e("div",ca,[e("div",ua,[(r(),_(T,null,q(b,n=>e("div",{key:n,class:"text-center text-xs font-semibold text-gray-500 py-2"},f(n),1)),64))]),e("div",ma,[(r(!0),_(T,null,q(a(d),(n,s)=>(r(),_("div",{key:s,class:E(["min-h-[60px] p-1 rounded-lg text-sm border transition-colors",n.mesAtual?"bg-white border-gray-200":"bg-gray-50 border-transparent",n.hoje&&"ring-2 ring-red-500",n.ferias&&"bg-amber-50 border-amber-200"])},[e("div",va,[e("span",{class:E(["text-xs font-medium",n.mesAtual?"text-gray-700":"text-gray-400",n.hoje&&"text-red-600 font-bold"])},f(n.numero),3)]),n.ferias?(r(),_("div",pa,[(r(!0),_(T,null,q(n.ferias.slice(0,2),l=>(r(),_("div",{key:l.id,class:E(["text-xs truncate px-1 py-0.5 rounded mb-0.5",I(l.status)]),title:l.colaborador},f(l.colaborador.split(" ")[0]),11,fa))),128)),n.ferias.length>2?(r(),_("div",_a," +"+f(n.ferias.length-2)+" mais ",1)):U("",!0)])):U("",!0)],2))),128))]),C[0]||(C[0]=e("div",{class:"flex flex-wrap gap-4 mt-4 pt-4 border-t border-gray-200"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 rounded bg-amber-200"}),e("span",{class:"text-xs text-gray-600"},"Pendente")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 rounded bg-green-200"}),e("span",{class:"text-xs text-gray-600"},"Aprovada")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 rounded bg-blue-200"}),e("span",{class:"text-xs text-gray-600"},"Em Gozo")])],-1))])]),_:1})}}}),ba=Object.assign(ga,{__name:"FeriasCalendario"}),xa={class:"flex gap-1 border-b border-gray-200 overflow-x-auto"},ya=["onClick"],ha={class:"pt-6"},wa=G({__name:"UITabs",props:{modelValue:{},tabs:{}},emits:["update:modelValue"],setup(t){return(V,u)=>{const v=Y("Icon");return r(),_("div",null,[e("div",xa,[(r(!0),_(T,null,q(t.tabs,b=>(r(),_("button",{key:b.id,type:"button",class:E(["px-4 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors -mb-px flex items-center gap-2",t.modelValue===b.id?"border-red-700 text-red-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:p=>V.$emit("update:modelValue",b.id)},[b.icon?(r(),N(v,{key:0,name:b.icon,size:"18"},null,8,["name"])):U("",!0),M(" "+f(b.label)+" ",1),b.count!==void 0&&b.count>0?(r(),_("span",{key:1,class:E(["px-2 py-0.5 text-xs rounded-full",t.modelValue===b.id?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"])},f(b.count),3)):U("",!0)],10,ya))),128))]),e("div",ha,[W(V.$slots,t.modelValue)])])}}}),Va=Object.assign(wa,{__name:"UITabs"}),$a={class:"space-y-6"},Ca=["value"],ka=["value"],ja={class:"grid grid-cols-2 gap-4"},Sa={class:"bg-gray-50 rounded-lg p-4"},Aa={class:"flex items-center justify-between"},Ua={class:"text-lg font-bold text-gray-800"},Da={class:"space-y-3"},Ia={key:0,class:"ml-8"},za={class:"flex gap-3 mt-8 pt-6 border-t border-gray-200"},Fa=G({__name:"FeriasSolicitacaoModal",props:{modelValue:{type:Boolean},solicitacao:{default:null},colaboradores:{},periodos:{}},emits:["update:modelValue","submit"],setup(t,{emit:V}){const u=t,v=V,b=A(!1),p=D({get:()=>u.modelValue,set:x=>v("update:modelValue",x)}),$=D(()=>!!u.solicitacao?.id),d=A({colaborador_id:"",periodo_aquisitivo_id:"",tipo:"normal",data_inicio:"",data_fim:"",vender_dias:!1,dias_venda:0,adiantamento_13:!1,observacoes:""}),S=D(()=>{const x=new Date;return x.setDate(x.getDate()+30),x.toISOString().split("T")[0]}),j=()=>{d.value={colaborador_id:"",periodo_aquisitivo_id:"",tipo:"normal",data_inicio:"",data_fim:"",vender_dias:!1,dias_venda:0,adiantamento_13:!1,observacoes:""}},I=D(()=>d.value.colaborador_id?u.periodos.filter(x=>x.dias_saldo>0):u.periodos),F=D(()=>{if(!d.value.data_inicio||!d.value.data_fim)return 0;const x=new Date(d.value.data_inicio),n=new Date(d.value.data_fim),s=Math.ceil((n.getTime()-x.getTime())/(1e3*60*60*24))+1;return s>0?s:0}),C=x=>new Date(x).toLocaleDateString("pt-BR"),c=()=>{v("update:modelValue",!1),j()},z=async()=>{b.value=!0;try{v("submit",{...d.value,dias_solicitados:F.value})}finally{b.value=!1}};return te(()=>u.solicitacao,x=>{x?d.value={...x}:j()},{immediate:!0}),(x,n)=>{const s=ne,l=Pe,k=le,P=ie,R=re,h=K,H=de;return r(),N(H,{modelValue:a(p),"onUpdate:modelValue":n[9]||(n[9]=y=>B(p)?p.value=y:null),title:a($)?"Editar Solicitação":"Nova Solicitação de Férias",size:"lg"},{default:w(()=>[e("form",{onSubmit:se(z,["prevent"])},[e("div",$a,[o(s,{modelValue:a(d).colaborador_id,"onUpdate:modelValue":n[0]||(n[0]=y=>a(d).colaborador_id=y),label:"Colaborador",placeholder:"Selecione o colaborador","icon-left":"heroicons:user",required:"",disabled:a($)},{default:w(()=>[(r(!0),_(T,null,q(t.colaboradores,y=>(r(),_("option",{key:y.id,value:y.id},f(y.nome),9,Ca))),128))]),_:1},8,["modelValue","disabled"]),o(s,{modelValue:a(d).periodo_aquisitivo_id,"onUpdate:modelValue":n[1]||(n[1]=y=>a(d).periodo_aquisitivo_id=y),label:"Período Aquisitivo",placeholder:"Selecione o período","icon-left":"heroicons:calendar"},{default:w(()=>[(r(!0),_(T,null,q(a(I),y=>(r(),_("option",{key:y.id,value:y.id},f(C(y.data_inicio))+" a "+f(C(y.data_fim))+" - Saldo: "+f(y.dias_saldo)+" dias ",9,ka))),128))]),_:1},8,["modelValue"]),o(s,{modelValue:a(d).tipo,"onUpdate:modelValue":n[2]||(n[2]=y=>a(d).tipo=y),label:"Tipo de Férias","icon-left":"heroicons:tag",required:""},{default:w(()=>[...n[10]||(n[10]=[e("option",{value:"normal"},"Normal (30 dias)",-1),e("option",{value:"fracionada"},"Fracionada",-1),e("option",{value:"abono_pecuniario"},"Com Abono Pecuniário",-1),e("option",{value:"coletiva"},"Coletiva",-1)])]),_:1},8,["modelValue"]),e("div",ja,[o(l,{modelValue:a(d).data_inicio,"onUpdate:modelValue":n[3]||(n[3]=y=>a(d).data_inicio=y),label:"Data Início",min:a(S),required:""},null,8,["modelValue","min"]),o(l,{modelValue:a(d).data_fim,"onUpdate:modelValue":n[4]||(n[4]=y=>a(d).data_fim=y),label:"Data Fim",min:a(d).data_inicio,required:""},null,8,["modelValue","min"])]),e("div",Sa,[e("div",Aa,[n[11]||(n[11]=e("span",{class:"text-sm text-gray-600"},"Dias solicitados:",-1)),e("span",Ua,f(a(F))+" dias",1)])]),e("div",Da,[o(k,{modelValue:a(d).vender_dias,"onUpdate:modelValue":n[5]||(n[5]=y=>a(d).vender_dias=y),label:"Vender dias de férias (Abono Pecuniário)",description:"Converter até 10 dias em dinheiro"},null,8,["modelValue"]),a(d).vender_dias?(r(),_("div",Ia,[o(P,{modelValue:a(d).dias_venda,"onUpdate:modelValue":n[6]||(n[6]=y=>a(d).dias_venda=y),type:"number",label:"Quantidade de dias para vender",max:10,min:1},null,8,["modelValue"])])):U("",!0),o(k,{modelValue:a(d).adiantamento_13,"onUpdate:modelValue":n[7]||(n[7]=y=>a(d).adiantamento_13=y),label:"Solicitar adiantamento do 13º salário",description:"Receber 50% do 13º junto com as férias"},null,8,["modelValue"])]),o(R,{modelValue:a(d).observacoes,"onUpdate:modelValue":n[8]||(n[8]=y=>a(d).observacoes=y),label:"Observações",placeholder:"Informações adicionais sobre a solicitação...",rows:3},null,8,["modelValue"])]),e("div",za,[o(h,{type:"button",theme:"admin",variant:"secondary","full-width":"",onClick:c},{default:w(()=>[...n[12]||(n[12]=[M(" Cancelar ",-1)])]),_:1}),o(h,{type:"submit",theme:"admin",variant:"primary","full-width":"",loading:a(b)},{default:w(()=>[M(f(a($)?"Salvar Alterações":"Enviar Solicitação"),1)]),_:1},8,["loading"])])],32)]),_:1},8,["modelValue","title"])}}}),Ea=Object.assign(Fa,{__name:"FeriasSolicitacaoModal"}),Ma={key:0,class:"space-y-6"},Pa={class:"bg-gray-50 rounded-lg p-4"},Na={class:"flex items-center gap-4"},Ra={class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"},Ba={class:"font-semibold text-gray-800"},Ta={class:"text-sm text-gray-500"},qa={class:"grid grid-cols-2 gap-4"},La={class:"font-semibold text-gray-800"},Oa={class:"font-semibold text-gray-800"},Ga={class:"font-semibold text-gray-800"},Ya={class:"font-semibold text-gray-800"},Ha={key:0,class:"space-y-2"},Ja={key:0,class:"flex items-center gap-2 text-sm"},Qa={key:1,class:"flex items-center gap-2 text-sm"},Ka={key:1},Wa={class:"text-gray-700 mt-1 bg-gray-50 rounded-lg p-3"},Xa={class:"border-t border-gray-200 pt-4"},Za={class:"flex gap-2 mb-4"},eo={class:"flex gap-3 pt-4"},ao=G({__name:"FeriasAprovacaoModal",props:{modelValue:{type:Boolean},solicitacao:{default:null}},emits:["update:modelValue","aprovar","rejeitar"],setup(t,{emit:V}){const u=t,v=V,b=A(!1),p=A("aprovar"),$=A(""),d=D({get:()=>u.modelValue,set:C=>v("update:modelValue",C)}),S=D(()=>({normal:"Normal",fracionada:"Fracionada",abono_pecuniario:"Com Abono Pecuniário",coletiva:"Coletiva"})[u.solicitacao?.tipo]||"Normal"),j=C=>C?new Date(C).toLocaleDateString("pt-BR"):"-",I=()=>{v("update:modelValue",!1),p.value="aprovar",$.value=""},F=async()=>{if(u.solicitacao?.id){b.value=!0;try{p.value==="aprovar"?v("aprovar",u.solicitacao.id):v("rejeitar",u.solicitacao.id,$.value),I()}finally{b.value=!1}}};return(C,c)=>{const z=Y("Icon"),x=re,n=K,s=de;return r(),N(s,{modelValue:a(d),"onUpdate:modelValue":c[3]||(c[3]=l=>B(d)?d.value=l:null),title:"Aprovar/Rejeitar Solicitação",size:"md"},{default:w(()=>[t.solicitacao?(r(),_("div",Ma,[e("div",Pa,[e("div",Na,[e("div",Ra,[o(z,{name:"heroicons:user",class:"text-red-600",size:"24"})]),e("div",null,[e("h4",Ba,f(t.solicitacao.colaborador_nome),1),e("p",Ta,f(t.solicitacao.cargo)+" - "+f(t.solicitacao.departamento),1)])])]),e("div",qa,[e("div",null,[c[4]||(c[4]=e("span",{class:"text-sm text-gray-500"},"Período",-1)),e("p",La,f(j(t.solicitacao.data_inicio))+" a "+f(j(t.solicitacao.data_fim)),1)]),e("div",null,[c[5]||(c[5]=e("span",{class:"text-sm text-gray-500"},"Dias",-1)),e("p",Oa,f(t.solicitacao.dias_solicitados)+" dias",1)]),e("div",null,[c[6]||(c[6]=e("span",{class:"text-sm text-gray-500"},"Tipo",-1)),e("p",Ga,f(a(S)),1)]),e("div",null,[c[7]||(c[7]=e("span",{class:"text-sm text-gray-500"},"Solicitado em",-1)),e("p",Ya,f(j(t.solicitacao.created_at)),1)])]),t.solicitacao.vender_dias||t.solicitacao.adiantamento_13?(r(),_("div",Ha,[t.solicitacao.vender_dias?(r(),_("div",Ja,[o(z,{name:"heroicons:check-circle",class:"text-green-500",size:"18"}),e("span",null,"Venda de "+f(t.solicitacao.dias_venda)+" dias",1)])):U("",!0),t.solicitacao.adiantamento_13?(r(),_("div",Qa,[o(z,{name:"heroicons:check-circle",class:"text-green-500",size:"18"}),c[8]||(c[8]=e("span",null,"Adiantamento do 13º salário",-1))])):U("",!0)])):U("",!0),t.solicitacao.observacoes?(r(),_("div",Ka,[c[9]||(c[9]=e("span",{class:"text-sm text-gray-500"},"Observações do colaborador",-1)),e("p",Wa,f(t.solicitacao.observacoes),1)])):U("",!0),e("div",Xa,[e("div",Za,[e("button",{type:"button",class:E(["flex-1 py-2 px-4 rounded-lg font-medium transition-colors",a(p)==="aprovar"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),onClick:c[0]||(c[0]=l=>p.value="aprovar")},[o(z,{name:"heroicons:check",size:"18",class:"mr-1"}),c[10]||(c[10]=M(" Aprovar ",-1))],2),e("button",{type:"button",class:E(["flex-1 py-2 px-4 rounded-lg font-medium transition-colors",a(p)==="rejeitar"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),onClick:c[1]||(c[1]=l=>p.value="rejeitar")},[o(z,{name:"heroicons:x-mark",size:"18",class:"mr-1"}),c[11]||(c[11]=M(" Rejeitar ",-1))],2)]),a(p)==="rejeitar"?(r(),N(x,{key:0,modelValue:a($),"onUpdate:modelValue":c[2]||(c[2]=l=>B($)?$.value=l:null),label:"Motivo da Rejeição",placeholder:"Informe o motivo da rejeição...",required:"",rows:3},null,8,["modelValue"])):U("",!0)]),e("div",eo,[o(n,{type:"button",theme:"admin",variant:"secondary","full-width":"",onClick:I},{default:w(()=>[...c[12]||(c[12]=[M(" Cancelar ",-1)])]),_:1}),o(n,{type:"button",theme:"admin",variant:a(p)==="aprovar"?"success":"danger","full-width":"",loading:a(b),disabled:a(p)==="rejeitar"&&!a($),onClick:F},{default:w(()=>[M(f(a(p)==="aprovar"?"Confirmar Aprovação":"Confirmar Rejeição"),1)]),_:1},8,["variant","loading","disabled"])])])):U("",!0)]),_:1},8,["modelValue"])}}}),oo=Object.assign(ao,{__name:"FeriasAprovacaoModal"});function to(){const t=A([]),V=A({pendentes:0,aprovadas:0,em_gozo:0,concluidas:0,rejeitadas:0,vencendo:0,total_dias_ano:0}),u=A({dias_minimos_fracionamento:5,dias_maximos_venda:10,antecedencia_minima_dias:30,permite_fracionamento:!0,max_fracoes:3,permite_abono_pecuniario:!0,notificar_vencimento_dias:60,notificar_aprovador:!0,notificar_rh:!0,bloquear_ferias_coletivas:!1,periodos_bloqueados:[]}),v=A(!1),b=A(null),p=async s=>{v.value=!0,b.value=null;try{const l=new URLSearchParams;s?.status&&s.status!=="todos"&&l.append("status",s.status),s?.colaborador_id&&l.append("colaborador_id",s.colaborador_id),s?.ano&&l.append("ano",s.ano.toString());const k=l.toString(),P=k?`/api/ferias?${k}`:"/api/ferias",R=await $fetch(P);t.value=R||[]}catch(l){b.value=l.message||"Erro ao buscar férias",console.error("Erro ao buscar férias:",l),t.value=[]}finally{v.value=!1}},$=async()=>{try{const s=await $fetch("/api/ferias/stats");V.value=s}catch(s){console.error("Erro ao buscar estatísticas:",s)}},d=async()=>{try{const s=await $fetch("/api/ferias/config");u.value=s}catch(s){console.error("Erro ao buscar configurações:",s)}};return{ferias:t,stats:V,config:u,loading:v,error:b,fetchFerias:p,fetchStats:$,fetchConfig:d,criarSolicitacao:async s=>{v.value=!0;try{const l=await $fetch("/api/ferias",{method:"POST",body:s});return await p(),await $(),l}catch(l){throw b.value=l.message||"Erro ao criar solicitação",l}finally{v.value=!1}},aprovarFerias:async s=>{v.value=!0;try{await $fetch("/api/ferias/aprovar",{method:"POST",body:{id:s,acao:"aprovar"}}),await p(),await $()}catch(l){throw b.value=l.message||"Erro ao aprovar férias",l}finally{v.value=!1}},rejeitarFerias:async(s,l)=>{v.value=!0;try{await $fetch("/api/ferias/aprovar",{method:"POST",body:{id:s,acao:"rejeitar",motivo_rejeicao:l}}),await p(),await $()}catch(k){throw b.value=k.message||"Erro ao rejeitar férias",k}finally{v.value=!1}},cancelarFerias:async s=>{v.value=!0;try{await $fetch(`/api/ferias/${s}`,{method:"DELETE"}),await p(),await $()}catch(l){throw b.value=l.message||"Erro ao cancelar férias",l}finally{v.value=!1}},salvarConfig:async s=>{v.value=!0;try{await $fetch("/api/ferias/config",{method:"PUT",body:s}),await d()}catch(l){throw b.value=l.message||"Erro ao salvar configurações",l}finally{v.value=!1}},getStatusColor:s=>({Pendente:"warning",Aprovada:"success",Rejeitada:"danger",Cancelada:"default",Em_Andamento:"info",Concluida:"success"})[s]||"default",getStatusLabel:s=>({Pendente:"Pendente",Aprovada:"Aprovada",Rejeitada:"Rejeitada",Cancelada:"Cancelada",Em_Andamento:"Em Gozo",Concluida:"Concluída"})[s]||s,getTipoLabel:s=>({normal:"Normal",fracionada:"Fracionada",abono_pecuniario:"Com Abono Pecuniário",coletiva:"Coletiva"})[s]||"Normal",formatDate:s=>s?new Date(s).toLocaleDateString("pt-BR"):"-"}}const so={class:"min-h-screen bg-gray-50"},no={class:"bg-white border-b border-gray-200 sticky top-0 z-40"},io={class:"max-w-7xl mx-auto px-8 py-4"},lo={class:"flex items-center justify-between"},ro={class:"flex items-center gap-4"},co={class:"flex items-center gap-3"},uo={class:"max-w-7xl mx-auto p-8"},mo={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-8"},vo={class:"flex flex-wrap gap-4 mb-6"},po=["value"],fo={key:0,class:"text-center py-12"},_o={key:1},go={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},bo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},xo={class:"space-y-3"},yo={class:"flex justify-end pt-4 border-t border-gray-200"},Fo=G({__name:"ferias",setup(t){const{ferias:V,stats:u,config:v,loading:b,fetchFerias:p,fetchStats:$,fetchConfig:d,criarSolicitacao:S,aprovarFerias:j,rejeitarFerias:I,cancelarFerias:F,salvarConfig:C}=to(),c=A("solicitacoes"),z=A(""),x=A("todos"),n=A(new Date().getFullYear()),s=A(!1),l=A(!1),k=A(null),P=A(!1),R=A([]),h=A({dias_minimos_fracionamento:5,dias_maximos_venda:10,antecedencia_minima_dias:30,permite_fracionamento:!0,max_fracoes:3,permite_abono_pecuniario:!0,notificar_vencimento_dias:60,notificar_aprovador:!0,notificar_rh:!0,bloquear_ferias_coletivas:!1,periodos_bloqueados:[]}),H=D(()=>[{id:"solicitacoes",label:"Solicitações",icon:"heroicons:document-text",count:u.value.pendentes},{id:"calendario",label:"Calendário",icon:"heroicons:calendar"},{id:"configuracoes",label:"Configurações",icon:"heroicons:cog-6-tooth"}]),y=D(()=>{const g=new Date().getFullYear();return[g-1,g,g+1]}),Z=D(()=>{let g=V.value;if(z.value){const i=z.value.toLowerCase();g=g.filter(L=>L.colaborador_nome?.toLowerCase().includes(i)||L.departamento?.toLowerCase().includes(i))}return g}),ue=D(()=>V.value.filter(g=>["Aprovada","Em_Andamento"].includes(g.status)).map(g=>({id:g.id,colaborador:g.colaborador_nome,data_inicio:g.data_inicio,data_fim:g.data_fim,status:g.status==="Em_Andamento"?"em_gozo":"aprovada"}))),me=async()=>{try{await Promise.all([p({status:x.value==="todos"?void 0:x.value,ano:n.value}),$(),d(),ve()]),h.value={...v.value}}catch(g){console.error("Erro ao carregar dados:",g)}},ve=async()=>{try{const g=await $fetch("/api/colaboradores");R.value=g.map(i=>({id:i.id,nome:i.nome}))}catch(g){console.error("Erro ao carregar colaboradores:",g)}},ee=()=>{s.value=!0},ae=g=>{k.value=g,l.value=!0},pe=g=>{console.log("Ver detalhes:",g)},fe=async g=>{if(confirm(`Deseja cancelar a solicitação de férias de ${g.colaborador_nome}?`))try{await F(g.id)}catch{alert("Erro ao cancelar solicitação")}},_e=async g=>{try{await S(g),s.value=!1}catch{alert("Erro ao criar solicitação")}},ge=async g=>{try{await j(g),l.value=!1}catch{alert("Erro ao aprovar férias")}},be=async(g,i)=>{try{await I(g,i),l.value=!1}catch{alert("Erro ao rejeitar férias")}},xe=async()=>{P.value=!0;try{await C(h.value),alert("Configurações salvas com sucesso!")}catch{alert("Erro ao salvar configurações")}finally{P.value=!1}};return te([x,n],()=>{p({status:x.value==="todos"?void 0:x.value,ano:n.value})}),Ue(()=>{me()}),(g,i)=>{const L=Y("Icon"),ye=De,X=K,he=Ie,O=ze,we=Fe,oe=ne,Ve=Ee,$e=ea,Ce=ba,J=ie,Q=le,ke=ce,je=Va,Se=Ea,Ae=oo;return r(),_("div",so,[e("header",no,[e("div",io,[e("div",lo,[e("div",ro,[o(ye,{to:"/admin",class:"w-10 h-10 bg-red-700 rounded-lg flex items-center justify-center hover:bg-red-800 transition-colors"},{default:w(()=>[o(L,{name:"heroicons:arrow-left",class:"text-white",size:"20"})]),_:1}),i[16]||(i[16]=e("div",null,[e("h1",{class:"text-xl font-bold text-gray-800"},"Gestão de Férias"),e("p",{class:"text-sm text-gray-500"},"Controle de férias e períodos aquisitivos")],-1))]),e("div",co,[o(X,{theme:"admin",variant:"primary",onClick:ee},{default:w(()=>[o(L,{name:"heroicons:plus",size:"20",class:"mr-1"}),i[17]||(i[17]=M(" Nova Solicitação ",-1))]),_:1}),o(he,{theme:"admin"})])])])]),e("div",uo,[e("div",mo,[o(O,{label:"Pendentes",value:a(u).pendentes,icon:"heroicons:clock",color:"amber"},null,8,["value"]),o(O,{label:"Aprovadas",value:a(u).aprovadas,icon:"heroicons:check-circle",color:"green"},null,8,["value"]),o(O,{label:"Em Gozo",value:a(u).em_gozo,icon:"heroicons:sun",color:"blue"},null,8,["value"]),o(O,{label:"Concluídas",value:a(u).concluidas,icon:"heroicons:check-badge",color:"gray"},null,8,["value"]),o(O,{label:"Rejeitadas",value:a(u).rejeitadas,icon:"heroicons:x-circle",color:"red"},null,8,["value"]),o(O,{label:"Vencendo",value:a(u).vencendo,icon:"heroicons:exclamation-triangle",color:"amber"},null,8,["value"]),o(O,{label:"Dias no Ano",value:a(u).total_dias_ano,icon:"heroicons:calendar-days",color:"purple"},null,8,["value"])]),o(je,{modelValue:a(c),"onUpdate:modelValue":i[13]||(i[13]=m=>B(c)?c.value=m:null),tabs:a(H),class:"mb-6"},{solicitacoes:w(()=>[e("div",vo,[o(we,{modelValue:a(z),"onUpdate:modelValue":i[0]||(i[0]=m=>B(z)?z.value=m:null),placeholder:"Buscar colaborador...",class:"w-64"},null,8,["modelValue"]),o(oe,{modelValue:a(x),"onUpdate:modelValue":i[1]||(i[1]=m=>B(x)?x.value=m:null),class:"w-48"},{default:w(()=>[...i[18]||(i[18]=[e("option",{value:"todos"},"Todos os status",-1),e("option",{value:"Pendente"},"Pendentes",-1),e("option",{value:"Aprovada"},"Aprovadas",-1),e("option",{value:"Em_Andamento"},"Em Gozo",-1),e("option",{value:"Concluida"},"Concluídas",-1),e("option",{value:"Rejeitada"},"Rejeitadas",-1),e("option",{value:"Cancelada"},"Canceladas",-1)])]),_:1},8,["modelValue"]),o(oe,{modelValue:a(n),"onUpdate:modelValue":i[2]||(i[2]=m=>B(n)?n.value=m:null),class:"w-32"},{default:w(()=>[(r(!0),_(T,null,q(a(y),m=>(r(),_("option",{key:m,value:m},f(m),9,po))),128))]),_:1},8,["modelValue"])]),a(b)?(r(),_("div",fo,[o(L,{name:"heroicons:arrow-path",class:"animate-spin text-gray-400",size:"40"}),i[19]||(i[19]=e("p",{class:"text-gray-500 mt-2"},"Carregando...",-1))])):a(Z).length===0?(r(),_("div",_o,[o(Ve,{icon:"heroicons:sun",title:"Nenhuma solicitação encontrada",description:"Não há solicitações de férias com os filtros selecionados.",color:"amber"},{action:w(()=>[o(X,{theme:"admin",variant:"primary",onClick:ee},{default:w(()=>[...i[20]||(i[20]=[M(" Nova Solicitação ",-1)])]),_:1})]),_:1})])):(r(),_("div",go,[(r(!0),_(T,null,q(a(Z),m=>(r(),N($e,{key:m.id,solicitacao:m,"show-approval-actions":m.status==="Pendente","show-cancel-action":m.status==="Pendente",onAprovar:ae,onRejeitar:ae,onDetalhes:pe,onCancelar:fe},null,8,["solicitacao","show-approval-actions","show-cancel-action"]))),128))]))]),calendario:w(()=>[o(Ce,{ferias:a(ue)},null,8,["ferias"])]),configuracoes:w(()=>[o(ke,{title:"Configurações de Férias",icon:"heroicons:cog-6-tooth","icon-color":"gray"},{default:w(()=>[e("form",{onSubmit:se(xe,["prevent"]),class:"space-y-6"},[e("div",bo,[o(J,{modelValue:a(h).dias_minimos_fracionamento,"onUpdate:modelValue":i[3]||(i[3]=m=>a(h).dias_minimos_fracionamento=m),modelModifiers:{number:!0},type:"number",label:"Dias mínimos por fração",min:5,max:30},null,8,["modelValue"]),o(J,{modelValue:a(h).dias_maximos_venda,"onUpdate:modelValue":i[4]||(i[4]=m=>a(h).dias_maximos_venda=m),modelModifiers:{number:!0},type:"number",label:"Máximo de dias para venda",min:0,max:10},null,8,["modelValue"]),o(J,{modelValue:a(h).antecedencia_minima_dias,"onUpdate:modelValue":i[5]||(i[5]=m=>a(h).antecedencia_minima_dias=m),modelModifiers:{number:!0},type:"number",label:"Antecedência mínima (dias)",min:1},null,8,["modelValue"]),o(J,{modelValue:a(h).max_fracoes,"onUpdate:modelValue":i[6]||(i[6]=m=>a(h).max_fracoes=m),modelModifiers:{number:!0},type:"number",label:"Máximo de frações",min:1,max:3},null,8,["modelValue"]),o(J,{modelValue:a(h).notificar_vencimento_dias,"onUpdate:modelValue":i[7]||(i[7]=m=>a(h).notificar_vencimento_dias=m),modelModifiers:{number:!0},type:"number",label:"Notificar vencimento (dias antes)",min:1},null,8,["modelValue"])]),e("div",xo,[o(Q,{modelValue:a(h).permite_fracionamento,"onUpdate:modelValue":i[8]||(i[8]=m=>a(h).permite_fracionamento=m),label:"Permitir fracionamento de férias",description:"Colaboradores podem dividir as férias em até 3 períodos"},null,8,["modelValue"]),o(Q,{modelValue:a(h).permite_abono_pecuniario,"onUpdate:modelValue":i[9]||(i[9]=m=>a(h).permite_abono_pecuniario=m),label:"Permitir abono pecuniário",description:"Colaboradores podem vender até 10 dias de férias"},null,8,["modelValue"]),o(Q,{modelValue:a(h).notificar_aprovador,"onUpdate:modelValue":i[10]||(i[10]=m=>a(h).notificar_aprovador=m),label:"Notificar aprovador",description:"Enviar e-mail ao gestor quando houver nova solicitação"},null,8,["modelValue"]),o(Q,{modelValue:a(h).notificar_rh,"onUpdate:modelValue":i[11]||(i[11]=m=>a(h).notificar_rh=m),label:"Notificar RH",description:"Enviar cópia das notificações para o RH"},null,8,["modelValue"]),o(Q,{modelValue:a(h).bloquear_ferias_coletivas,"onUpdate:modelValue":i[12]||(i[12]=m=>a(h).bloquear_ferias_coletivas=m),label:"Bloquear férias coletivas",description:"Impedir solicitações durante períodos de férias coletivas"},null,8,["modelValue"])]),e("div",yo,[o(X,{type:"submit",theme:"admin",variant:"primary",loading:a(P)},{default:w(()=>[...i[21]||(i[21]=[M(" Salvar Configurações ",-1)])]),_:1},8,["loading"])])],32)]),_:1})]),_:1},8,["modelValue","tabs"])]),o(Se,{modelValue:a(s),"onUpdate:modelValue":i[14]||(i[14]=m=>B(s)?s.value=m:null),colaboradores:a(R),periodos:[],onSubmit:_e},null,8,["modelValue","colaboradores"]),o(Ae,{modelValue:a(l),"onUpdate:modelValue":i[15]||(i[15]=m=>B(l)?l.value=m:null),solicitacao:a(k),onAprovar:ge,onRejeitar:be},null,8,["modelValue","solicitacao"])])}}});export{Fo as default};
