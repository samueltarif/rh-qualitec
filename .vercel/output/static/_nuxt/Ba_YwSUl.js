import{d as y,H as h,N as k,r as b,f as o,b as e,I as C,e as c,n as p,g as t,t as r,k as g,a as N,_ as S,p as z,o as n,l as w}from"./DNqCZqpD.js";const V={class:"min-h-screen bg-gray-50 p-8"},E={class:"max-w-4xl mx-auto"},B={class:"card mb-6"},R={class:"space-y-3"},T={class:"flex items-center gap-3"},j={class:"text-sm text-gray-500"},I={class:"flex items-center gap-3"},K={class:"text-sm text-gray-500 font-mono"},P={class:"flex items-center gap-3"},U={class:"text-sm text-gray-500"},A={class:"card mb-6"},H=["disabled"],J={key:0},L={key:1},D={key:0,class:"mt-4"},M={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},O={class:"flex items-start gap-3"},Q={class:"text-sm text-green-700 mt-1"},q={key:0,class:"mt-2 text-xs bg-green-100 p-2 rounded overflow-auto"},F={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},G={class:"flex items-start gap-3"},W={class:"text-sm text-red-700 mt-1"},X={key:0,class:"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto"},Y={class:"mt-6 text-center"},ee=y({__name:"test-supabase",setup(Z){const i=h(),_=k(),u=_.public.supabaseUrl,d=_.public.supabaseKey,x=b(!1),a=b(null),v=async()=>{x.value=!0,a.value=null;try{const{data:m,error:s}=await i.from("app_users").select("count").limit(1);s?s.code==="42P01"?a.value={success:!0,message:'Conexão estabelecida! A tabela "app_users" ainda não existe. Execute as migrations.',error:s.message}:a.value={success:!1,message:"Erro ao conectar com o banco de dados",error:s.message}:a.value={success:!0,message:"Conexão estabelecida com sucesso! Banco de dados acessível.",data:m}}catch(m){a.value={success:!1,message:"Erro ao testar conexão",error:m.message}}finally{x.value=!1}};return(m,s)=>{const l=S,f=z;return n(),o("div",V,[e("div",E,[s[8]||(s[8]=e("div",{class:"card mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-800 mb-2"}," Teste de Conexão Supabase "),e("p",{class:"text-gray-600"}," Sistema RH Qualitec - Verificação de Configuração ")],-1)),e("div",B,[s[3]||(s[3]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Status da Conexão",-1)),e("div",R,[e("div",T,[c(l,{name:t(u)?"heroicons:check-circle":"heroicons:x-circle",class:p(t(u)?"text-green-500":"text-red-500"),size:"24"},null,8,["name","class"]),e("div",null,[s[0]||(s[0]=e("p",{class:"font-medium text-gray-700"},"Supabase URL",-1)),e("p",j,r(t(u)||"Não configurado"),1)])]),e("div",I,[c(l,{name:t(d)?"heroicons:check-circle":"heroicons:x-circle",class:p(t(d)?"text-green-500":"text-red-500"),size:"24"},null,8,["name","class"]),e("div",null,[s[1]||(s[1]=e("p",{class:"font-medium text-gray-700"},"Anon Key",-1)),e("p",K,r(t(d)?t(d).substring(0,30)+"...":"Não configurado"),1)])]),e("div",P,[c(l,{name:t(i)?"heroicons:check-circle":"heroicons:x-circle",class:p(t(i)?"text-green-500":"text-red-500"),size:"24"},null,8,["name","class"]),e("div",null,[s[2]||(s[2]=e("p",{class:"font-medium text-gray-700"},"Cliente Supabase",-1)),e("p",U,r(t(i)?"Inicializado com sucesso":"Erro na inicialização"),1)])])])]),e("div",A,[s[6]||(s[6]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Teste de Conexão",-1)),e("button",{onClick:v,disabled:t(x),class:"employee-btn-primary mb-4"},[t(x)?(n(),o("span",J,"Testando...")):(n(),o("span",L,"Testar Conexão com Banco"))],8,H),t(a)?(n(),o("div",D,[t(a).success?(n(),o("div",M,[e("div",O,[c(l,{name:"heroicons:check-circle",class:"text-green-500 flex-shrink-0",size:"24"}),e("div",null,[s[4]||(s[4]=e("p",{class:"font-medium text-green-800"},"Conexão bem-sucedida!",-1)),e("p",Q,r(t(a).message),1),t(a).data?(n(),o("pre",q,r(JSON.stringify(t(a).data,null,2)),1)):g("",!0)])])])):(n(),o("div",F,[e("div",G,[c(l,{name:"heroicons:x-circle",class:"text-red-500 flex-shrink-0",size:"24"}),e("div",null,[s[5]||(s[5]=e("p",{class:"font-medium text-red-800"},"Erro na conexão",-1)),e("p",W,r(t(a).message),1),t(a).error?(n(),o("pre",X,r(t(a).error),1)):g("",!0)])])]))])):g("",!0)]),s[9]||(s[9]=C('<div class="card"><h2 class="text-xl font-bold text-gray-800 mb-4">Informações do Projeto</h2><div class="grid md:grid-cols-2 gap-4"><div><p class="text-sm text-gray-500">Projeto Supabase</p><p class="font-mono text-sm text-gray-800">utuxefswedolrninwgvs</p></div><div><p class="text-sm text-gray-500">Região</p><p class="text-sm text-gray-800">supabase.co</p></div><div><p class="text-sm text-gray-500">Módulo Nuxt</p><p class="text-sm text-gray-800">@nuxtjs/supabase v1.4.0</p></div><div><p class="text-sm text-gray-500">Cliente JS</p><p class="text-sm text-gray-800">@supabase/supabase-js v2.45.0</p></div></div></div>',1)),e("div",Y,[c(f,{to:"/",class:"text-blue-600 hover:text-blue-800"},{default:N(()=>[...s[7]||(s[7]=[w(" ← Voltar para página inicial ",-1)])]),_:1})])])])}}});export{ee as default};
