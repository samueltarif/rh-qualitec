import{d as P,a as T,g as v,o as c,e as t,l as j,f as a,t as p,b as f,p as y,c as F,r as C,s as L,i as I,v as S,h as l,F as M,k as A,R as Y,x as K,_ as Q}from"./BSA_tgdP.js";import{_ as U}from"./BBzIiODl.js";import{_ as W}from"./yUH5lwCE.js";import{_ as X}from"./HoD1yNF9.js";import{_ as Z}from"./CYRtSSXC.js";import{_ as ee}from"./BLXo4lQY.js";import{_ as oe}from"./CKoZXdJA.js";import{u as te,_ as se}from"./Cw5FGilC.js";import"./BaRlud3k.js";const le={class:"bg-white rounded-xl border-2 border-gray-200 hover:border-blue-400 transition-all group"},re={class:"p-6"},ne={class:"flex items-center justify-between mb-4"},ae={class:"flex items-center gap-3"},ie={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors"},ue={class:"font-bold text-gray-800"},de={class:"text-sm text-gray-500"},ce={class:"mb-4"},me={class:"font-semibold text-gray-800"},pe={class:"space-y-2 mb-4"},ve={class:"flex justify-between text-sm"},_e={class:"font-semibold text-gray-800"},ge={class:"flex justify-between text-sm"},fe={class:"font-semibold text-red-600"},xe={class:"flex justify-between pt-2 border-t"},he={class:"font-bold text-green-600"},be={key:0,class:"mb-4"},ye={class:"flex gap-2"},we=P({__name:"HoleriteCard",props:{holerite:{},showDelete:{type:Boolean}},emits:["visualizar","excluir"],setup(i){const s=i,r=o=>["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][o-1],w=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o||0),_=o=>({gerado:"blue",enviado:"green",pago:"purple",cancelado:"red"})[o]||"gray",$=o=>({gerado:"Gerado",enviado:"Enviado",pago:"Pago",cancelado:"Cancelado"})[o]||o,x=()=>{let o=s.holerite.salario_base||0;return o+=s.holerite.valor_horas_extras_50||0,o+=s.holerite.valor_horas_extras_100||0,o+=s.holerite.bonus||0,o+=s.holerite.comissoes||0,o+=s.holerite.adicional_insalubridade||0,o+=s.holerite.adicional_periculosidade||0,o+=s.holerite.adicional_noturno||0,o+=s.holerite.outros_proventos||0,(s.holerite.itens_personalizados||[]).filter(u=>u.tipo==="provento").forEach(u=>{o+=u.valor||0}),o},g=()=>{let o=0;return o+=s.holerite.inss||0,o+=s.holerite.irrf||0,o+=s.holerite.adiantamento||0,o+=s.holerite.emprestimos||0,o+=s.holerite.faltas||0,o+=s.holerite.atrasos||0,o+=s.holerite.plano_saude||0,o+=s.holerite.plano_odontologico||0,o+=s.holerite.seguro_vida||0,o+=s.holerite.auxilio_creche||0,o+=s.holerite.auxilio_educacao||0,o+=s.holerite.auxilio_combustivel||0,o+=s.holerite.outros_beneficios||0,o+=s.holerite.outros_descontos||0,(s.holerite.itens_personalizados||[]).filter(u=>u.tipo==="desconto").forEach(u=>{o+=u.valor||0}),o},k=()=>x()-g();return(o,e)=>{const u=T("Icon"),h=Z,z=U;return c(),v("div",le,[t("div",re,[t("div",ne,[t("div",ae,[t("div",ie,[a(u,{name:"heroicons:document-text",class:"text-blue-600",size:"24"})]),t("div",null,[t("p",ue,p(r(i.holerite.mes)),1),t("p",de,p(i.holerite.ano),1)])]),a(h,{color:_(i.holerite.status)},{default:f(()=>[y(p($(i.holerite.status)),1)]),_:1},8,["color"])]),t("div",ce,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-500"},"Colaborador",-1)),t("p",me,p(i.holerite.nome_colaborador),1)]),t("div",pe,[t("div",ve,[e[3]||(e[3]=t("span",{class:"text-gray-600"},"Salário Bruto",-1)),t("span",_e,p(w(x())),1)]),t("div",ge,[e[4]||(e[4]=t("span",{class:"text-gray-600"},"Descontos",-1)),t("span",fe,"-"+p(w(g())),1)]),t("div",xe,[e[5]||(e[5]=t("span",{class:"font-bold text-gray-800"},"Líquido",-1)),t("span",he,p(w(k())),1)])]),i.holerite.tipo==="decimo_terceiro"?(c(),v("div",be,[a(h,{color:"purple"},{default:f(()=>[y(" 13º Salário - "+p(i.holerite.parcela_13)+"ª Parcela ",1)]),_:1})])):j("",!0),t("div",ye,[a(z,{variant:"secondary",size:"sm","icon-left":"heroicons:eye",onClick:e[0]||(e[0]=E=>o.$emit("visualizar",i.holerite)),class:"flex-1"},{default:f(()=>[...e[6]||(e[6]=[y(" Visualizar ",-1)])]),_:1}),i.showDelete&&i.holerite.status==="gerado"?(c(),F(z,{key:0,variant:"danger",size:"sm","icon-left":"heroicons:trash",onClick:e[1]||(e[1]=E=>o.$emit("excluir",i.holerite))},{default:f(()=>[...e[7]||(e[7]=[y(" Excluir ",-1)])]),_:1})):j("",!0)])])])}}}),$e=Object.assign(we,{__name:"HoleriteCard"}),ke={class:"space-y-6"},ze={class:"bg-white rounded-xl border-2 border-gray-200 p-6"},Ce={class:"grid md:grid-cols-4 gap-4"},Ee=["value"],He=["value"],Be={class:"mt-4 flex gap-2"},Ie={key:0,class:"text-center py-12"},Se={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Ve=P({__name:"HoleritesList",props:{holerites:{},loading:{type:Boolean},showDelete:{type:Boolean}},emits:["visualizar","excluir"],setup(i){const s=i,r=C({mes:"",ano:"",status:"",tipo:""}),w=new Date().getFullYear(),_=L(()=>Array.from({length:5},(o,e)=>w-e)),$=L(()=>{let o=[...s.holerites];return r.value.mes&&(o=o.filter(e=>e.mes===Number(r.value.mes))),r.value.ano&&(o=o.filter(e=>e.ano===Number(r.value.ano))),r.value.status&&(o=o.filter(e=>e.status===r.value.status)),r.value.tipo&&(o=o.filter(e=>e.tipo===r.value.tipo)),o}),x=o=>["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][o-1],g=()=>{},k=()=>{r.value={mes:"",ano:"",status:"",tipo:""}};return(o,e)=>{const u=U,h=T("Icon"),z=$e,E=ee;return c(),v("div",ke,[t("div",ze,[t("div",Ce,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mês",-1)),I(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>l(r).mes=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg"},[e[6]||(e[6]=t("option",{value:""},"Todos",-1)),(c(),v(M,null,A(12,n=>t("option",{key:n,value:n},p(x(n)),9,Ee)),64))],512),[[S,l(r).mes]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ano",-1)),I(t("select",{"onUpdate:modelValue":e[1]||(e[1]=n=>l(r).ano=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg"},[e[8]||(e[8]=t("option",{value:""},"Todos",-1)),(c(!0),v(M,null,A(l(_),n=>(c(),v("option",{key:n,value:n},p(n),9,He))),128))],512),[[S,l(r).ano]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),I(t("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>l(r).status=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg"},[...e[10]||(e[10]=[t("option",{value:""},"Todos",-1),t("option",{value:"gerado"},"Gerado",-1),t("option",{value:"enviado"},"Enviado",-1),t("option",{value:"pago"},"Pago",-1)])],512),[[S,l(r).status]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tipo",-1)),I(t("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>l(r).tipo=n),class:"w-full px-4 py-2 border border-gray-300 rounded-lg"},[...e[12]||(e[12]=[t("option",{value:""},"Todos",-1),t("option",{value:"mensal"},"Mensal",-1),t("option",{value:"decimo_terceiro"},"13º Salário",-1)])],512),[[S,l(r).tipo]])])]),t("div",Be,[a(u,{onClick:g,"icon-left":"heroicons:funnel"},{default:f(()=>[...e[14]||(e[14]=[y(" Filtrar ",-1)])]),_:1}),a(u,{variant:"secondary",onClick:k,"icon-left":"heroicons:x-mark"},{default:f(()=>[...e[15]||(e[15]=[y(" Limpar ",-1)])]),_:1})])]),i.loading?(c(),v("div",Ie,[a(h,{name:"heroicons:arrow-path",class:"animate-spin text-gray-400 mx-auto mb-4",size:"48"}),e[16]||(e[16]=t("p",{class:"text-gray-600"},"Carregando holerites...",-1))])):l($).length>0?(c(),v("div",Se,[(c(!0),v(M,null,A(l($),n=>(c(),F(z,{key:n.id,holerite:n,"show-delete":i.showDelete,onVisualizar:e[4]||(e[4]=H=>o.$emit("visualizar",H)),onExcluir:e[5]||(e[5]=H=>o.$emit("excluir",H))},null,8,["holerite","show-delete"]))),128))])):(c(),F(E,{key:2,icon:"heroicons:document-text",title:"Nenhum holerite encontrado",description:"Não há holerites para os filtros selecionados"}))])}}}),Ne=Object.assign(Ve,{__name:"HoleritesList"}),De={class:"min-h-screen bg-gray-50"},Me={class:"bg-white border-b border-gray-200 sticky top-0 z-40"},Ae={class:"max-w-7xl mx-auto px-8 py-4"},Fe={class:"flex items-center justify-between"},Le={class:"flex items-center gap-4"},Pe={class:"flex items-center gap-3"},Te={class:"max-w-7xl mx-auto p-8"},Ue={class:"grid md:grid-cols-4 gap-6 mb-8"},We=P({__name:"holerites",setup(i){const s=Y(),{buscarHolerites:r,excluirHolerite:w,holerites:_,loading:$}=te(),x=C(!1),g=C(!1),k=C(null),o=C(null),e=C(!1),u=L(()=>{const d=_.value.length,m=_.value.filter(b=>b.status==="gerado").length,V=_.value.filter(b=>b.status==="enviado").length,N=_.value.reduce((b,D)=>b+(D.salario_liquido||0),0);return{total:d,gerados:m,enviados:V,valorTotal:N}}),h=async()=>{try{await r()}catch(d){console.error("Erro ao carregar holerites:",d),alert("Erro ao carregar holerites: "+d.message)}},z=d=>{k.value=d,x.value=!0},E=d=>{if(d.status!=="gerado"){alert('Apenas holerites com status "Gerado" podem ser excluídos');return}o.value=d,g.value=!0},n=async()=>{if(o.value){e.value=!0;try{await w(o.value.id),alert("Holerite excluído com sucesso!"),g.value=!1,o.value=null,await h()}catch(d){console.error("Erro ao excluir holerite:",d),alert("Erro ao excluir holerite: "+d.message)}finally{e.value=!1}}},H=()=>{s.push("/folha-pagamento")},G=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d||0);return K(()=>{h()}),(d,m)=>{const V=T("Icon"),N=Q,b=U,D=W,B=X,J=Ne,R=oe,O=se;return c(),v("div",De,[t("header",Me,[t("div",Ae,[t("div",Fe,[t("div",Le,[a(N,{to:"/folha-pagamento",class:"w-10 h-10 bg-red-700 rounded-lg flex items-center justify-center hover:bg-red-800 transition-colors"},{default:f(()=>[a(V,{name:"heroicons:arrow-left",class:"text-white",size:"20"})]),_:1}),m[2]||(m[2]=t("div",null,[t("h1",{class:"text-xl font-bold text-gray-800"},"Gerenciar Holerites"),t("p",{class:"text-sm text-gray-500"},"Visualize, exclua e gerencie todos os holerites")],-1))]),t("div",Pe,[a(b,{variant:"secondary","icon-left":"heroicons:arrow-path",onClick:h,disabled:l($)},{default:f(()=>[...m[3]||(m[3]=[y(" Atualizar ",-1)])]),_:1},8,["disabled"]),a(b,{"icon-left":"heroicons:plus",onClick:H},{default:f(()=>[...m[4]||(m[4]=[y(" Gerar Holerites ",-1)])]),_:1}),a(D,{theme:"admin"})])])])]),t("div",Te,[t("div",Ue,[a(B,{title:"Total de Holerites",value:l(u).total,icon:"heroicons:document-text",color:"blue"},null,8,["value"]),a(B,{title:"Gerados",value:l(u).gerados,icon:"heroicons:document-check",color:"green"},null,8,["value"]),a(B,{title:"Enviados",value:l(u).enviados,icon:"heroicons:paper-airplane",color:"purple"},null,8,["value"]),a(B,{title:"Valor Total",value:G(l(u).valorTotal),icon:"heroicons:currency-dollar",color:"amber"},null,8,["value"])]),a(J,{holerites:l(_),loading:l($),"show-delete":!0,onVisualizar:z,onExcluir:E},null,8,["holerites","loading"]),a(R,{show:l(x),"holerite-id":l(k)?.id,onClose:m[0]||(m[0]=q=>x.value=!1)},null,8,["show","holerite-id"]),a(O,{show:l(g),holerite:l(o),loading:l(e),onClose:m[1]||(m[1]=q=>g.value=!1),onConfirmar:n},null,8,["show","holerite","loading"])])])}}});export{We as default};
